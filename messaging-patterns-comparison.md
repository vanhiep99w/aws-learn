# Messaging Patterns Comparison: Queue vs Pub/Sub vs Streaming vs Event Bus


## Má»¥c lá»¥c

- [Tá»•ng quan](#tá»•ng-quan)
- [1. 4 Messaging Patterns](#1-4-messaging-patterns)
- [2. So sÃ¡nh chi tiáº¿t](#2-so-sÃ¡nh-chi-tiáº¿t)
- [3. Use Cases](#3-use-cases)
- [4. Decision Tree](#4-decision-tree)
- [5. Káº¿t há»£p cÃ¡c patterns](#5-káº¿t-há»£p-cÃ¡c-patterns)
- [6. Spring Boot Integration](#6-spring-boot-integration)
- [7. Exam Tips](#7-exam-tips)
- [TÃ i liá»‡u tham kháº£o](#tÃ i-liá»‡u-tham-kháº£o)

---

## Tá»•ng quan

TÃ i liá»‡u nÃ y so sÃ¡nh **4 messaging patterns chÃ­nh** trong AWS vÃ  giÃºp báº¡n hiá»ƒu khi nÃ o dÃ¹ng pattern nÃ o.

**TÃ i liá»‡u liÃªn quan:**
- [SQS - Queue](./sqs.md)
- [SNS - Pub/Sub](./sns.md)
- [Kinesis - Streaming](./kinesis.md)
- [EventBridge - Event Bus](./eventbridge.md)
- [Amazon MQ - Traditional Messaging](./amazon-mq.md)

---

1. [4 Messaging Patterns](#1-4-messaging-patterns)
2. [So sÃ¡nh chi tiáº¿t](#2-so-sÃ¡nh-chi-tiáº¿t)
3. [Use Cases](#3-use-cases)
4. [Decision Tree](#4-decision-tree)
5. [Káº¿t há»£p cÃ¡c patterns](#5-káº¿t-há»£p-cÃ¡c-patterns)

---

## 1. 4 Messaging Patterns

### 1.1 QUEUE (HÃ ng Ä‘á»£i) - AWS SQS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          QUEUE                                  â”‚
â”‚                      ğŸ“¦ AWS: SQS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   ğŸª VÃ­ dá»¥ thá»±c táº¿: QUáº¦Y Gá»ŒI MÃ“N Táº I NHÃ€ HÃ€NG                   â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   KhÃ¡ch gá»i mÃ³n                                         â”‚  â”‚
â”‚   â”‚        â†“                                                â”‚  â”‚
â”‚   â”‚   [ÄÆ¡n1] [ÄÆ¡n2] [ÄÆ¡n3] [ÄÆ¡n4] [ÄÆ¡n5]  â† Queue          â”‚  â”‚
â”‚   â”‚        â”‚                                                â”‚  â”‚
â”‚   â”‚        â†“ (Ä‘áº§u báº¿p PULL Ä‘Æ¡n tá»« queue)                    â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”‚
â”‚   â”‚   â”‚ Báº¿p 1  â”‚  â”‚ Báº¿p 2  â”‚  â”‚ Báº¿p 3  â”‚  â† Consumers      â”‚  â”‚
â”‚   â”‚   â”‚ [ÄÆ¡n1] â”‚  â”‚ [ÄÆ¡n2] â”‚  â”‚ [ÄÆ¡n3] â”‚                   â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   â†’ Má»—i Ä‘áº§u báº¿p nháº­n 1 Ä‘Æ¡n khÃ¡c nhau (load balancing)  â”‚  â”‚
â”‚   â”‚   â†’ LÃ m xong â†’ ÄÆ¡n BIáº¾N Máº¤T khá»i queue                 â”‚  â”‚
â”‚   â”‚   â†’ Äáº§u báº¿p chá»§ Ä‘á»™ng láº¥y Ä‘Æ¡n (PULL model)              â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   Äáº¶C ÄIá»‚M:                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  âœ… Point-to-Point: 1 message â†’ 1 consumer              â”‚  â”‚
â”‚   â”‚  âœ… Persistence: Message lÆ°u trong queue (14 ngÃ y max)  â”‚  â”‚
â”‚   â”‚  âœ… Pull model: Consumer chá»§ Ä‘á»™ng poll messages         â”‚  â”‚
â”‚   â”‚  âŒ No replay: Xá»­ lÃ½ xong = xÃ³a message                 â”‚  â”‚
â”‚   â”‚  âŒ No fan-out: KhÃ´ng gá»­i Ä‘áº¿n nhiá»u consumers           â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**[ğŸ“– Chi tiáº¿t: SQS Documentation](./sqs.md)**

---

### 1.2 PUB/SUB (Publish/Subscribe) - AWS SNS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PUB/SUB                                  â”‚
â”‚                      ğŸ“¢ AWS: SNS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   ğŸ“» VÃ­ dá»¥ thá»±c táº¿: ÄÃ€I PHÃT THANH                              â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   DJ phÃ¡t tin (Publisher)                               â”‚  â”‚
â”‚   â”‚        â†“                                                â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚  â”‚
â”‚   â”‚   â”‚     ğŸ“» TOPIC          â”‚  â† SNS Topic               â”‚  â”‚
â”‚   â”‚   â”‚   "breaking-news"     â”‚                            â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚  â”‚
â”‚   â”‚        â”‚ PUSH (chá»§ Ä‘á»™ng gá»­i Ä‘áº¿n subscribers)            â”‚  â”‚
â”‚   â”‚        â†“                                                â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚   â”‚   â”‚NgÆ°á»i 1 â”‚  â”‚NgÆ°á»i 2 â”‚  â”‚NgÆ°á»i 3 â”‚  â”‚NgÆ°á»i 4 â”‚       â”‚  â”‚
â”‚   â”‚   â”‚ "Tin!" â”‚  â”‚ "Tin!" â”‚  â”‚ "Tin!" â”‚  â”‚ "Tin!" â”‚       â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   â†’ Táº¤T Cáº¢ subscribers Ä‘á»u nháº­n CÃ™NG message            â”‚  â”‚
â”‚   â”‚   â†’ Gá»­i xong â†’ Message BIáº¾N Máº¤T (khÃ´ng lÆ°u)            â”‚  â”‚
â”‚   â”‚   â†’ Push model: SNS chá»§ Ä‘á»™ng Ä‘áº©y Ä‘áº¿n subscribers       â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   Äáº¶C ÄIá»‚M:                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  âœ… Fan-out: 1 message â†’ Táº¤T Cáº¢ subscribers             â”‚  â”‚
â”‚   â”‚  âœ… Push model: SNS chá»§ Ä‘á»™ng push Ä‘áº¿n subscribers       â”‚  â”‚
â”‚   â”‚  âœ… Many protocols: SQS, Lambda, HTTP, Email, SMS...    â”‚  â”‚
â”‚   â”‚  âŒ No persistence: Message khÃ´ng lÆ°u                   â”‚  â”‚
â”‚   â”‚  âŒ No replay: ÄÃ£ gá»­i rá»“i thÃ¬ xong                      â”‚  â”‚
â”‚   â”‚  âŒ No guaranteed delivery: "Fire and forget"           â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**[ğŸ“– Chi tiáº¿t: SNS Documentation](./sns.md)**

---

### 1.3 STREAMING (Luá»“ng dá»¯ liá»‡u) - AWS Kinesis / Kafka

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       STREAMING                                 â”‚
â”‚                 ğŸ¥ AWS: Kinesis, Kafka (MSK)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   ğŸ“¹ VÃ­ dá»¥ thá»±c táº¿: YOUTUBE VIDEO / CAMERA AN NINH              â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   Camera quay liÃªn tá»¥c (Producers)                      â”‚  â”‚
â”‚   â”‚        â†“                                                â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚   â”‚   â”‚  STREAM (lÆ°u video 1-365 ngÃ y)                    â”‚â”‚  â”‚
â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”     â”‚â”‚  â”‚
â”‚   â”‚   â”‚  â”‚ 9am â”‚10am â”‚11am â”‚12pm â”‚ 1pm â”‚ 2pm â”‚ 3pm â”‚     â”‚â”‚  â”‚
â”‚   â”‚   â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜     â”‚â”‚  â”‚
â”‚   â”‚   â”‚         â†‘                           â†‘             â”‚â”‚  â”‚
â”‚   â”‚   â”‚    Consumer A              Consumer B             â”‚â”‚  â”‚
â”‚   â”‚   â”‚   (xem tá»« 10am)          (xem live 3pm)           â”‚â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   â†’ Data Ä‘Æ°á»£c LÆ¯U Láº I (nhÆ° video YouTube)              â”‚  â”‚
â”‚   â”‚   â†’ REPLAY: tua láº¡i xem tá»« báº¥t ká»³ thá»i Ä‘iá»ƒm nÃ o       â”‚  â”‚
â”‚   â”‚   â†’ Nhiá»u consumers Ä‘á»c CÃ™NG 1 stream                  â”‚  â”‚
â”‚   â”‚   â†’ Data váº«n cÃ²n sau khi Ä‘á»c                          â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   Äáº¶C ÄIá»‚M:                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  âœ… Persistence: Data lÆ°u 1-365 ngÃ y (Kinesis)          â”‚  â”‚
â”‚   â”‚  âœ… Replay: Äá»c láº¡i tá»« báº¥t ká»³ vá»‹ trÃ­ nÃ o               â”‚  â”‚
â”‚   â”‚  âœ… Multiple consumers: Nhiá»u apps Ä‘á»c cÃ¹ng data        â”‚  â”‚
â”‚   â”‚  âœ… Consumer Groups: Chia viá»‡c trong nhÃ³m (Kafka)       â”‚  â”‚
â”‚   â”‚  âœ… Ordering: Theo partition/shard                      â”‚  â”‚
â”‚   â”‚  âš ï¸ Provisioned: Pháº£i provision shards (capacity)      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**[ğŸ“– Chi tiáº¿t: Kinesis Documentation](./kinesis.md)**

---

### 1.4 EVENT BUS (Xe buÃ½t sá»± kiá»‡n) - AWS EventBridge

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       EVENT BUS                                 â”‚
â”‚                   ğŸšŒ AWS: EventBridge                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   ğŸš VÃ­ dá»¥ thá»±c táº¿: TRUNG TÃ‚M ÄIá»€U PHá»I / BÆ¯U ÄIá»†N              â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚   Events arrive (tá»« nhiá»u nguá»“n)                        â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚   â”‚   â”‚ Order    â”‚ â”‚ S3 Event â”‚ â”‚ Partner  â”‚               â”‚  â”‚
â”‚   â”‚   â”‚ Service  â”‚ â”‚          â”‚ â”‚ (Stripe) â”‚               â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚   â”‚        â”‚            â”‚            â”‚                      â”‚  â”‚
â”‚   â”‚        â†“            â†“            â†“                      â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚   â”‚   â”‚              ğŸšŒ EVENT BUS                       â”‚  â”‚  â”‚
â”‚   â”‚   â”‚                                                 â”‚  â”‚  â”‚
â”‚   â”‚   â”‚  Rules:                                         â”‚  â”‚  â”‚
â”‚   â”‚   â”‚  IF source = "order" AND amount > $100          â”‚  â”‚  â”‚
â”‚   â”‚   â”‚     â†’ Route to Lambda (send notification)       â”‚  â”‚  â”‚
â”‚   â”‚   â”‚  IF source = "order" AND type = "refund"        â”‚  â”‚  â”‚
â”‚   â”‚   â”‚     â†’ Route to SQS (process refund)             â”‚  â”‚  â”‚
â”‚   â”‚   â”‚  IF source = "s3"                               â”‚  â”‚  â”‚
â”‚   â”‚   â”‚     â†’ Route to Step Functions                   â”‚  â”‚  â”‚
â”‚   â”‚   â”‚                                                 â”‚  â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚   â”‚          â†“                  â†“              â†“          â”‚  â”‚
â”‚   â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚   â”‚      â”‚Lambda â”‚         â”‚  SQS   â”‚    â”‚ Step    â”‚     â”‚  â”‚
â”‚   â”‚      â”‚       â”‚         â”‚        â”‚    â”‚Functionsâ”‚     â”‚  â”‚
â”‚   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   Äáº¶C ÄIá»‚M:                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  âœ… Smart routing: 100+ rules vá»›i advanced filtering    â”‚  â”‚
â”‚   â”‚  âœ… Event transformation: Chuyá»ƒn Ä‘á»•i format trÆ°á»›c khi gá»­iâ”‚  â”‚
â”‚   â”‚  âœ… Schema Registry: Quáº£n lÃ½ event schemas              â”‚  â”‚
â”‚   â”‚  âœ… Archive & Replay: LÆ°u vÃ  replay events             â”‚  â”‚
â”‚   â”‚  âœ… Third-party: TÃ­ch há»£p SaaS (Stripe, Zendesk...)    â”‚  â”‚
â”‚   â”‚  âœ… Serverless: Fully managed, no provisioning         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**[ğŸ“– Chi tiáº¿t: EventBridge Documentation](./eventbridge.md)**

---

## 2. So sÃ¡nh chi tiáº¿t

### 2.1 Báº£ng so sÃ¡nh tá»•ng quan

| Feature | **Queue (SQS)** | **Pub/Sub (SNS)** | **Streaming (Kinesis)** | **Event Bus (EventBridge)** |
|---------|-----------------|-------------------|------------------------|---------------------------|
| **VÃ­ dá»¥ Ä‘á»i thá»±c** | Quáº§y gá»i mÃ³n | ÄÃ i phÃ¡t thanh | YouTube video | Trung tÃ¢m Ä‘iá»u phá»‘i |
| **Non-AWS Alternatives** | RabbitMQ, ActiveMQ | Google Pub/Sub, Redis Pub/Sub | **Kafka**, Pulsar | âŒ (khÃ´ng cÃ³ exact match) |
| **Model** | Point-to-Point | Fan-out | Log/Stream | Event routing |
| **Delivery** | Pull (poll) | Push | Pull | Push |
| **1 msg â†’ ? consumers** | 1 | ALL | ALL (consumer groups) | Depends on rules |
| **Persistence** | âœ… 14 days | âŒ No | âœ… 1-365 days | âœ… Archive |
| **Replay** | âŒ | âŒ | âœ… | âœ… (via Archive) |
| **Ordering** | FIFO only | FIFO Topics | Per shard | âŒ |
| **Filtering** | âŒ | Basic | âŒ | Advanced (100+ rules) |
| **Transform** | âŒ | âŒ | âŒ | âœ… |
| **Scaling** | Auto | Auto | Provision shards | Auto |
| **Max message size** | 256 KB | 256 KB | 1 MB | 256 KB |

### 2.1.1 Alternatives ngoÃ i AWS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AWS vs Non-AWS Alternatives                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   QUEUE:                                                                     â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€                                                                    â”‚
â”‚   AWS: SQS                                                                   â”‚
â”‚   Alternatives: RabbitMQ, ActiveMQ, Redis Queue, Amazon MQ                  â”‚
â”‚                                                                              â”‚
â”‚   PUB/SUB:                                                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                  â”‚
â”‚   AWS: SNS                                                                   â”‚
â”‚   Alternatives: Google Pub/Sub, Redis Pub/Sub, RabbitMQ (exchange mode)     â”‚
â”‚                                                                              â”‚
â”‚   STREAMING:                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                â”‚
â”‚   AWS: Kinesis, MSK                                                          â”‚
â”‚   Alternatives: Apache Kafka, Apache Pulsar, Redpanda                       â”‚
â”‚                                                                              â”‚
â”‚   EVENT BUS:                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                â”‚
â”‚   AWS: EventBridge                                                           â”‚
â”‚   Alternatives: KhÃ´ng cÃ³ exact match (gáº§n giá»‘ng: Kafka + Schema Registry)   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Pattern | AWS | Alternatives ngoÃ i AWS | Loáº¡i |
|---------|-----|----------------------|------|
| **Queue** | SQS | RabbitMQ, ActiveMQ, Redis Queue | Point-to-Point |
| **Pub/Sub** | SNS | Google Pub/Sub, Redis Pub/Sub | Fan-out |
| **Streaming** | Kinesis, MSK | **Apache Kafka**, Apache Pulsar | Log-based |
| **Event Bus** | EventBridge | âŒ (khÃ´ng cÃ³ exact match) | Rule-based routing |

> [!TIP]
> **Kafka** lÃ  **STREAMING** (giá»‘ng Kinesis), KHÃ”NG pháº£i Queue hay Pub/Sub Ä‘Æ¡n thuáº§n.
> Kafka cÃ³ **Consumer Groups** nÃªn cÃ³ thá»ƒ lÃ m cáº£ 2:
> - Fan-out GIá»®A cÃ¡c groups (nhÆ° Pub/Sub)
> - Load balance TRONG group (nhÆ° Queue)

### 2.2 So sÃ¡nh theo cÃ¢u há»i

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  COMPARISON BY QUESTIONS                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Q: Message sau khi Ä‘á»c cÃ³ cÃ²n khÃ´ng?                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  SQS:        Bá»Š XÃ“A sau khi consumer gá»i Delete âŒ       â”‚  â”‚
â”‚   â”‚              (retention 14 ngÃ y = náº¿u CHÆ¯A ai xá»­ lÃ½)     â”‚  â”‚
â”‚   â”‚  SNS:        KHÃ”NG LÆ¯U tá»« Ä‘áº§u âŒ                         â”‚  â”‚
â”‚   â”‚  Kinesis:    VáºªN CÃ’N (1-365 ngÃ y) âœ… â†’ cÃ³ thá»ƒ replay    â”‚  â”‚
â”‚   â”‚  EventBridge: KHÃ”NG LÆ¯U (trá»« khi Archive) âš ï¸            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   Q: Nhiá»u consumers cÃ³ nháº­n Ä‘Æ°á»£c CÃ™NG message khÃ´ng?           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  SQS:        âŒ NO - Má»—i message â†’ 1 consumer            â”‚  â”‚
â”‚   â”‚  SNS:        âœ… YES - Táº¥t cáº£ subscribers nháº­n            â”‚  â”‚
â”‚   â”‚  Kinesis:    âœ… YES - Nhiá»u consumer groups              â”‚  â”‚
â”‚   â”‚  EventBridge: âš ï¸ DEPENDS - Theo rules filtering         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   Q: CÃ³ thá»ƒ replay (Ä‘á»c láº¡i) messages khÃ´ng?                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  SQS:        âŒ NO                                       â”‚  â”‚
â”‚   â”‚  SNS:        âŒ NO                                       â”‚  â”‚
â”‚   â”‚  Kinesis:    âœ… YES - Tua láº¡i tá»« báº¥t ká»³ thá»i Ä‘iá»ƒm       â”‚  â”‚
â”‚   â”‚  EventBridge: âœ… YES - Náº¿u Ä‘Ã£ enable Archive             â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   Q: Cáº§n provision capacity khÃ´ng?                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  SQS:        âŒ NO - Unlimited, serverless               â”‚  â”‚
â”‚   â”‚  SNS:        âŒ NO - Unlimited, serverless               â”‚  â”‚
â”‚   â”‚  Kinesis:    âœ… YES - Provision shards (On-demand mode   â”‚  â”‚
â”‚   â”‚              cÃ³ nhÆ°ng váº«n cáº§n hiá»ƒu capacity)             â”‚  â”‚
â”‚   â”‚  EventBridge: âŒ NO - Serverless                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 Consumer Model - Chi tiáº¿t

### 2.2.1 Streaming vs Event Bus - Dá»… nháº§m láº«n!

> [!TIP]
> Hai pattern nÃ y nhÃ¬n qua thÃ¬ giá»‘ng, nhÆ°ng **focus khÃ¡c nhau hoÃ n toÃ n**!

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Streaming vs Event Bus - KhÃ¡c biá»‡t chÃ­nh                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   STREAMING (Kinesis/Kafka)              EVENT BUS (EventBridge)             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚                                                                              â”‚
â”‚   ğŸ¯ Focus: HIGH THROUGHPUT              ğŸ¯ Focus: SMART ROUTING             â”‚
â”‚   (millions events/sec)                  (filter & route events)             â”‚
â”‚                                                                              â”‚
â”‚   ğŸ“¦ Data STORAGE:                       ğŸ“¦ Data STORAGE:                    â”‚
â”‚   âœ… LÆ°u 1-365 ngÃ y                      âŒ KhÃ´ng lÆ°u (trá»« Archive)          â”‚
â”‚   âœ… Replay tá»« báº¥t ká»³ Ä‘Ã¢u                âš ï¸ Replay qua Archive               â”‚
â”‚                                                                              â”‚
â”‚   ğŸ”€ ROUTING:                            ğŸ”€ ROUTING:                         â”‚
â”‚   âŒ KhÃ´ng cÃ³ (táº¥t cáº£ vÃ o stream)        âœ… 100+ rules phá»©c táº¡p              â”‚
â”‚                                          âœ… Filter theo content              â”‚
â”‚                                          âœ… Transform trÆ°á»›c khi gá»­i          â”‚
â”‚                                                                              â”‚
â”‚   ğŸ“Š ORDERING:                           ğŸ“Š ORDERING:                        â”‚
â”‚   âœ… Theo partition/shard                âŒ KhÃ´ng Ä‘áº£m báº£o                    â”‚
â”‚                                                                              â”‚
â”‚   âš™ï¸ CAPACITY:                           âš™ï¸ CAPACITY:                        â”‚
â”‚   Provision shards (hoáº·c on-demand)      Serverless, auto-scale              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| CÃ¢u há»i | Streaming | Event Bus |
|---------|-----------|-----------|
| Xá»­ lÃ½ **millions events/sec**? | âœ… | âŒ |
| Cáº§n **replay** data cÅ©? | âœ… | âš ï¸ (Archive) |
| Cáº§n **ordering**? | âœ… | âŒ |
| Cáº§n **filter complex** (if amount > 100)? | âŒ | âœ… |
| Cáº§n **transform** event? | âŒ | âœ… |
| TÃ­ch há»£p **SaaS** (Stripe, Zendesk)? | âŒ | âœ… |
| **Cron jobs**/scheduled events? | âŒ | âœ… |

> **VÃ­ von:**
> - **Streaming** = "á»ng nÆ°á»›c lá»›n" - cháº£y liÃªn tá»¥c, lÆ°u láº¡i, replay Ä‘Æ°á»£c
> - **Event Bus** = "BÆ°u Ä‘iá»‡n thÃ´ng minh" - phÃ¢n loáº¡i thÆ°, gá»­i Ä‘Ãºng nÆ¡i

---

### 2.3 Consumer Model - Chi tiáº¿t

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONSUMER MODELS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   SQS (Point-to-Point):                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Messages: [A] [B] [C] [D]                              â”‚  â”‚
â”‚   â”‚                â†“                                        â”‚  â”‚
â”‚   â”‚            Consumer 1 gets [A]                          â”‚  â”‚
â”‚   â”‚            Consumer 2 gets [B]                          â”‚  â”‚
â”‚   â”‚            Consumer 3 gets [C]                          â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚  â†’ Chia nhau xá»­ lÃ½ (load balancing)                     â”‚  â”‚
â”‚   â”‚  â†’ Má»—i message chá»‰ 1 consumer nháº­n                      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   SNS (Fan-out):                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Message: [A]                                           â”‚  â”‚
â”‚   â”‚              â”œâ†’ Subscriber 1 gets [A]                   â”‚  â”‚
â”‚   â”‚              â”œâ†’ Subscriber 2 gets [A]                   â”‚  â”‚
â”‚   â”‚              â””â†’ Subscriber 3 gets [A]                   â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚  â†’ Táº¤T Cáº¢ subscribers nháº­n CÃ™NG message                 â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   Kinesis/Kafka (Consumer Groups):                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Stream: [A] [B] [C] [D] [E] [F]                        â”‚  â”‚
â”‚   â”‚              â”‚                                          â”‚  â”‚
â”‚   â”‚         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                     â”‚  â”‚
â”‚   â”‚         â†“         â†“                                     â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚  â”‚
â”‚   â”‚   â”‚Group A   â”‚ â”‚Group B   â”‚   â† 2 consumer groups       â”‚  â”‚
â”‚   â”‚   â”‚(Order)   â”‚ â”‚(Analytics)                             â”‚  â”‚
â”‚   â”‚   â”‚C1â†’[A][B] â”‚ â”‚C1â†’ALL    â”‚                             â”‚  â”‚
â”‚   â”‚   â”‚C2â†’[C][D] â”‚ â”‚          â”‚                             â”‚  â”‚
â”‚   â”‚   â”‚C3â†’[E][F] â”‚ â”‚          â”‚                             â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚  â†’ TRONG 1 group: chia nhau (nhÆ° SQS)                   â”‚  â”‚
â”‚   â”‚  â†’ GIá»®A cÃ¡c groups: táº¥t cáº£ nháº­n ALL (nhÆ° SNS)           â”‚  â”‚
â”‚   â”‚  â†’ BEST OF BOTH WORLDS!                                 â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   EventBridge (Rule-based):                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Event: {"type": "order", "amount": 150}                â”‚  â”‚
â”‚   â”‚              â”‚                                          â”‚  â”‚
â”‚   â”‚         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                     â”‚  â”‚
â”‚   â”‚         â†“         â†“                                     â”‚  â”‚
â”‚   â”‚   Rule 1:     Rule 2:                                   â”‚  â”‚
â”‚   â”‚   amount>100  type=order                                â”‚  â”‚
â”‚   â”‚      â†“            â†“                                     â”‚  â”‚
â”‚   â”‚   Lambda      SQS Queue                                 â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚  â†’ Events route theo rules matching                     â”‚  â”‚
â”‚   â”‚  â†’ 1 event cÃ³ thá»ƒ match nhiá»u rules                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Use Cases

### 3.1 Khi nÃ o dÃ¹ng QUEUE (SQS)?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SQS USE CASES                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   âœ… DÃ™NG KHI:                                                  â”‚
â”‚   â€¢ Cáº§n task queue (má»—i task 1 worker xá»­ lÃ½)                    â”‚
â”‚   â€¢ Decoupling microservices                                    â”‚
â”‚   â€¢ Buffering requests lÃºc peak                                 â”‚
â”‚   â€¢ Need message persistence (up to 14 days)                    â”‚
â”‚   â€¢ Simple, no complex routing needed                           â”‚
â”‚                                                                 â”‚
â”‚   âŒ KHÃ”NG DÃ™NG KHI:                                            â”‚
â”‚   â€¢ Cáº§n nhiá»u consumers nháº­n cÃ¹ng 1 message                     â”‚
â”‚   â€¢ Cáº§n replay messages                                         â”‚
â”‚   â€¢ Real-time streaming analytics                               â”‚
â”‚                                                                 â”‚
â”‚   ğŸ“ EXAMPLES:                                                  â”‚
â”‚   â€¢ Order processing queue                                      â”‚
â”‚   â€¢ Image resize queue                                          â”‚
â”‚   â€¢ Email sending queue                                         â”‚
â”‚   â€¢ Background job queue                                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Khi nÃ o dÃ¹ng PUB/SUB (SNS)?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SNS USE CASES                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   âœ… DÃ™NG KHI:                                                  â”‚
â”‚   â€¢ Cáº§n fan-out (1 event â†’ nhiá»u services)                      â”‚
â”‚   â€¢ Notifications (email, SMS, push)                            â”‚
â”‚   â€¢ Alert broadcasting                                          â”‚
â”‚   â€¢ Káº¿t há»£p vá»›i SQS Ä‘á»ƒ fan-out + persistence                    â”‚
â”‚                                                                 â”‚
â”‚   âŒ KHÃ”NG DÃ™NG KHI:                                            â”‚
â”‚   â€¢ Cáº§n message persistence                                     â”‚
â”‚   â€¢ Cáº§n replay messages                                         â”‚
â”‚   â€¢ Complex event routing/filtering                             â”‚
â”‚                                                                 â”‚
â”‚   ğŸ“ EXAMPLES:                                                  â”‚
â”‚   â€¢ Order created â†’ notify Analytics, Billing, Inventory        â”‚
â”‚   â€¢ CloudWatch Alarm â†’ send to Email, SMS, PagerDuty            â”‚
â”‚   â€¢ S3 upload â†’ trigger multiple Lambda functions               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Khi nÃ o dÃ¹ng STREAMING (Kinesis)?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   KINESIS USE CASES                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   âœ… DÃ™NG KHI:                                                  â”‚
â”‚   â€¢ Real-time streaming data                                    â”‚
â”‚   â€¢ Need message replay                                         â”‚
â”‚   â€¢ Multiple consumers reading same data independently          â”‚
â”‚   â€¢ Analytics, metrics, logs processing                         â”‚
â”‚   â€¢ Event sourcing pattern                                      â”‚
â”‚   â€¢ Ordering required (per shard)                               â”‚
â”‚                                                                 â”‚
â”‚   âŒ KHÃ”NG DÃ™NG KHI:                                            â”‚
â”‚   â€¢ Simple task queue (use SQS)                                 â”‚
â”‚   â€¢ Need complex routing (use EventBridge)                      â”‚
â”‚   â€¢ Low throughput, simple notifications (use SNS)              â”‚
â”‚                                                                 â”‚
â”‚   ğŸ“ EXAMPLES:                                                  â”‚
â”‚   â€¢ IoT sensor data streaming                                   â”‚
â”‚   â€¢ Application logs aggregation                                â”‚
â”‚   â€¢ Clickstream analytics                                       â”‚
â”‚   â€¢ Real-time leaderboard                                       â”‚
â”‚   â€¢ Stock price tracking                                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 Khi nÃ o dÃ¹ng EVENT BUS (EventBridge)?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 EVENTBRIDGE USE CASES                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   âœ… DÃ™NG KHI:                                                  â”‚
â”‚   â€¢ Complex event routing vá»›i nhiá»u conditions                  â”‚
â”‚   â€¢ Event-driven architecture                                   â”‚
â”‚   â€¢ Need event transformation                                   â”‚
â”‚   â€¢ Cross-account/cross-region events                           â”‚
â”‚   â€¢ SaaS integration (Stripe, Zendesk, etc.)                    â”‚
â”‚   â€¢ Scheduled tasks (cron jobs)                                 â”‚
â”‚   â€¢ Schema management needed                                    â”‚
â”‚                                                                 â”‚
â”‚   âŒ KHÃ”NG DÃ™NG KHI:                                            â”‚
â”‚   â€¢ High throughput streaming (use Kinesis)                     â”‚
â”‚   â€¢ Simple queue processing (use SQS)                           â”‚
â”‚   â€¢ Need guaranteed ordering (use Kinesis/SQS FIFO)             â”‚
â”‚                                                                 â”‚
â”‚   ğŸ“ EXAMPLES:                                                  â”‚
â”‚   â€¢ AWS service events â†’ trigger Lambda                         â”‚
â”‚   â€¢ Stripe payment webhook â†’ process order                      â”‚
â”‚   â€¢ Schedule daily reports                                      â”‚
â”‚   â€¢ Cross-account event sharing                                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Decision Tree

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DECISION TREE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   START: Báº¡n cáº§n gÃ¬?                                            â”‚
â”‚        â”‚                                                        â”‚
â”‚        â†“                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚   â”‚ Cáº§n replay messagesâ”‚                                        â”‚
â”‚   â”‚ hoáº·c multiple      â”‚                                        â”‚
â”‚   â”‚ consumer groups?   â”‚                                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚         YES â”‚ NO                                                â”‚
â”‚         â†“   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚            â”‚
â”‚   â”‚   KINESIS     â”‚                                â”‚            â”‚
â”‚   â”‚ (or Kafka/MSK)â”‚                                â†“            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                         â”‚ Cáº§n fan-out       â”‚   â”‚
â”‚                                         â”‚ (1 msg â†’ nhiá»u    â”‚   â”‚
â”‚                                         â”‚ consumers)?       â”‚   â”‚
â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                               YES â”‚ NO          â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚
â”‚                               â†“                      â†“          â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                    â”‚ Cáº§n complex       â”‚   â”‚     SQS        â”‚   â”‚
â”‚                    â”‚ routing/filtering?â”‚   â”‚ (simple queue) â”‚   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          YES â”‚ NO                                â”‚
â”‚                          â†“   â”‚                                   â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                â†“             â†“                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚   â”‚   EVENTBRIDGE   â”‚  â”‚ SNS + SQS   â”‚                          â”‚
â”‚   â”‚ (advanced rules)â”‚  â”‚ (fan-out)   â”‚                          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Quick Reference Table

| Scenario | Best Choice |
|----------|-------------|
| Simple task queue | **SQS** |
| Notify multiple services | **SNS** â†’ SQS |
| Real-time analytics | **Kinesis** |
| Complex event routing | **EventBridge** |
| Message replay needed | **Kinesis** |
| Cron jobs/scheduling | **EventBridge** |
| SaaS webhooks | **EventBridge** |
| IoT data ingestion | **Kinesis** |
| Decouple microservices | **SQS** or **EventBridge** |

---

## 5. Káº¿t há»£p cÃ¡c patterns

### 5.1 SNS + SQS (Fan-out + Persistence)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               SNS + SQS COMBINATION                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Problem: SNS fan-out nhÆ°ng khÃ´ng cÃ³ persistence               â”‚
â”‚   Solution: SNS â†’ Multiple SQS queues                           â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚   â”‚ Order Serviceâ”‚                                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚          â”‚ publish                                              â”‚
â”‚          â†“                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚   â”‚  SNS Topic   â”‚                                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚          â”‚ fan-out                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚   â†“      â†“      â†“          â†“                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚ â”‚SQS â”‚ â”‚SQS â”‚ â”‚SQS â”‚   â”‚Lambda  â”‚                              â”‚
â”‚ â”‚ A  â”‚ â”‚ B  â”‚ â”‚ C  â”‚   â”‚        â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚   â†“      â†“      â†“                                               â”‚
â”‚ Order  Billing Analytics                                        â”‚
â”‚                                                                 â”‚
â”‚   âœ… Fan-out (from SNS)                                         â”‚
â”‚   âœ… Persistence (from SQS)                                     â”‚
â”‚   âœ… Independent processing                                     â”‚
â”‚   âœ… DLQ support                                                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 EventBridge + SQS (Smart Routing + Persistence)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            EVENTBRIDGE + SQS COMBINATION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Events from various sources                                   â”‚
â”‚        â†“                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚   â”‚           EventBridge                â”‚                     â”‚
â”‚   â”‚                                      â”‚                     â”‚
â”‚   â”‚  Rule 1: if amount > 100 â†’ SQS-VIP  â”‚                     â”‚
â”‚   â”‚  Rule 2: if amount < 100 â†’ SQS-Std  â”‚                     â”‚
â”‚   â”‚  Rule 3: all orders â†’ Analytics SQS â”‚                     â”‚
â”‚   â”‚                                      â”‚                     â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚
â”‚        â†“             â†“              â†“                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚SQS VIP â”‚   â”‚SQS Std â”‚    â”‚SQS Analytics                    â”‚
â”‚   â”‚Orders  â”‚   â”‚Orders  â”‚    â”‚            â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                 â”‚
â”‚   âœ… Smart routing based on content                             â”‚
â”‚   âœ… Persistence in SQS                                         â”‚
â”‚   âœ… Different processing per queue                             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 Kinesis + Lambda (Real-time Processing)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             KINESIS + LAMBDA COMBINATION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   IoT Sensors / Clickstream / Logs                              â”‚
â”‚        â†“                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚   â”‚       Kinesis Data Streams           â”‚                     â”‚
â”‚   â”‚  [data] [data] [data] [data] [data]  â”‚                     â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚        â”‚                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚   â†“         â†“            â†“               â†“                      â”‚
â”‚ Lambda   Lambda    Kinesis Data    Kinesis Data                â”‚
â”‚ (real-   (metrics) Analytics       Firehose                    â”‚
â”‚  time)              (SQL query)    (â†’ S3)                      â”‚
â”‚                                                                 â”‚
â”‚   âœ… Real-time processing with Lambda                           â”‚
â”‚   âœ… Analytics with Kinesis Data Analytics                      â”‚
â”‚   âœ… Archive to S3 with Firehose                                â”‚
â”‚   âœ… All consumers read same stream                             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Spring Boot Integration

> **âš ï¸ LÆ°u Ã½ quan trá»ng:** Táº¥t cáº£ cÃ¡c patterns Ä‘á»u cÃ³ thá»ƒ dÃ¹ng vá»›i Spring Boot!

| Pattern | Library | Annotation |
|---------|---------|------------|
| **SQS** | spring-cloud-aws | `@SqsListener` |
| **SNS** | HTTP endpoint hoáº·c SNSâ†’SQS | `@PostMapping` hoáº·c `@SqsListener` |
| **Kinesis** | AWS SDK hoáº·c KCL | Manual processing |
| **Kafka** | spring-kafka | `@KafkaListener` |

Chi tiáº¿t xem:
- [SQS Spring Boot Integration](./sqs.md#7-spring-boot-integration)
- [SNS Spring Boot Integration](./sns.md#5-spring-boot-integration)

---

## 7. Exam Tips

### Q1: SNS vs SQS - KhÃ¡c biá»‡t chÃ­nh?
**A:** SNS = Push, fan-out, no persistence. SQS = Pull, point-to-point, persistence.

### Q2: Khi nÃ o dÃ¹ng Kinesis thay vÃ¬ SQS?
**A:** Cáº§n replay, multiple consumers Ä‘á»c cÃ¹ng data, real-time analytics.

### Q3: EventBridge vs SNS?
**A:** EventBridge = advanced routing/filtering, schema registry. SNS = simple fan-out.

### Q4: SNS + SQS pattern dÃ¹ng khi nÃ o?
**A:** Cáº§n fan-out (SNS) + persistence/retry (SQS).

---

## TÃ i liá»‡u tham kháº£o

- [SQS Documentation](./sqs.md)
- [SNS Documentation](./sns.md)
- [Kinesis Documentation](./kinesis.md)
- [EventBridge Documentation](./eventbridge.md)
- [Amazon MQ Documentation](./amazon-mq.md)
