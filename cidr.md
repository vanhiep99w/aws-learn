# CIDR (Classless Inter-Domain Routing)

## Má»¥c lá»¥c

- [CIDR lÃ  gÃ¬?](#cidr-lÃ -gÃ¬)
- [CÃ¡ch Ä‘á»c CIDR](#cÃ¡ch-Ä‘á»c-cidr)
- [Báº£ng tham chiáº¿u nhanh](#báº£ng-tham-chiáº¿u-nhanh)
- [Private IP Ranges](#private-ip-ranges)
- [CIDR trong AWS VPC](#cidr-trong-aws-vpc)
- [Chia Subnet](#chia-subnet)
- [VÃ­ dá»¥ thá»±c táº¿](#vÃ­-dá»¥-thá»±c-táº¿)
- [Tips & Tricks](#tips--tricks)

---

## CIDR lÃ  gÃ¬?

**CIDR** (Classless Inter-Domain Routing) lÃ  cÃ¡ch viáº¿t gá»n Ä‘á»ƒ mÃ´ táº£ **dáº£i IP addresses**.

```
CIDR Notation:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚    10.0.0.0/16                                                   â”‚
â”‚    â”€â”€â”€â”€â”¬â”€â”€â”€â”€  â”€â”¬â”€                                               â”‚
â”‚        â”‚       â”‚                                                 â”‚
â”‚   Base IP    Subnet Mask (sá»‘ bit cá»‘ Ä‘á»‹nh)                       â”‚
â”‚                                                                  â”‚
â”‚   /16 = 16 bits Ä‘áº§u cá»‘ Ä‘á»‹nh, 16 bits sau thay Ä‘á»•i Ä‘Æ°á»£c          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Giáº£i thÃ­ch báº±ng hÃ¬nh áº£nh

```
IP Address = 32 bits (4 octets Ã— 8 bits)

10.0.0.0/16 nghÄ©a lÃ :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  10      .    0       .    0       .    0                      â”‚
â”‚  â–¼            â–¼            â–¼            â–¼                      â”‚
â”‚ 00001010 . 00000000 . 00000000 . 00000000                      â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
â”‚   16 bits Cá» Äá»ŠNH      16 bits THAY Äá»”I ÄÆ¯á»¢C                   â”‚
â”‚   (Network portion)    (Host portion)                          â”‚
â”‚                                                                 â”‚
â”‚ â†’ CÃ¡c IP tá»« 10.0.0.0 Ä‘áº¿n 10.0.255.255 Ä‘á»u thuá»™c dáº£i nÃ y        â”‚
â”‚ â†’ Tá»•ng: 2^16 = 65,536 IPs                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## CÃ¡ch Ä‘á»c CIDR

### CÃ´ng thá»©c tÃ­nh sá»‘ IP

```
Sá»‘ IP = 2^(32 - subnet mask)

VÃ­ dá»¥:
  /16 â†’ 2^(32-16) = 2^16 = 65,536 IPs
  /24 â†’ 2^(32-24) = 2^8  = 256 IPs
  /28 â†’ 2^(32-28) = 2^4  = 16 IPs
  /32 â†’ 2^(32-32) = 2^0  = 1 IP (chÃ­nh xÃ¡c 1 Ä‘á»‹a chá»‰)
```

### Quy táº¯c nhá»› nhanh

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SUBNET MASK     Sá» IPs       GHI NHá»š                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚     /8       16,777,216    (Class A - ráº¥t lá»›n)                  â”‚
â”‚     /16      65,536        (Class B - VPC máº·c Ä‘á»‹nh)             â”‚
â”‚     /24      256           (Class C - subnet phá»• biáº¿n)          â”‚
â”‚     /28      16            (Subnet nhá» nháº¥t AWS cho phÃ©p)       â”‚
â”‚     /32      1             (ChÃ­nh xÃ¡c 1 IP)                     â”‚
â”‚                                                                  â”‚
â”‚  Má»—i khi tÄƒng 1:  /24 â†’ /25 â†’ /26 â†’ /27                        â”‚
â”‚  Sá»‘ IP giáº£m CÃ’N Ná»¬A: 256 â†’ 128 â†’ 64 â†’ 32                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Báº£ng tham chiáº¿u nhanh

| CIDR | Subnet Mask | Sá»‘ IPs | IPs kháº£ dá»¥ng (AWS) | Use Case |
|------|-------------|--------|-------------------|----------|
| /8 | 255.0.0.0 | 16,777,216 | - | Class A network |
| /16 | 255.255.0.0 | 65,536 | 65,531 | VPC lá»›n |
| /20 | 255.255.240.0 | 4,096 | 4,091 | VPC vá»«a |
| /24 | 255.255.255.0 | 256 | 251 | Subnet phá»• biáº¿n |
| /25 | 255.255.255.128 | 128 | 123 | Subnet vá»«a |
| /26 | 255.255.255.192 | 64 | 59 | Subnet nhá» |
| /27 | 255.255.255.224 | 32 | 27 | Subnet nhá» |
| /28 | 255.255.255.240 | 16 | 11 | Subnet nhá» nháº¥t (AWS) |

> âš ï¸ **AWS Reserved IPs:** Má»—i subnet, AWS giá»¯ láº¡i **5 IPs** Ä‘áº§u vÃ  cuá»‘i (Network, Router, DNS, Reserved, Broadcast)

---

## Private IP Ranges

Theo RFC 1918, cÃ³ 3 dáº£i IP private (khÃ´ng dÃ¹ng trÃªn Internet):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRIVATE IP RANGES                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  10.0.0.0/8        10.0.0.0 â†’ 10.255.255.255                    â”‚
â”‚                    16,777,216 IPs (Class A)                      â”‚
â”‚                    â†’ Phá»• biáº¿n cho VPC                            â”‚
â”‚                                                                  â”‚
â”‚  172.16.0.0/12     172.16.0.0 â†’ 172.31.255.255                  â”‚
â”‚                    1,048,576 IPs (Class B)                       â”‚
â”‚                    â†’ AWS Default VPC dÃ¹ng 172.31.0.0/16         â”‚
â”‚                                                                  â”‚
â”‚  192.168.0.0/16    192.168.0.0 â†’ 192.168.255.255                â”‚
â”‚                    65,536 IPs (Class C)                          â”‚
â”‚                    â†’ Phá»• biáº¿n cho home network                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Range | Class | Sá»‘ IPs | ThÆ°á»ng dÃ¹ng cho |
|-------|-------|--------|-----------------|
| **10.0.0.0/8** | A | 16M | Enterprise, AWS VPC |
| **172.16.0.0/12** | B | 1M | AWS Default VPC |
| **192.168.0.0/16** | C | 65K | Home/Small office |

---

## CIDR trong AWS VPC

### VPC CIDR Block

```
AWS VPC cho phÃ©p:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚   VPC CIDR:    /16 Ä‘áº¿n /28                                      â”‚
â”‚                                                                  â”‚
â”‚   /16 = 65,536 IPs    (lá»›n nháº¥t)                                â”‚
â”‚   /28 = 16 IPs        (nhá» nháº¥t)                                â”‚
â”‚                                                                  â”‚
â”‚   Khuyáº¿n nghá»‹: /16 cho production (nhiá»u subnet, room to grow)  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AWS Reserved IPs trong má»—i Subnet

Khi báº¡n táº¡o subnet, **AWS tá»± Ä‘á»™ng giá»¯ láº¡i 5 IPs** Ä‘áº§u tiÃªn vÃ  cuá»‘i cÃ¹ng - báº¡n **khÃ´ng thá»ƒ dÃ¹ng** nhá»¯ng IP nÃ y cho EC2.

#### VÃ­ dá»¥ cá»¥ thá»ƒ: Subnet 10.0.1.0/24

```
Subnet 10.0.1.0/24 = 256 IPs (tá»« 10.0.1.0 Ä‘áº¿n 10.0.1.255)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IP Address   â”‚   AWS dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?        â”‚   Báº¡n dÃ¹ng Ä‘Æ°á»£c?â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   10.0.1.0     â”‚   Network address            â”‚   âŒ Reserved   â”‚
â”‚   10.0.1.1     â”‚   VPC Router (local gateway) â”‚   âŒ Reserved   â”‚
â”‚   10.0.1.2     â”‚   DNS Server                 â”‚   âŒ Reserved   â”‚
â”‚   10.0.1.3     â”‚   Reserved cho tÆ°Æ¡ng lai     â”‚   âŒ Reserved   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚   10.0.1.4     â”‚   â† IP Ä‘áº§u tiÃªn báº¡n dÃ¹ng Ä‘Æ°á»£câ”‚   âœ… Usable     â”‚
â”‚   10.0.1.5     â”‚                              â”‚   âœ… Usable     â”‚
â”‚   ...          â”‚                              â”‚   âœ… Usable     â”‚
â”‚   10.0.1.254   â”‚   â† IP cuá»‘i cÃ¹ng báº¡n dÃ¹ng    â”‚   âœ… Usable     â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚   10.0.1.255   â”‚   Broadcast address          â”‚   âŒ Reserved   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tá»•ng: 256 IPs - 5 Reserved = 251 IPs báº¡n dÃ¹ng Ä‘Æ°á»£c
```

#### Giáº£i thÃ­ch tá»«ng IP Reserved

| IP | TÃªn | Má»¥c Ä‘Ã­ch |
|----|-----|----------|
| **x.x.x.0** | Network Address | Äá»‹nh danh subnet (quy Æ°á»›c máº¡ng, khÃ´ng gÃ¡n cho host) |
| **x.x.x.1** | VPC Router | Router ná»™i bá»™ cá»§a VPC (local route dÃ¹ng IP nÃ y) |
| **x.x.x.2** | DNS Server | DNS cá»§a VPC (VPC Base + 2, Route 53 Resolver) |
| **x.x.x.3** | Reserved | AWS giá»¯ cho tÆ°Æ¡ng lai, chÆ°a dÃ¹ng |
| **x.x.x.255** | Broadcast | Äá»‹a chá»‰ broadcast (quy Æ°á»›c máº¡ng) |

#### VÃ­ dá»¥ vá»›i subnet nhá» /28

```
Báº¡n táº¡o subnet 10.0.1.0/28 (16 IPs):

10.0.1.0   â† Network (AWS reserved)
10.0.1.1   â† Router (AWS reserved)
10.0.1.2   â† DNS (AWS reserved)
10.0.1.3   â† Future (AWS reserved)
10.0.1.4   â† EC2 Ä‘áº§u tiÃªn cá»§a báº¡n âœ…
10.0.1.5   â† EC2 thá»© hai âœ…
...
10.0.1.14  â† EC2 cuá»‘i cÃ¹ng âœ…
10.0.1.15  â† Broadcast (AWS reserved)

â†’ Chá»‰ cÃ³ 11 IPs dÃ¹ng Ä‘Æ°á»£c (16 - 5 = 11)
```

#### Táº¡i sao quan trá»ng?

```
âš ï¸ TRAP: Báº¡n nghÄ© /28 = 16 IPs â†’ Äá»§ cho 16 EC2?
   â†’ SAI! Chá»‰ cÃ³ 11 IPs thá»±c sá»± dÃ¹ng Ä‘Æ°á»£c!

TÃNH TOÃN ÄÃšNG:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Subnet  â”‚  Tá»•ng IPs  â”‚  Usable IPs â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   /28    â”‚     16     â”‚     11      â”‚
â”‚   /27    â”‚     32     â”‚     27      â”‚
â”‚   /26    â”‚     64     â”‚     59      â”‚
â”‚   /25    â”‚    128     â”‚    123      â”‚
â”‚   /24    â”‚    256     â”‚    251      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ðŸ’¡ **Nhá»›:** LuÃ´n **trá»« 5** khi tÃ­nh sá»‘ IP thá»±c sá»± dÃ¹ng Ä‘Æ°á»£c trong AWS subnet!

---

## Chia Subnet

### VÃ­ dá»¥: Chia VPC 10.0.0.0/16 thÃ nh cÃ¡c subnets

```
VPC: 10.0.0.0/16 (65,536 IPs)
â”‚
â”œâ”€â”€ Public Subnet AZ-A:  10.0.0.0/24   (256 IPs) â†’ 10.0.0.0 - 10.0.0.255
â”œâ”€â”€ Public Subnet AZ-B:  10.0.1.0/24   (256 IPs) â†’ 10.0.1.0 - 10.0.1.255
â”œâ”€â”€ Private Subnet AZ-A: 10.0.10.0/24  (256 IPs) â†’ 10.0.10.0 - 10.0.10.255
â”œâ”€â”€ Private Subnet AZ-B: 10.0.11.0/24  (256 IPs) â†’ 10.0.11.0 - 10.0.11.255
â”œâ”€â”€ DB Subnet AZ-A:      10.0.20.0/24  (256 IPs) â†’ 10.0.20.0 - 10.0.20.255
â””â”€â”€ DB Subnet AZ-B:      10.0.21.0/24  (256 IPs) â†’ 10.0.21.0 - 10.0.21.255
```

### Quy táº¯c chia subnet

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    KHÃ”NG ÄÆ¯á»¢C OVERLAP!                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  âœ… OK:                                                          â”‚
â”‚     10.0.0.0/24  (10.0.0.0 - 10.0.0.255)                        â”‚
â”‚     10.0.1.0/24  (10.0.1.0 - 10.0.1.255)                        â”‚
â”‚     â†’ KhÃ´ng trÃ¹ng nhau                                          â”‚
â”‚                                                                  â”‚
â”‚  âŒ WRONG:                                                       â”‚
â”‚     10.0.0.0/16  (10.0.0.0 - 10.0.255.255)                      â”‚
â”‚     10.0.1.0/24  (10.0.1.0 - 10.0.1.255)                        â”‚
â”‚     â†’ /24 náº±m trong /16, bá»‹ overlap!                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## VÃ­ dá»¥ thá»±c táº¿

### 1. Startup nhá» (10-50 EC2s)

```
VPC: 10.0.0.0/20 (4,096 IPs) - Ä‘á»§ dÃ¹ng, tiáº¿t kiá»‡m

â”œâ”€â”€ Public:  10.0.0.0/24  (251 usable)
â”œâ”€â”€ Private: 10.0.1.0/24  (251 usable)
â””â”€â”€ DB:      10.0.2.0/24  (251 usable)
```

### 2. Production (100+ EC2s, multi-AZ)

```
VPC: 10.0.0.0/16 (65,536 IPs) - room to grow

AZ-A:
â”œâ”€â”€ Public:  10.0.0.0/24
â”œâ”€â”€ Private: 10.0.10.0/24
â””â”€â”€ DB:      10.0.20.0/24

AZ-B:
â”œâ”€â”€ Public:  10.0.1.0/24
â”œâ”€â”€ Private: 10.0.11.0/24
â””â”€â”€ DB:      10.0.21.0/24

AZ-C:
â”œâ”€â”€ Public:  10.0.2.0/24
â”œâ”€â”€ Private: 10.0.12.0/24
â””â”€â”€ DB:      10.0.22.0/24
```

### 3. Multi-VPC / Multi-Region

```
âš ï¸ QUAN TRá»ŒNG: CÃ¡c VPC khÃ´ng Ä‘Æ°á»£c overlap CIDR náº¿u muá»‘n peering!

Region US-East-1:
â”œâ”€â”€ VPC-Prod:    10.0.0.0/16
â””â”€â”€ VPC-Dev:     10.1.0.0/16    â† KhÃ¡c block!

Region AP-Southeast-1:
â”œâ”€â”€ VPC-Prod:    10.2.0.0/16    â† KhÃ¡c block!
â””â”€â”€ VPC-Dev:     10.3.0.0/16    â† KhÃ¡c block!

â†’ Táº¥t cáº£ cÃ³ thá»ƒ peering vá»›i nhau vÃ¬ khÃ´ng overlap!
```

---

## Tips & Tricks

### 1. LuÃ´n plan trÆ°á»›c

```
âŒ Sai: Táº¡o VPC /24 rá»“i phÃ¡t hiá»‡n khÃ´ng Ä‘á»§ IP
âœ… ÄÃºng: Táº¡o VPC /16, chia subnet /24 â†’ room to grow
```

### 2. Naming convention cho subnets

```
10.0.[tier].[az].0/24

tier: 0-9 = public, 10-19 = private, 20-29 = database
az: 0 = AZ-A, 1 = AZ-B, 2 = AZ-C

VÃ­ dá»¥:
  10.0.0.0/24  = Public AZ-A
  10.0.1.0/24  = Public AZ-B
  10.0.10.0/24 = Private AZ-A
  10.0.11.0/24 = Private AZ-B
  10.0.20.0/24 = Database AZ-A
  10.0.21.0/24 = Database AZ-B
```

### 3. Kiá»ƒm tra overlap online

DÃ¹ng cÃ¡c tool online Ä‘á»ƒ verify:
- [CIDR Calculator](https://www.ipaddressguide.com/cidr)
- [Subnet Calculator](https://www.calculator.net/ip-subnet-calculator.html)

### 4. Báº£ng cheat sheet

```
/16 = 65,536 IPs    = Chia Ä‘Æ°á»£c 256 subnet /24
/20 = 4,096 IPs     = Chia Ä‘Æ°á»£c 16 subnet /24
/24 = 256 IPs       = Subnet phá»• biáº¿n nháº¥t
/28 = 16 IPs        = Nhá» nháº¥t AWS cho phÃ©p (11 usable)
/32 = 1 IP          = ChÃ­nh xÃ¡c 1 Ä‘á»‹a chá»‰ (dÃ¹ng trong Security Group)
```

---

## LiÃªn káº¿t

- [VPC](vpc.md) - Virtual Private Cloud
- [Security Groups](security-groups.md) - Firewall rules

> **Nguá»“n:** [AWS VPC CIDR blocks](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-cidr-blocks.html)
