# Amazon Aurora

## Má»¥c lá»¥c

- [Tá»•ng quan](#tá»•ng-quan)
- [Táº¡i sao Aurora nhanh hÆ¡n RDS?](#táº¡i-sao-aurora-nhanh-hÆ¡n-rds)
- [Aurora Storage Architecture](#aurora-storage-architecture)
- [Aurora Replicas](#aurora-replicas)
- [Aurora Endpoints](#aurora-endpoints)
- [Aurora Serverless](#aurora-serverless)
- [Aurora Global Database](#aurora-global-database)
- [Aurora Multi-Master](#aurora-multi-master)
- [Aurora Machine Learning](#aurora-machine-learning)
- [Backup vÃ  Recovery](#backup-vÃ -recovery)
- [Aurora vs RDS](#aurora-vs-rds)
- [Pricing](#pricing)
- [Best Practices](#best-practices)
- [Exam Tips](#exam-tips)

---

## Tá»•ng quan

**Amazon Aurora** lÃ  database engine cá»§a AWS, Ä‘Æ°á»£c thiáº¿t káº¿ tá»« Ä‘áº§u cho cloud. TÆ°Æ¡ng thÃ­ch vá»›i **MySQL** vÃ  **PostgreSQL**.

### Key Features

| Feature | GiÃ¡ trá»‹ |
|---------|---------|
| **Hiá»‡u suáº¥t** | 5x MySQL, 3x PostgreSQL |
| **Storage** | Auto-scaling 10GB â†’ 128TB |
| **Replicas** | Tá»‘i Ä‘a 15 Aurora Replicas |
| **Failover** | ~30 giÃ¢y (nhanh hÆ¡n RDS) |
| **Durability** | 6 copies across 3 AZs |
| **Compatibility** | MySQL 5.7/8.0, PostgreSQL 10-16 |

---

## Táº¡i sao Aurora nhanh hÆ¡n RDS?

Aurora nhanh hÆ¡n **khÃ´ng pháº£i vÃ¬ thay Ä‘á»•i MySQL/PostgreSQL engine**, mÃ  vÃ¬ **AWS thiáº¿t káº¿ láº¡i hoÃ n toÃ n táº§ng storage**.

### Kiáº¿n trÃºc truyá»n thá»‘ng (RDS MySQL/PostgreSQL)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MYSQL/POSTGRESQL TRUYá»€N THá»NG                  â”‚
â”‚                                                             â”‚
â”‚   DB Engine â”€â”€â–¶ Write full pages (16KB) â”€â”€â–¶ EBS Primary    â”‚
â”‚                        â”‚                                    â”‚
â”‚                        â””â”€â”€â–¶ Replicate 16KB â”€â”€â–¶ Standby EBS â”‚
â”‚                                                             â”‚
â”‚   âŒ Ghi toÃ n bá»™ page 16KB dÃ¹ chá»‰ thay Ä‘á»•i 1 byte          â”‚
â”‚   âŒ Network I/O ráº¥t náº·ng                                   â”‚
â”‚   âŒ Replica lag cao (seconds)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Kiáº¿n trÃºc Aurora

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AMAZON AURORA                           â”‚
â”‚                                                             â”‚
â”‚   DB Engine â”€â”€â–¶ Write only REDO LOG (~bytes)               â”‚
â”‚                        â”‚                                    â”‚
â”‚                        â–¼                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚      Aurora Distributed Storage (6 copies)      â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”â”‚      â”‚
â”‚   â”‚  â”‚AZ-a â”‚ â”‚AZ-a â”‚ â”‚AZ-b â”‚ â”‚AZ-b â”‚ â”‚AZ-c â”‚ â”‚AZ-c â”‚â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                             â”‚
â”‚   âœ… Chá»‰ gá»­i log records (~bytes) - Giáº£m 90%+ I/O         â”‚
â”‚   âœ… Storage nodes tá»± rebuild pages                         â”‚
â”‚   âœ… Quorum writes: Chá»‰ cáº§n 4/6 nodes ACK = COMMIT         â”‚
â”‚   âœ… Replica lag ~10-20ms                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### So sÃ¡nh cá»¥ thá»ƒ

| Thao tÃ¡c | RDS MySQL | Aurora |
|----------|-----------|--------|
| UPDATE 1 row (100 bytes) | Ghi page 16KB + replicate | Gá»­i log ~100 bytes |
| Network I/O | Náº·ng | Giáº£m 90%+ |
| Replica lag | Seconds | ~10-20ms |
| Failover | 1-2 phÃºt | ~30 giÃ¢y |

---

## Aurora Storage Architecture

### 6 Copies Across 3 AZs (Cluster Volume)

Khi báº¡n ghi **1 record** vÃ o Aurora, Aurora **Tá»° Äá»˜NG sao chÃ©p** record Ä‘Ã³ ra **6 báº£n**, lÆ°u á»Ÿ **3 Availability Zones** khÃ¡c nhau.

> [!NOTE]
> **Cluster Volume** lÃ  tÃªn chÃ­nh thá»©c cá»§a AWS cho storage layer nÃ y. CÃ¡c tÃªn khÃ¡c: Shared Storage, Aurora Storage, Distributed Storage - Ä‘á»u lÃ  cÃ¹ng 1 thá»©!

> [!NOTE]
> ÄÃ¢y lÃ  á»Ÿ táº§ng **STORAGE** (á»• Ä‘Ä©a), **Máº¶C Äá»ŠNH** vÃ  **Tá»° Äá»˜NG** - báº¡n KHÃ”NG cáº§n config gÃ¬ cáº£!

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AURORA STORAGE LAYER (Tá»° Äá»˜NG)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   Báº¡n cÃ³ 1 Aurora Instance:                                                 â”‚
â”‚         â”‚                                                                    â”‚
â”‚         â–¼  INSERT INTO users VALUES ('John')                                â”‚
â”‚                                                                              â”‚
â”‚   Aurora tá»± Ä‘á»™ng táº¡o 6 copies:                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚   AZ-a              AZ-b              AZ-c                    â”‚         â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚         â”‚
â”‚   â”‚  â”‚Copy 1:   â”‚      â”‚Copy 3:   â”‚      â”‚Copy 5:   â”‚            â”‚         â”‚
â”‚   â”‚  â”‚ John     â”‚      â”‚ John     â”‚      â”‚ John     â”‚            â”‚         â”‚
â”‚   â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚         â”‚
â”‚   â”‚  â”‚Copy 2:   â”‚      â”‚Copy 4:   â”‚      â”‚Copy 6:   â”‚            â”‚         â”‚
â”‚   â”‚  â”‚ John     â”‚      â”‚ John     â”‚      â”‚ John     â”‚            â”‚         â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚         â”‚
â”‚   â”‚   2 copies          2 copies          2 copies   = 6 total   â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                              â”‚
â”‚   âœ… Máº¶C Äá»ŠNH - Báº¡n khÃ´ng cáº§n lÃ m gÃ¬                                       â”‚
â”‚   âœ… Má»¥c Ä‘Ã­ch: Data durability (khÃ´ng bao giá» máº¥t data)                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Táº¡i sao cáº§n 6 copies? (KhÃ´ng pháº£i 3?)

> [!IMPORTANT]
> **6 copies lÃ  Máº¶C Äá»ŠNH**, luÃ´n luÃ´n, khÃ´ng Ä‘á»•i Ä‘Æ°á»£c! DÃ¹ báº¡n cÃ³ 1 Primary hay 15 Replicas â†’ storage váº«n lÃ  6 copies. Báº¡n CHá»ˆ TRáº¢ TIá»€N 1 Láº¦N (khÃ´ng x6).

**Náº¿u chá»‰ cÃ³ 3 copies (1 per AZ):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AZ-a   â”‚   â”‚  AZ-b   â”‚   â”‚  AZ-c   â”‚
â”‚ Copy 1  â”‚   â”‚ Copy 2  â”‚   â”‚ Copy 3  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼ Máº¥t 1 AZ = cÃ²n 2 copies
     â–¼ Máº¥t thÃªm 1 disk = cÃ²n 1 copy = NGUY HIá»‚M! âš ï¸
```

**Vá»›i 6 copies (2 per AZ):**

```
Scenario 1: Máº¥t 1 á»• Ä‘Ä©a
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Copy 1  â”‚   â”‚ Copy 3  â”‚   â”‚ Copy 5  â”‚
â”‚ Copy 2âŒâ”‚   â”‚ Copy 4  â”‚   â”‚ Copy 6  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†’ CÃ²n 5 copies â†’ VáºªN AN TOÃ€N âœ…

Scenario 2: Máº¥t cáº£ 1 AZ (Ä‘á»™ng Ä‘áº¥t, máº¥t Ä‘iá»‡n)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Copy 1âŒâ”‚   â”‚ Copy 3  â”‚   â”‚ Copy 5  â”‚
â”‚ Copy 2âŒâ”‚   â”‚ Copy 4  â”‚   â”‚ Copy 6  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   AZ-a DOWN!
â†’ CÃ²n 4 copies â†’ VáºªN GHI ÄÆ¯á»¢C (cáº§n 4/6) âœ…

Scenario 3: Máº¥t 1 AZ + 1 disk
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Copy 1âŒâ”‚   â”‚ Copy 3  â”‚   â”‚ Copy 5âŒâ”‚
â”‚ Copy 2âŒâ”‚   â”‚ Copy 4  â”‚   â”‚ Copy 6  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†’ CÃ²n 3 copies â†’ VáºªN Äá»ŒC ÄÆ¯á»¢C (cáº§n 3/6) âœ…
```

### TÃ¡c dá»¥ng cá»§a 6 copies

| TÃ¡c dá»¥ng | Chi tiáº¿t |
|----------|----------|
| ğŸ›¡ï¸ **Durability** | Máº¥t 3 copies váº«n an toÃ n (11 nines: 99.999999999%) |
| âš¡ **Write Performance** | Chá»‰ cáº§n 4/6 ACK = khÃ´ng Ä‘á»£i slow disks |
| ğŸ“– **Read Performance** | Äá»c tá»« copy nÃ o gáº§n/nhanh nháº¥t |
| ğŸ”§ **Self-healing** | AWS tá»± Ä‘á»™ng rebuild copy bá»‹ há»ng |
| ğŸŒ **AZ Failure Tolerance** | Máº¥t cáº£ 1 AZ (2 copies) váº«n hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng |

### Quorum: 4/6 Ä‘á»ƒ ghi, 3/6 Ä‘á»ƒ Ä‘á»c

**Váº¥n Ä‘á»**: Náº¿u pháº£i Ä‘á»£i cáº£ 6 copies ghi xong thÃ¬ ráº¥t cháº­m, vÃ  náº¿u 1 á»• há»ng thÃ¬ bá»‹ treo!

**Giáº£i phÃ¡p**: Chá»‰ cáº§n **ÄA Sá»** Ä‘á»“ng Ã½ lÃ  Ä‘Æ°á»£c (Quorum)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    QUORUM WRITES (4/6)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   INSERT INTO users VALUES ('John')                                         â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”                                â”‚
â”‚   â”‚ âœ… â”‚ â”‚ âœ… â”‚ â”‚ âœ… â”‚ â”‚ âœ… â”‚ â”‚ â³ â”‚ â”‚ â³ â”‚                                â”‚
â”‚   â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜                                â”‚
â”‚     1      2      3      4      5      6                                    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚           4 copies OK                                                        â”‚
â”‚           â†’ Tráº£ SUCCESS ngay!                                               â”‚
â”‚           â†’ Copy 5, 6 sáº½ sync sau (background)                              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Táº¡i sao 4/6 vÃ  3/6?**

```
Write Quorum (W) + Read Quorum (R) > Tá»•ng copies (N)
      4         +        3         >      6
                 7 > 6 âœ…

â†’ Äáº£m báº£o READ luÃ´n Ä‘á»c Ä‘Æ°á»£c data Má»šI NHáº¤T!
```

### Aurora biáº¿t data nÃ o má»›i nháº¥t báº±ng LSN

**LSN (Log Sequence Number)** = Sá»‘ thá»© tá»± phiÃªn báº£n (nhÆ° version number)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LSN - CÃCH AURORA BIáº¾T DATA NÃ€O Má»šI                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   Sau UPDATE balance = 1000:                                                â”‚
â”‚   â€¢ 4 copies Ä‘Ã£ cáº­p nháº­t (LSN = 101)                                        â”‚
â”‚   â€¢ 2 copies chÆ°a sync (LSN = 100)                                          â”‚
â”‚                                                                              â”‚
â”‚   Khi READ (láº¥y 3 copies báº¥t ká»³):                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ Copy A           â”‚  â”‚ Copy B           â”‚  â”‚ Copy C           â”‚          â”‚
â”‚   â”‚ balance = 1000   â”‚  â”‚ balance = 500    â”‚  â”‚ balance = 500    â”‚          â”‚
â”‚   â”‚ LSN = 101    âœ…  â”‚  â”‚ LSN = 100    âŒ  â”‚  â”‚ LSN = 100    âŒ  â”‚          â”‚
â”‚   â”‚ (Má»šI)            â”‚  â”‚ (CÅ¨)             â”‚  â”‚ (CÅ¨)             â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚            â”‚                   â”‚                    â”‚                       â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                â”‚                                            â”‚
â”‚                         Aurora so sÃ¡nh:                                      â”‚
â”‚                         MAX(101, 100, 100) = 101                            â”‚
â”‚                                â”‚                                            â”‚
â”‚                         â†’ Láº¥y data tá»« LSN=101                               â”‚
â”‚                         â†’ balance = 1000 (ÄÃšNG!) âœ…                         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> [!TIP]
> **TÃ³m táº¯t:**
> - **6 copies** = Data cá»±c ká»³ an toÃ n
> - **4/6 write** = Nhanh, khÃ´ng Ä‘á»£i táº¥t cáº£
> - **3/6 read** = LuÃ´n Ä‘á»c Ä‘Æ°á»£c data má»›i nháº¥t (nhá» LSN)

### Storage Auto-Scaling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STORAGE AUTO-SCALING                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   Báº¯t Ä‘áº§u: 10 GB                                                            â”‚
â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘            â”‚
â”‚                                                                              â”‚
â”‚   Data tÄƒng â†’ Storage Tá»° Äá»˜NG tÄƒng (10GB increments)                        â”‚
â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘            â”‚
â”‚                                                                              â”‚
â”‚   Tá»‘i Ä‘a: 128 TB                                                            â”‚
â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚
â”‚                                                                              â”‚
â”‚   âœ… KhÃ´ng cáº§n provision trÆ°á»›c                                              â”‚
â”‚   âœ… Chá»‰ tráº£ tiá»n cho storage Ä‘ang dÃ¹ng                                     â”‚
â”‚   âœ… KhÃ´ng downtime khi scaling                                             â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Aurora Replicas

### So sÃ¡nh vá»›i RDS Read Replicas

| Äáº·c Ä‘iá»ƒm | RDS Read Replica | Aurora Replica |
|----------|------------------|----------------|
| **Sá»‘ lÆ°á»£ng tá»‘i Ä‘a** | 5 | **15** |
| **Replication** | Async (lag seconds) | **Sync** (lag ~10-20ms) |
| **Storage** | RiÃªng biá»‡t | **Shared** (cÃ¹ng storage layer) |
| **Failover tá»± Ä‘á»™ng** | âŒ Manual promote | âœ… Tá»± Ä‘á»™ng |
| **Reader Endpoint** | âŒ KhÃ´ng cÃ³ | âœ… CÃ³ sáºµn |

### Aurora Replica Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AURORA REPLICAS                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚ WRITER  â”‚     â”‚REPLICA 1â”‚     â”‚REPLICA 2â”‚     â”‚REPLICA 3â”‚              â”‚
â”‚   â”‚ (RW)    â”‚     â”‚  (RO)   â”‚     â”‚  (RO)   â”‚     â”‚  (RO)   â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â”‚
â”‚        â”‚               â”‚               â”‚               â”‚                    â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                               â”‚                                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                    â”‚   SHARED STORAGE    â”‚                                  â”‚
â”‚                    â”‚   (6 copies/3 AZs)  â”‚                                  â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                              â”‚
â”‚   âœ… Táº¥t cáº£ Ä‘á»c tá»« CÃ™NG storage layer                                       â”‚
â”‚   âœ… KhÃ´ng cáº§n replicate data giá»¯a instances                                â”‚
â”‚   âœ… Lag chá»‰ ~10-20ms (chá» cache invalidation)                              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Replica Auto Scaling

```yaml
# Aurora Replica Auto Scaling
Target: CPU Utilization hoáº·c Connections
Min Replicas: 1
Max Replicas: 15

# VÃ­ dá»¥: Scale khi CPU > 70%
ScalingPolicy:
  MetricType: RDSReaderAverageCPUUtilization
  TargetValue: 70
```

---

## Aurora Endpoints

Aurora cÃ³ **4 loáº¡i endpoints**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AURORA ENDPOINTS                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  1. CLUSTER ENDPOINT (Writer)                                               â”‚
â”‚     mydb.cluster-xxx.region.rds.amazonaws.com                               â”‚
â”‚     â†’ LuÃ´n trá» Ä‘áº¿n Writer instance                                          â”‚
â”‚     â†’ DÃ¹ng cho: INSERT, UPDATE, DELETE                                      â”‚
â”‚                                                                              â”‚
â”‚  2. READER ENDPOINT                                                          â”‚
â”‚     mydb.cluster-ro-xxx.region.rds.amazonaws.com                            â”‚
â”‚     â†’ Load balance giá»¯a Táº¤T Cáº¢ Aurora Replicas                              â”‚
â”‚     â†’ DÃ¹ng cho: SELECT (general reads)                                      â”‚
â”‚     â†’ Náº¿u khÃ´ng cÃ³ Replica, trá» vá» Primary                                  â”‚
â”‚                                                                              â”‚
â”‚  3. CUSTOM ENDPOINTS                                                         â”‚
â”‚     mydb-analytics.cluster-custom-xxx.region.rds.amazonaws.com              â”‚
â”‚     â†’ Báº¡n tá»± Ä‘á»‹nh nghÄ©a subset of instances                                 â”‚
â”‚     â†’ DÃ¹ng cho: Workload-specific routing                                   â”‚
â”‚     â†’ Tá»‘i Ä‘a: 5 custom endpoints per cluster                                â”‚
â”‚                                                                              â”‚
â”‚  4. INSTANCE ENDPOINTS                                                       â”‚
â”‚     mydb-instance-1.xxx.region.rds.amazonaws.com                            â”‚
â”‚     â†’ Trá» trá»±c tiáº¿p Ä‘áº¿n 1 instance cá»¥ thá»ƒ                                   â”‚
â”‚     â†’ DÃ¹ng cho: Debugging, testing                                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sá»‘ lÆ°á»£ng Endpoints

| Loáº¡i Endpoint | Sá»‘ lÆ°á»£ng | Tá»± Ä‘á»™ng/Manual |
|---------------|----------|----------------|
| **Cluster (Writer)** | 1 | Tá»± Ä‘á»™ng táº¡o |
| **Reader** | 1 | Tá»± Ä‘á»™ng táº¡o |
| **Instance** | = sá»‘ instances | Tá»± Ä‘á»™ng táº¡o |
| **Custom** | Tá»‘i Ä‘a **5** | Báº¡n tá»± táº¡o |

**VÃ­ dá»¥: 1 Primary + 2 Replicas**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    1 Primary + 2 Replicas = 5 Endpoints máº·c Ä‘á»‹nh                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚ PRIMARY  â”‚      â”‚REPLICA 1 â”‚      â”‚REPLICA 2 â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚        â–²                 â–²                 â–²                           â”‚
â”‚        â”‚                 â”‚                 â”‚                           â”‚
â”‚   Instance EP-1     Instance EP-2     Instance EP-3                    â”‚
â”‚        â”‚                 â”‚                 â”‚                           â”‚
â”‚        â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚        â”‚                          â”‚                                    â”‚
â”‚   Cluster EP               Reader EP                                   â”‚
â”‚   (â†’ Primary)         (load balance â†’ Replica 1 & 2)                  â”‚
â”‚                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Máº·c Ä‘á»‹nh: 1 + 1 + 3 = 5 endpoints                                   â”‚
â”‚   + Custom: Tá»‘i Ä‘a 5 (tÃ¹y báº¡n táº¡o)                                    â”‚
â”‚   = Tá»‘i Ä‘a 10 endpoints                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> [!TIP]
> **Endpoints hoÃ n toÃ n MIá»„N PHÃ!** Báº¡n chá»‰ tráº£ tiá»n cho Instances, Storage vÃ  I/O. Endpoints chá»‰ lÃ  DNS routing - AWS khÃ´ng charge.

### Custom Endpoints Use Case

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CUSTOM ENDPOINTS                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   Scenario: CÃ³ 2 loáº¡i workload khÃ¡c nhau                                    â”‚
â”‚                                                                              â”‚
â”‚   OLTP Workload (nháº¹, nhanh):                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚  Custom Endpoint: oltp.cluster-custom-xxx       â”‚                       â”‚
â”‚   â”‚  â†’ Replica 1 (r5.large)                         â”‚                       â”‚
â”‚   â”‚  â†’ Replica 2 (r5.large)                         â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                              â”‚
â”‚   Analytics Workload (náº·ng, lÃ¢u):                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚  Custom Endpoint: analytics.cluster-custom-xxx  â”‚                       â”‚
â”‚   â”‚  â†’ Replica 3 (r5.4xlarge) â† Instance lá»›n hÆ¡n   â”‚                       â”‚
â”‚   â”‚  â†’ Replica 4 (r5.4xlarge)                       â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                              â”‚
â”‚   â†’ Analytics queries KHÃ”NG áº£nh hÆ°á»Ÿng OLTP performance!                     â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Aurora Serverless

> [!IMPORTANT]
> **Serverless scale RESOURCE (CPU/RAM) cá»§a instance**, KHÃ”NG pháº£i sá»‘ lÆ°á»£ng instances! ÄÃ¢y khÃ¡c vá»›i Replica Auto Scaling (thÃªm/bá»›t replicas).

### Aurora Serverless v1 vs v2

| Feature | Serverless v1 | Serverless v2 |
|---------|---------------|---------------|
| **Scaling** | Pause/Resume (cÃ³ gap) | **Continuous** (smooth) |
| **Min capacity** | 0 ACUs (pause) | 0.5 ACUs |
| **Max capacity** | 256 ACUs | 128 ACUs |
| **Scale time** | 30 giÃ¢y - vÃ i phÃºt | **GiÃ¢y** |
| **Read replicas** | âŒ | âœ… |
| **Global Database** | âŒ | âœ… |

### ACU (Aurora Capacity Units)

```
1 ACU â‰ˆ 2 GB RAM + proportional CPU + networking

VÃ­ dá»¥ pricing (us-east-1):
- Aurora MySQL Serverless v2: $0.12/ACU-hour
- 8 ACUs cháº¡y 24/7: 8 Ã— $0.12 Ã— 24 Ã— 30 = $691.20/thÃ¡ng
```

### Serverless Scaling - Dá»±a vÃ o Ä‘Ã¢u?

Aurora Serverless v2 **tá»± Ä‘á»™ng** monitor vÃ  scale dá»±a trÃªn:

| Metric | MÃ´ táº£ |
|--------|-------|
| **CPU Utilization** | % CPU Ä‘ang sá»­ dá»¥ng |
| **Memory Pressure** | RAM cáº§n thiáº¿t cho workload |
| **Active Connections** | Sá»‘ connections Ä‘ang hoáº¡t Ä‘á»™ng |
| **Buffer Pool Usage** | Bá»™ nhá»› Ä‘á»‡m cho queries |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SERVERLESS AUTO SCALING                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   Báº¡n config:  Min ACUs: 0.5  â”‚  Max ACUs: 32                               â”‚
â”‚                                                                              â”‚
â”‚   Aurora tá»± Ä‘á»™ng:                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚   CPU â†‘ cao   â”€â”€â”€â”€â”€â”€â–º  ThÃªm ACUs (trong giÃ¢y)                    â”‚     â”‚
â”‚   â”‚   Memory â†‘    â”€â”€â”€â”€â”€â”€â–º  ThÃªm ACUs                                 â”‚     â”‚
â”‚   â”‚   Connections â†‘ â”€â”€â”€â”€â–º  ThÃªm ACUs                                 â”‚     â”‚
â”‚   â”‚                                                                   â”‚     â”‚
â”‚   â”‚   CPU â†“ tháº¥p  â”€â”€â”€â”€â”€â”€â–º  Giáº£m ACUs (tá»« tá»«, trÃ¡nh flapping)        â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                              â”‚
â”‚   âœ… Scale UP: Ráº¥t nhanh (giÃ¢y)                                             â”‚
â”‚   âœ… Scale DOWN: Cháº­m hÆ¡n (trÃ¡nh scale lÃªn xuá»‘ng liÃªn tá»¥c)                  â”‚
â”‚   âœ… Sá»‘ instances KHÃ”NG Äá»”I - chá»‰ thay Ä‘á»•i resources!                       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### So sÃ¡nh: Serverless vs Replica Auto Scaling

| | Serverless (ACU Scaling) | Replica Auto Scaling |
|--|--------------------------|---------------------|
| **Scale gÃ¬?** | Resources (CPU/RAM) cá»§a instance | Sá»‘ lÆ°á»£ng replicas |
| **Dá»±a vÃ o** | CPU, Memory, Connections (tá»± Ä‘á»™ng) | Báº¡n config: CPU target hoáº·c Connections |
| **HÆ°á»›ng** | Vertical (instance máº¡nh hÆ¡n) | Horizontal (thÃªm instances) |

### Serverless v2 Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AURORA SERVERLESS V2                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   Traffic tháº¥p:                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”                                                                   â”‚
â”‚   â”‚ 0.5 â”‚ ACUs                                                              â”‚
â”‚   â”‚ ACU â”‚                                                                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”˜                                                                   â”‚
â”‚                                                                              â”‚
â”‚   Traffic tÄƒng â†’ Scale NGAY Láº¬P Tá»¨C (giÃ¢y):                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”                                             â”‚
â”‚   â”‚     â”‚â”‚     â”‚â”‚     â”‚â”‚     â”‚                                             â”‚
â”‚   â”‚     â”‚â”‚     â”‚â”‚     â”‚â”‚     â”‚  8 ACUs                                      â”‚
â”‚   â”‚     â”‚â”‚     â”‚â”‚     â”‚â”‚     â”‚                                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                                                                              â”‚
â”‚   Traffic giáº£m â†’ Scale down (smooth):                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”                                                            â”‚
â”‚   â”‚     â”‚â”‚     â”‚  2 ACUs                                                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜                                                            â”‚
â”‚                                                                              â”‚
â”‚   âœ… Pay per use (khÃ´ng cáº§n chá»n instance size)                             â”‚
â”‚   âœ… No cold starts nhÆ° v1                                                  â”‚
â”‚   âœ… Mixed vá»›i Provisioned instances trong cÃ¹ng cluster                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Use Cases

| Use Case | Chá»n gÃ¬? |
|----------|----------|
| Unpredictable workloads | Serverless v2 |
| Dev/Test environments | Serverless v2 |
| Variable traffic (spiky) | Serverless v2 |
| Consistent high traffic | Provisioned |
| Cost optimization cáº§n pause | Serverless v1 (0 ACUs) |

---

## Aurora Global Database

### Cross-Region Replication

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AURORA GLOBAL DATABASE                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   PRIMARY REGION (us-east-1)           SECONDARY REGION (eu-west-1)         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚   â”‚  â”‚ Writer â”‚ â”‚Replica â”‚  â”‚   â”€â”€â”€â–º  â”‚  â”‚Replica â”‚ â”‚Replica â”‚  â”‚           â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ <1 giÃ¢y â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚   â”‚         â”‚               â”‚         â”‚         â”‚               â”‚           â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚           â”‚
â”‚   â”‚  â”‚ Storage Layer   â”‚    â”‚  â”€â”€â”€â”€â–º  â”‚  â”‚ Storage Layer   â”‚    â”‚           â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                              â”‚
â”‚   Replication lag: < 1 giÃ¢y (typically ~100ms)                              â”‚
â”‚   Failover to secondary: < 1 phÃºt                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Key Features

| Feature | Value |
|---------|-------|
| **Replication lag** | < 1 giÃ¢y (typically ~100ms) |
| **Secondary regions** | Tá»‘i Ä‘a 5 |
| **Replicas per region** | Tá»‘i Ä‘a 16 |
| **Cross-region failover** | < 1 phÃºt (manual hoáº·c planned) |
| **Write forwarding** | Secondary cÃ³ thá»ƒ forward writes vá» Primary |

### Use Cases

1. **Disaster Recovery**: Failover sang region khÃ¡c khi primary region down
2. **Low-latency reads**: Users á»Ÿ EU Ä‘á»c tá»« EU region
3. **Data locality**: Compliance requirements (GDPR)

---

## Aurora Multi-Master

> âš ï¸ **Deprecated**: Aurora Multi-Master Ä‘Ã£ bá»‹ deprecated. Thay tháº¿ báº±ng **Aurora Serverless v2** hoáº·c **Aurora Global Database**.

```
TrÆ°á»›c Ä‘Ã¢y:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Master â”‚  â”‚ Master â”‚  â”‚ Master â”‚  â† Táº¥t cáº£ Ä‘á»u ghi Ä‘Æ°á»£c
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Hiá»‡n táº¡i: KHÃ”NG cÃ²n support Multi-Master
â†’ DÃ¹ng Aurora Global Database vá»›i Write Forwarding náº¿u cáº§n multi-region writes
```

---

## Aurora Machine Learning

Aurora cÃ³ thá»ƒ gá»i **AWS ML services** trá»±c tiáº¿p tá»« SQL:

```sql
-- Gá»i Amazon Comprehend Ä‘á»ƒ phÃ¢n tÃ­ch sentiment
SELECT 
    review_text,
    aws_comprehend_detect_sentiment(review_text, 'en') AS sentiment
FROM product_reviews;

-- Gá»i Amazon SageMaker endpoint
SELECT 
    customer_id,
    aws_sagemaker_invoke_endpoint('churn-predictor', features) AS churn_probability
FROM customers;
```

### Supported Services

| Service | Function |
|---------|----------|
| **Amazon Comprehend** | Sentiment analysis, entity detection |
| **Amazon SageMaker** | Custom ML models |

---

## Backup vÃ  Recovery

### Automated Backups

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AURORA BACKUP                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   CONTINUOUS BACKUP to S3 (tá»± Ä‘á»™ng)                                         â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚ Aurora Storage â”€â”€â–º S3 (continuous, incremental)                  â”‚     â”‚
â”‚   â”‚                                                                   â”‚     â”‚
â”‚   â”‚ Retention: 1-35 days                                             â”‚     â”‚
â”‚   â”‚ Point-in-Time Recovery: Báº¥t ká»³ giÃ¢y nÃ o trong retention window   â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                              â”‚
â”‚   âœ… KhÃ´ng áº£nh hÆ°á»Ÿng performance                                           â”‚
â”‚   âœ… KhÃ´ng cáº§n maintenance window                                          â”‚
â”‚   âœ… Backup storage FREE (up to 100% of DB size)                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Backtrack (Aurora MySQL only)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AURORA BACKTRACK                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   Scenario: Accidentally DELETE important data                              â”‚
â”‚                                                                              â”‚
â”‚   Timeline:                                                                  â”‚
â”‚   â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€                   â”‚
â”‚       â”‚        â”‚        â”‚        â”‚        â”‚        â”‚                        â”‚
â”‚     10:00    10:15    10:30    10:45    11:00    Now                       â”‚
â”‚                         â”‚                                                   â”‚
â”‚                     DELETE!                                                 â”‚
â”‚                                                                              â”‚
â”‚   Traditional restore: Cáº§n restore tá»« snapshot â†’ 30+ phÃºt                   â”‚
â”‚   Backtrack: "Rewind" database vá» 10:29 â†’ GIÃ‚Y!                            â”‚
â”‚                                                                              â”‚
â”‚   âœ… KhÃ´ng cáº§n restore                                                      â”‚
â”‚   âœ… In-place recovery                                                      â”‚
â”‚   âœ… Window: up to 72 hours                                                 â”‚
â”‚   âŒ Chá»‰ Aurora MySQL                                                       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Clone

```
Original cluster                    Clone (copy-on-write)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚                â”‚                 â”‚
â”‚   100 TB data   â”‚   Clone â†’     â”‚   0 TB initial  â”‚
â”‚                 â”‚   (seconds)    â”‚   (share data)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Shared storage â—„â”€â”€â”€â”€â”€â”€â”˜
                      (copy-on-write)

âœ… Clone terabytes trong giÃ¢y
âœ… KhÃ´ng tá»‘n thÃªm storage ban Ä‘áº§u
âœ… Chá»‰ tá»‘n storage khi cÃ³ changes
```

---

## Aurora vs RDS

### So sÃ¡nh tá»•ng quan

| TiÃªu chÃ­ | RDS MySQL/PostgreSQL | Aurora |
|----------|----------------------|--------|
| **Performance** | Baseline | **5x MySQL, 3x PostgreSQL** |
| **Storage** | EBS (provision trÆ°á»›c) | **Auto-scaling 10GB-128TB** |
| **Max Storage** | 64TB | **128TB** |
| **Replication** | Async (lag seconds) | **Sync** (~10-20ms lag) |
| **Max Replicas** | 5 | **15** |
| **Failover** | 1-2 phÃºt | **~30 giÃ¢y** |
| **Reader Endpoint** | âŒ | âœ… |
| **Backtrack** | âŒ | âœ… (MySQL only) |
| **Clone** | âŒ (snapshot restore) | âœ… (seconds) |
| **Serverless** | âŒ | âœ… v1 vÃ  v2 |
| **Global Database** | âŒ | âœ… |
| **GiÃ¡** | Tháº¥p hÆ¡n ~20% | Cao hÆ¡n |

### So sÃ¡nh High Availability (HA)

| TiÃªu chÃ­ | RDS Multi-AZ | Aurora |
|----------|--------------|--------|
| **Kiáº¿n trÃºc** | Primary + Standby (riÃªng biá»‡t) | Primary + Shared Storage |
| **Standby Ä‘á»c Ä‘Æ°á»£c?** | âŒ KhÃ´ng (chá»‰ failover) | âœ… Replicas Ä‘á»c Ä‘Æ°á»£c |
| **Sá»‘ lÆ°á»£ng standby** | 1 (hoáº·c 2 vá»›i Multi-AZ Cluster) | Tá»‘i Ä‘a 15 replicas |
| **Failover time** | 1-2 phÃºt | ~30 giÃ¢y |
| **Data sync** | Synchronous block-level | Log-based (nháº¹ hÆ¡n) |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RDS MULTI-AZ                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚   â”‚   PRIMARY     â”‚  Sync Block  â”‚   STANDBY     â”‚                          â”‚
â”‚   â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚                          â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”   â”‚  Replication â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”   â”‚                          â”‚
â”‚   â”‚   â”‚  EBS  â”‚   â”‚              â”‚   â”‚  EBS  â”‚   â”‚                          â”‚
â”‚   â”‚   â”‚ 100GB â”‚   â”‚              â”‚   â”‚ 100GB â”‚   â”‚  âŒ KhÃ´ng Ä‘á»c Ä‘Æ°á»£c      â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚        AZ-a                           AZ-b                                   â”‚
â”‚                                                                              â”‚
â”‚   â†’ Failover: 1-2 phÃºt (DNS propagation + recovery)                         â”‚
â”‚   â†’ Storage: 2 Ã— 100GB = 200GB cost                                         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AURORA HA                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚  PRIMARY  â”‚   â”‚ REPLICA 1 â”‚   â”‚ REPLICA 2 â”‚                             â”‚
â”‚   â”‚  (Writer) â”‚   â”‚  (Reader) â”‚   â”‚  (Reader) â”‚  âœ… Äá»c Ä‘Æ°á»£c!              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚         â”‚               â”‚               â”‚                                    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                         â”‚                                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚              â”‚   SHARED STORAGE    â”‚                                        â”‚
â”‚              â”‚   (6 copies/3 AZs)  â”‚                                        â”‚
â”‚              â”‚       100GB         â”‚                                        â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                                              â”‚
â”‚   â†’ Failover: ~30 giÃ¢y (chá»‰ promote replica)                               â”‚
â”‚   â†’ Storage: 100GB cost (shared, tráº£ 1 láº§n)                                 â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### So sÃ¡nh Replication

| TiÃªu chÃ­ | RDS Read Replica | Aurora Replica |
|----------|------------------|----------------|
| **CÆ¡ cháº¿** | Async binlog replication | Shared storage (khÃ´ng cáº§n copy data) |
| **Replica lag** | Seconds - minutes | ~10-20ms |
| **Cross-region** | âœ… (lag cao hÆ¡n) | âœ… Global Database (<1 giÃ¢y) |
| **Failover tá»± Ä‘á»™ng** | âŒ Manual promote | âœ… Tá»± Ä‘á»™ng |
| **Reader Endpoint** | âŒ Pháº£i tá»± load balance | âœ… CÃ³ sáºµn |
| **Storage cost** | Ã— sá»‘ replicas | Shared (1 láº§n) |

### So sÃ¡nh Storage Architecture

| TiÃªu chÃ­ | RDS | Aurora |
|----------|-----|--------|
| **Storage type** | EBS (gp2, gp3, io1, io2) | Distributed SSD (tá»± quáº£n lÃ½) |
| **Provisioning** | Pháº£i chá»n trÆ°á»›c | Auto-scaling |
| **Scaling** | Cáº§n modify + cÃ³ thá»ƒ downtime | Tá»± Ä‘á»™ng, khÃ´ng downtime |
| **Max size** | 64TB | 128TB |
| **Durability** | EBS: 99.999% | 6 copies/3 AZs: 99.999999999% |
| **IOPS** | Pháº£i provision (io1/io2) | Included (scale vá»›i storage) |

### So sÃ¡nh Features

| Feature | RDS | Aurora |
|---------|-----|--------|
| **Multi-AZ** | âœ… | âœ… (máº·c Ä‘á»‹nh vá»›i replicas) |
| **Read Replicas** | âœ… (max 5) | âœ… (max 15) |
| **Automated Backups** | âœ… | âœ… |
| **Point-in-Time Recovery** | âœ… | âœ… |
| **Backtrack** | âŒ | âœ… (MySQL) |
| **Clone** | âŒ | âœ… |
| **Serverless** | âŒ | âœ… |
| **Global Database** | âŒ | âœ… |
| **Blue/Green Deployments** | âœ… | âœ… |
| **Performance Insights** | âœ… | âœ… |
| **IAM DB Authentication** | âœ… | âœ… |
| **Secrets Manager Integration** | âœ… | âœ… |

### Khi nÃ o chá»n gÃ¬?

| Scenario | Chá»n | LÃ½ do |
|----------|------|-------|
| Budget constrained | **RDS** | Ráº» hÆ¡n ~20% |
| Simple apps, predictable load | **RDS** | Äá»§ dÃ¹ng, tiáº¿t kiá»‡m |
| High performance, low latency | **Aurora** | 5x faster |
| Need fast failover (<1 phÃºt) | **Aurora** | 30 giÃ¢y failover |
| Many read replicas (>5) | **Aurora** | Max 15 replicas |
| Cross-region DR | **Aurora** | Global Database |
| Unpredictable workloads | **Aurora Serverless v2** | Auto-scale ACUs |
| Need to pause DB (dev/test) | **Aurora Serverless v1** | 0 ACUs = $0 |
| Quick recovery tá»« human error | **Aurora** | Backtrack (seconds) |
| Test vá»›i production data | **Aurora** | Clone (seconds) |

---

## Pricing

### Components

| Component | Pricing (us-east-1) |
|-----------|---------------------|
| **Instance** | $0.073/hr (db.r6g.large) |
| **Storage** | $0.10/GB-month |
| **I/O** | $0.20 per 1 million requests |
| **Backup** | Free up to DB size |

### Aurora I/O-Optimized

```
Standard:
- Storage: $0.10/GB-month
- I/O: $0.20/million requests

I/O-Optimized:
- Storage: $0.225/GB-month (cao hÆ¡n)
- I/O: $0 (included!)

â†’ Chá»n I/O-Optimized khi I/O > 25% total Aurora cost
```

---

## Best Practices

1. **DÃ¹ng Reader Endpoint** cho táº¥t cáº£ reads (Amazon tá»± Ä‘á»™ng load balance)

2. **Custom Endpoints** Ä‘á»ƒ tÃ¡ch biá»‡t OLTP vÃ  Analytics workloads

3. **Aurora Serverless v2** cho dev/test Ä‘á»ƒ tá»‘i Æ°u cost

4. **Enable Backtrack** (MySQL) Ä‘á»ƒ recover tá»« human errors nhanh

5. **Clone** thay vÃ¬ snapshot Ä‘á»ƒ test vá»›i production data

6. **Global Database** cho multi-region DR vÃ  low-latency reads

7. **Performance Insights** Ä‘á»ƒ monitor vÃ  tune queries

---

## Exam Tips

1. **Aurora nhanh hÆ¡n** vÃ¬ log-based replication, shared storage layer

2. **Failover ~30 giÃ¢y** (nhanh hÆ¡n RDS 1-2 phÃºt)

3. **Reader Endpoint cÃ³ sáºµn** (RDS Read Replicas khÃ´ng cÃ³)

4. **15 replicas** (RDS chá»‰ cÃ³ 5)

5. **Backtrack** = "rewind" database (chá»‰ MySQL)

6. **Clone** = copy terabytes trong seconds

7. **Serverless v2** = continuous scaling (v1 cÃ³ cold start)

8. **Global Database** = cross-region < 1 giÃ¢y lag

9. **Storage auto-scaling** 10GB â†’ 128TB (RDS pháº£i provision)

10. **6 copies across 3 AZs** = high durability
