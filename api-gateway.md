# Amazon API Gateway

## ğŸ“‹ Má»¥c lá»¥c
- [Tá»•ng quan](#-tá»•ng-quan)
- [CÃ¡c loáº¡i API](#-cÃ¡c-loáº¡i-api)
- [Kiáº¿n trÃºc](#-kiáº¿n-trÃºc)
- [Integration Types](#-integration-types)
- [Authentication & Authorization](#-authentication--authorization)
- [Features](#-features)
- [Pricing](#-pricing)
- [Best Practices](#-best-practices)
- [Hands-on Examples](#-hands-on-examples)

---

## ğŸ¯ Tá»•ng quan

**Amazon API Gateway** lÃ  dá»‹ch vá»¥ fully managed giÃºp táº¡o, publish, maintain, monitor, vÃ  secure APIs á»Ÿ má»i quy mÃ´.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WHAT IS API GATEWAY?                              â”‚
â”‚                                                                       â”‚
â”‚   API Gateway = "Cá»­a ngÃµ" cho backend services                       â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚    Clients              API Gateway           Backend          â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚   â”‚   Web   â”‚       â”‚               â”‚      â”‚  Lambda   â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   App   â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚ â€¢ Routing     â”‚â”€â”€â”€â”€â”€â–¶â”‚           â”‚    â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â€¢ Auth        â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚                     â”‚ â€¢ Throttling  â”‚                        â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â€¢ Caching     â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚   â”‚ Mobile  â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚ â€¢ Monitoring  â”‚â”€â”€â”€â”€â”€â–¶â”‚   EC2     â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   App   â”‚       â”‚ â€¢ Transform   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚               â”‚                        â”‚   â”‚
â”‚   â”‚                     â”‚               â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚               â”‚â”€â”€â”€â”€â”€â–¶â”‚   HTTP    â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   IoT   â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚      â”‚ Endpoint  â”‚    â”‚   â”‚
â”‚   â”‚   â”‚ Device  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   KEY BENEFITS:                                                       â”‚
â”‚   â”œâ”€â”€ âœ… Fully managed - khÃ´ng cáº§n quáº£n lÃ½ servers                  â”‚
â”‚   â”œâ”€â”€ âœ… Auto-scaling - xá»­ lÃ½ hÃ ng triá»‡u requests                   â”‚
â”‚   â”œâ”€â”€ âœ… Pay-per-use - chá»‰ tráº£ tiá»n khi cÃ³ traffic                  â”‚
â”‚   â”œâ”€â”€ âœ… Security - IAM, Cognito, API Keys, OAuth                   â”‚
â”‚   â”œâ”€â”€ âœ… Monitoring - CloudWatch metrics & logs                     â”‚
â”‚   â””â”€â”€ âœ… Versioning - quáº£n lÃ½ multiple API versions                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”€ CÃ¡c loáº¡i API

API Gateway há»— trá»£ 3 loáº¡i API:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API GATEWAY TYPES                               â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  1. REST API                                                  â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚  Full-featured API vá»›i nhiá»u tÃ­nh nÄƒng:            â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âœ… API Keys & Usage Plans                         â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âœ… Request/Response validation                    â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âœ… Request/Response transformation               â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âœ… Caching                                         â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âœ… WAF integration                                â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âœ… Private APIs (VPC only)                        â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  Endpoint types:                                    â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Regional - Deploy in AWS Region                 â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Edge-optimized - Via CloudFront                 â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Private - Only within VPC                       â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  ğŸ’° $3.50 per million requests                     â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  2. HTTP API (Recommended cho Ä‘a sá»‘ use cases)              â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚  Simpler, faster, cheaper than REST API:           â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âœ… 70% cheaper than REST API                      â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âœ… Lower latency                                  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âœ… OIDC/OAuth 2.0 built-in                        â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âœ… CORS support built-in                          â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âœ… Auto-deploy                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âŒ KhÃ´ng cÃ³: API Keys, caching, WAF, transforms  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  ğŸ’° $1.00 per million requests                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  Best for: Lambda/HTTP proxies, simple APIs        â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  3. WebSocket API                                            â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚  Real-time two-way communication:                  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  Client â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Backend        â”‚    â”‚   â”‚
â”‚   â”‚     â”‚         Persistent connection                       â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  Routes events (JSON):                             â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ $connect - Client connects                      â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ $disconnect - Client disconnects                â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ $default - Default route                        â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Custom routes (e.g., "sendMessage")             â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  Use cases:                                        â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Chat applications                               â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Live dashboards                                 â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Real-time notifications                         â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Gaming                                          â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  ğŸ’° $1.00 per million messages                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚      + $0.25 per million connection minutes        â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### So sÃ¡nh REST API vs HTTP API

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   REST API vs HTTP API                               â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚        Feature           â”‚   REST API   â”‚    HTTP API       â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚ Price (per 1M requests)  â”‚    $3.50     â”‚     $1.00        â”‚   â”‚
â”‚   â”‚ Latency                  â”‚    Higher    â”‚     ~40% lower   â”‚   â”‚
â”‚   â”‚ Lambda integration       â”‚      âœ…      â”‚       âœ…          â”‚   â”‚
â”‚   â”‚ HTTP backend             â”‚      âœ…      â”‚       âœ…          â”‚   â”‚
â”‚   â”‚ Private integration      â”‚      âœ…      â”‚       âœ…          â”‚   â”‚
â”‚   â”‚ JWT/OIDC authorization   â”‚      âŒ      â”‚       âœ…          â”‚   â”‚
â”‚   â”‚ IAM authorization        â”‚      âœ…      â”‚       âœ…          â”‚   â”‚
â”‚   â”‚ Lambda authorizer        â”‚      âœ…      â”‚       âœ…          â”‚   â”‚
â”‚   â”‚ API Keys                 â”‚      âœ…      â”‚       âŒ          â”‚   â”‚
â”‚   â”‚ Usage plans & quotas     â”‚      âœ…      â”‚       âŒ          â”‚   â”‚
â”‚   â”‚ Request caching          â”‚      âœ…      â”‚       âŒ          â”‚   â”‚
â”‚   â”‚ Request transformation   â”‚      âœ…      â”‚       âŒ          â”‚   â”‚
â”‚   â”‚ Request validation       â”‚      âœ…      â”‚       âŒ          â”‚   â”‚
â”‚   â”‚ WAF integration          â”‚      âœ…      â”‚       âŒ          â”‚   â”‚
â”‚   â”‚ Private endpoints        â”‚      âœ…      â”‚       âŒ          â”‚   â”‚
â”‚   â”‚ Mutual TLS               â”‚      âœ…      â”‚       âœ…          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   RECOMMENDATION:                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Báº¯t Ä‘áº§u vá»›i HTTP API, chá»‰ dÃ¹ng REST API khi cáº§n:          â”‚   â”‚
â”‚   â”‚  â€¢ API Keys & Usage Plans (monetization)                    â”‚   â”‚
â”‚   â”‚  â€¢ Request caching                                          â”‚   â”‚
â”‚   â”‚  â€¢ Request/Response transformation                          â”‚   â”‚
â”‚   â”‚  â€¢ WAF protection                                           â”‚   â”‚
â”‚   â”‚  â€¢ Private endpoints (VPC only access)                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Kiáº¿n trÃºc

### Request/Response Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  API GATEWAY REQUEST FLOW                            â”‚
â”‚                                                                       â”‚
â”‚   Client Request                                                      â”‚
â”‚        â”‚                                                              â”‚
â”‚        â–¼                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                      API GATEWAY                             â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚  1. METHOD REQUEST                                     â”‚  â”‚   â”‚
â”‚   â”‚  â”‚     â€¢ Validate request parameters                      â”‚  â”‚   â”‚
â”‚   â”‚  â”‚     â€¢ Check API Key                                    â”‚  â”‚   â”‚
â”‚   â”‚  â”‚     â€¢ Authorization (IAM, Cognito, Lambda)             â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                          â”‚                                   â”‚   â”‚
â”‚   â”‚                          â–¼                                   â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚  2. INTEGRATION REQUEST                                â”‚  â”‚   â”‚
â”‚   â”‚  â”‚     â€¢ Transform request (mapping templates)            â”‚  â”‚   â”‚
â”‚   â”‚  â”‚     â€¢ Add headers if needed                            â”‚  â”‚   â”‚
â”‚   â”‚  â”‚     â€¢ Route to backend                                 â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                          â”‚                                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â–¼                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                     BACKEND                                  â”‚   â”‚
â”‚   â”‚         Lambda / HTTP / AWS Service / Mock                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                          â–¼                                   â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚  3. INTEGRATION RESPONSE                               â”‚  â”‚   â”‚
â”‚   â”‚  â”‚     â€¢ Receive response from backend                    â”‚  â”‚   â”‚
â”‚   â”‚  â”‚     â€¢ Transform response                               â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                          â”‚                                   â”‚   â”‚
â”‚   â”‚                          â–¼                                   â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚  4. METHOD RESPONSE                                    â”‚  â”‚   â”‚
â”‚   â”‚  â”‚     â€¢ Set response headers                             â”‚  â”‚   â”‚
â”‚   â”‚  â”‚     â€¢ Set status codes                                 â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                        â”‚
â”‚                              â–¼                                        â”‚
â”‚                     Client Response                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Stages vÃ  Deployment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STAGES & DEPLOYMENT                               â”‚
â”‚                                                                       â”‚
â”‚   API Definition (Resources, Methods, Integrations)                  â”‚
â”‚        â”‚                                                              â”‚
â”‚        â”‚  Deploy                                                      â”‚
â”‚        â–¼                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                        STAGES                                â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚   â”‚   â”‚    dev      â”‚  â”‚   staging   â”‚  â”‚    prod     â”‚        â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚   â”‚          â”‚                â”‚                â”‚                â”‚   â”‚
â”‚   â”‚          â–¼                â–¼                â–¼                â”‚   â”‚
â”‚   â”‚   api.com/dev/     api.com/staging/   api.com/prod/        â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚   Má»—i stage cÃ³:                                              â”‚   â”‚
â”‚   â”‚   â€¢ Stage variables (nhÆ° env vars)                           â”‚   â”‚
â”‚   â”‚   â€¢ Logging settings                                         â”‚   â”‚
â”‚   â”‚   â€¢ Throttling settings                                      â”‚   â”‚
â”‚   â”‚   â€¢ Cache settings                                           â”‚   â”‚
â”‚   â”‚   â€¢ Canary deployments                                       â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   STAGE VARIABLES:                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Stage: dev                                                  â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ lambda_alias = "dev"                                   â”‚   â”‚
â”‚   â”‚  â””â”€â”€ db_table = "users-dev"                                 â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  Stage: prod                                                 â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ lambda_alias = "prod"                                  â”‚   â”‚
â”‚   â”‚  â””â”€â”€ db_table = "users-prod"                                â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  Integration:                                                 â”‚   â”‚
â”‚   â”‚  arn:aws:lambda:...:my-function:${stageVariables.lambda_alias}â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ Integration Types

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTEGRATION TYPES                                 â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  1. LAMBDA FUNCTION                                          â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚  API Gateway â†’ Lambda                              â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Lambda Proxy: Pass entire request to Lambda    â”‚    â”‚   â”‚
â”‚   â”‚     â”‚    (ÄÆ¡n giáº£n, phá»• biáº¿n nháº¥t)                       â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Lambda Custom: Use mapping templates            â”‚    â”‚   â”‚
â”‚   â”‚     â”‚    (Transform request/response)                    â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  2. HTTP                                                     â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚  API Gateway â†’ Any HTTP endpoint                   â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ HTTP Proxy: Forward request as-is              â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ HTTP Custom: Transform request/response        â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  Example: api.example.com â†’ internal.backend.com   â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  3. AWS SERVICE                                              â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚  API Gateway â†’ AWS Services directly               â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  VÃ­ dá»¥:                                            â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ POST /upload â†’ S3 PutObject                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ POST /message â†’ SQS SendMessage                 â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ POST /event â†’ SNS Publish                       â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ POST /item â†’ DynamoDB PutItem                   â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â†’ KhÃ´ng cáº§n Lambda! Giáº£m cost & latency          â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  4. VPC LINK (Private Integration)                          â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚  API Gateway â†’ Resources in VPC                    â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â”‚API Gateway  â”‚â”€â”€â”€â”€â–¶â”‚    VPC Link             â”‚  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚        â”‚                â”‚  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                      â”‚        â–¼                â”‚  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                      â”‚  â”‚ NLB/ALB       â”‚     â”‚  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                      â”‚          â–¼             â”‚  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                      â”‚  â”‚ ECS/EC2/EKS  â”‚     â”‚  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                      â”‚  â”‚ (Private)     â”‚     â”‚  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  5. MOCK                                                     â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚  API Gateway tráº£ vá» response cá»‘ Ä‘á»‹nh               â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  (KhÃ´ng call backend)                               â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  Use cases:                                         â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Testing/Development                              â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ CORS preflight (OPTIONS)                        â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Health checks                                   â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ Authentication & Authorization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AUTHENTICATION & AUTHORIZATION                      â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  1. IAM AUTHORIZATION                                        â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚  Client â”€â”€(SigV4)â”€â”€â–¶ API Gateway â”€â”€â–¶ IAM â”€â”€â–¶ OK   â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ DÃ¹ng AWS credentials Ä‘á»ƒ sign request            â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Best for: AWS services, internal apps           â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ IAM Policy controls access                      â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  2. COGNITO USER POOLS                                       â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  1. User â”€â”€(login)â”€â”€â–¶ Cognito â”€â”€â–¶ JWT Token        â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  2. User â”€â”€(JWT)â”€â”€â–¶ API Gateway â”€â”€â–¶ Cognito â”€â”€â–¶ OK â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Fully managed user directory                    â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Built-in sign-up/sign-in                        â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Social login (Google, Facebook, Apple)          â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ MFA support                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Best for: Web/mobile apps                       â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  3. LAMBDA AUTHORIZER (Custom Authorizer)                   â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  Request â”€â”€â–¶ API Gateway â”€â”€â–¶ Lambda Authorizer     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                      â”‚              â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                               â–¼             â–¼       â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                            Allow         Deny       â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                               â”‚             â”‚       â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                               â–¼             â–¼       â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                          Backend       403 Error    â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  2 types:                                           â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Token-based: Validate JWT/OAuth tokens          â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  â€¢ Request-based: Check headers, query params      â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  Best for: Custom auth logic, 3rd party tokens     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âš¡ Tip: Enable caching to reduce Lambda calls     â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  4. API KEYS                                                 â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚     â”‚  Request (x-api-key: xxx) â”€â”€â–¶ API Gateway         â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  âš ï¸ KhÃ´ng pháº£i auth mechanism!                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚     API Keys chá»‰ dÃ¹ng Ä‘á»ƒ:                          â”‚    â”‚   â”‚
â”‚   â”‚     â”‚     â€¢ Identify clients                             â”‚    â”‚   â”‚
â”‚   â”‚     â”‚     â€¢ Track usage                                  â”‚    â”‚   â”‚
â”‚   â”‚     â”‚     â€¢ Apply quotas/throttling                      â”‚    â”‚   â”‚
â”‚   â”‚     â”‚                                                     â”‚    â”‚   â”‚
â”‚   â”‚     â”‚  LuÃ´n káº¿t há»£p vá»›i auth mechanism khÃ¡c!             â”‚    â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Lambda Authorizer Example

```python
# lambda_authorizer.py
import jwt
import os

SECRET_KEY = os.environ['JWT_SECRET']

def lambda_handler(event, context):
    """
    Token-based Lambda Authorizer
    """
    token = event.get('authorizationToken', '').replace('Bearer ', '')
    method_arn = event['methodArn']
    
    try:
        # Validate JWT token
        payload = jwt.decode(token, SECRET_KEY, algorithms=['HS256'])
        user_id = payload.get('sub')
        
        # Return IAM policy allowing access
        return generate_policy(user_id, 'Allow', method_arn)
        
    except jwt.ExpiredSignatureError:
        raise Exception('Unauthorized')  # 401
    except jwt.InvalidTokenError:
        raise Exception('Unauthorized')  # 401

def generate_policy(principal_id, effect, resource):
    return {
        'principalId': principal_id,
        'policyDocument': {
            'Version': '2012-10-17',
            'Statement': [{
                'Action': 'execute-api:Invoke',
                'Effect': effect,
                'Resource': resource
            }]
        },
        'context': {
            'userId': principal_id  # Pass to downstream Lambda
        }
    }
```

---

## âš¡ Features

### Caching

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       API GATEWAY CACHING                            â”‚
â”‚                    (REST API only)                                   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  Request â”€â”€â–¶ API Gateway â”€â”€â–¶ Cache Hit? â”€â”€â–¶ Return cached   â”‚   â”‚
â”‚   â”‚                                   â”‚                          â”‚   â”‚
â”‚   â”‚                                   â–¼ Miss                     â”‚   â”‚
â”‚   â”‚                              Backend â”€â”€â–¶ Cache â”€â”€â–¶ Return    â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  Configuration:                                               â”‚   â”‚
â”‚   â”‚  â€¢ Capacity: 0.5 GB to 237 GB                                â”‚   â”‚
â”‚   â”‚  â€¢ TTL: 0 to 3600 seconds (default 300s)                     â”‚   â”‚
â”‚   â”‚  â€¢ Per-method override                                        â”‚   â”‚
â”‚   â”‚  â€¢ Encryption option                                          â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  Cost: $0.020 - $3.800 per hour (depends on size)            â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  Cache Key:                                                   â”‚   â”‚
â”‚   â”‚  â€¢ URL path                                                   â”‚   â”‚
â”‚   â”‚  â€¢ Query strings (configurable)                              â”‚   â”‚
â”‚   â”‚  â€¢ Headers (configurable)                                    â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   âš¡ Cache Invalidation:                                             â”‚
â”‚   â€¢ Console: Flush entire stage cache                                â”‚
â”‚   â€¢ Client header: Cache-Control: max-age=0                         â”‚
â”‚      (Requires client to have IAM permission)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Throttling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       THROTTLING                                     â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  DEFAULT LIMITS (per region, per account):                   â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  â€¢ 10,000 requests/second (RPS)                              â”‚   â”‚
â”‚   â”‚  â€¢ 5,000 burst capacity                                      â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  CÃ³ thá»ƒ request tÄƒng qua AWS Support                        â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   THROTTLING LEVELS:                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚   Account Level (10,000/s)                                   â”‚   â”‚
â”‚   â”‚        â”‚                                                      â”‚   â”‚
â”‚   â”‚        â–¼                                                      â”‚   â”‚
â”‚   â”‚   Stage Level (configure per stage)                          â”‚   â”‚
â”‚   â”‚        â”‚                                                      â”‚   â”‚
â”‚   â”‚        â–¼                                                      â”‚   â”‚
â”‚   â”‚   Method Level (configure per method)                        â”‚   â”‚
â”‚   â”‚        â”‚                                                      â”‚   â”‚
â”‚   â”‚        â–¼                                                      â”‚   â”‚
â”‚   â”‚   Usage Plan (per API Key)                                   â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   When throttled: 429 Too Many Requests                              â”‚
â”‚                                                                       â”‚
â”‚   USAGE PLANS:                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Plan: Basic                                                 â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ Throttle: 100 requests/second                          â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ Burst: 200 requests                                    â”‚   â”‚
â”‚   â”‚  â””â”€â”€ Quota: 10,000 requests/month                           â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  Plan: Premium                                               â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ Throttle: 1,000 requests/second                        â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ Burst: 2,000 requests                                  â”‚   â”‚
â”‚   â”‚  â””â”€â”€ Quota: 1,000,000 requests/month                        â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CORS (Cross-Origin Resource Sharing)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CORS                                        â”‚
â”‚                                                                       â”‚
â”‚   Browser (https://myapp.com) â”€â”€â–¶ API (https://api.myapp.com)       â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  PREFLIGHT REQUEST (OPTIONS):                                â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  Browser â”€â”€(OPTIONS)â”€â”€â–¶ API Gateway                          â”‚   â”‚
â”‚   â”‚                               â”‚                              â”‚   â”‚
â”‚   â”‚                               â–¼                              â”‚   â”‚
â”‚   â”‚  Response Headers:                                           â”‚   â”‚
â”‚   â”‚  â€¢ Access-Control-Allow-Origin: https://myapp.com           â”‚   â”‚
â”‚   â”‚  â€¢ Access-Control-Allow-Methods: GET, POST, PUT             â”‚   â”‚
â”‚   â”‚  â€¢ Access-Control-Allow-Headers: Content-Type, Auth         â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  Sau Ä‘Ã³:                                                      â”‚   â”‚
â”‚   â”‚  Browser â”€â”€(GET/POST)â”€â”€â–¶ API Gateway â”€â”€â–¶ Backend            â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   HTTP API: CORS built-in, just enable                               â”‚
â”‚   REST API: Must configure manually or use Mock integration          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’° Pricing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       API GATEWAY PRICING                            â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  REST API                                                    â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ First 333 million requests/month: $3.50 / million      â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ Next 667 million: $2.80 / million                      â”‚   â”‚
â”‚   â”‚  â””â”€â”€ Over 1 billion: $2.38 / million                        â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  + Caching: $0.020 - $3.80 / hour (optional)                â”‚   â”‚
â”‚   â”‚  + Data transfer out: Standard AWS rates                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  HTTP API (70% cheaper!)                                     â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ First 300 million requests/month: $1.00 / million      â”‚   â”‚
â”‚   â”‚  â””â”€â”€ Over 300 million: $0.90 / million                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  WebSocket API                                               â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ Messages: $1.00 / million                              â”‚   â”‚
â”‚   â”‚  â””â”€â”€ Connection minutes: $0.25 / million                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   EXAMPLE CALCULATION:                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  10 million requests/month (HTTP API):                       â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  API Gateway: 10M Ã— $1.00/1M = $10.00                       â”‚   â”‚
â”‚   â”‚  Lambda (128MB, 100ms): ~$2.00                              â”‚   â”‚
â”‚   â”‚  DynamoDB (on-demand): ~$3.00                               â”‚   â”‚
â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚   â”‚
â”‚   â”‚  Total: ~$15/month for Serverless API                       â”‚   â”‚
â”‚   â”‚                                                               â”‚   â”‚
â”‚   â”‚  So vá»›i EC2 t3.medium 24/7: ~$30/month                      â”‚   â”‚
â”‚   â”‚  â†’ Serverless ráº» hÆ¡n 50%!                                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Best Practices

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API GATEWAY BEST PRACTICES                        â”‚
â”‚                                                                       â”‚
â”‚   1. CHOOSE THE RIGHT API TYPE                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  â€¢ Start with HTTP API (cheaper, simpler)                   â”‚   â”‚
â”‚   â”‚  â€¢ Use REST API only when you need:                         â”‚   â”‚
â”‚   â”‚    - API Keys, Usage Plans                                  â”‚   â”‚
â”‚   â”‚    - Caching                                                â”‚   â”‚
â”‚   â”‚    - Request transformation                                 â”‚   â”‚
â”‚   â”‚    - WAF integration                                        â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   2. USE LAMBDA PROXY INTEGRATION                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  â€¢ Simpler to set up                                        â”‚   â”‚
â”‚   â”‚  â€¢ Full control in Lambda (routing, validation)             â”‚   â”‚
â”‚   â”‚  â€¢ Easier testing (same event format)                       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   3. ENABLE CACHING FOR READ-HEAVY APIs                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  â€¢ Cache GET requests                                       â”‚   â”‚
â”‚   â”‚  â€¢ Set appropriate TTL                                      â”‚   â”‚
â”‚   â”‚  â€¢ Use Cache-Control headers                                â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   4. IMPLEMENT PROPER ERROR HANDLING                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  â€¢ Return proper HTTP status codes                          â”‚   â”‚
â”‚   â”‚  â€¢ Consistent error response format                         â”‚   â”‚
â”‚   â”‚  â€¢ Log errors to CloudWatch                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   5. USE STAGES FOR ENVIRONMENTS                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  â€¢ dev, staging, prod stages                                â”‚   â”‚
â”‚   â”‚  â€¢ Stage variables for configuration                        â”‚   â”‚
â”‚   â”‚  â€¢ Different Lambda aliases per stage                       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   6. SECURITY                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  â€¢ Enable CloudWatch logging                                â”‚   â”‚
â”‚   â”‚  â€¢ Use WAF for protection                                   â”‚   â”‚
â”‚   â”‚  â€¢ Set up throttling                                        â”‚   â”‚
â”‚   â”‚  â€¢ Use HTTPS only (default)                                 â”‚   â”‚
â”‚   â”‚  â€¢ Implement proper CORS                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚   7. MONITORING                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Key CloudWatch Metrics:                                    â”‚   â”‚
â”‚   â”‚  â€¢ Count (request count)                                    â”‚   â”‚
â”‚   â”‚  â€¢ 4XXError, 5XXError                                       â”‚   â”‚
â”‚   â”‚  â€¢ Latency, IntegrationLatency                             â”‚   â”‚
â”‚   â”‚  â€¢ CacheHitCount, CacheMissCount                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Hands-on Examples

### Example 1: REST API with Lambda (SAM Template)

```yaml
# template.yaml
AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31

Resources:
  # Lambda Function
  UsersFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: app.lambda_handler
      Runtime: python3.11
      CodeUri: ./src
      Events:
        GetUsers:
          Type: Api
          Properties:
            Path: /users
            Method: GET
        CreateUser:
          Type: Api
          Properties:
            Path: /users
            Method: POST
        GetUser:
          Type: Api
          Properties:
            Path: /users/{id}
            Method: GET

Outputs:
  ApiUrl:
    Value: !Sub "https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/"
```

### Example 2: Lambda Handler for API Gateway

```python
# app.py
import json
import boto3
from decimal import Decimal

dynamodb = boto3.resource('dynamodb')
table = dynamodb.Table('Users')

def lambda_handler(event, context):
    """
    REST API handler vá»›i Lambda Proxy Integration
    """
    http_method = event['httpMethod']
    path = event['path']
    path_params = event.get('pathParameters') or {}
    
    try:
        if http_method == 'GET' and path == '/users':
            return get_all_users()
        
        elif http_method == 'GET' and 'id' in path_params:
            return get_user(path_params['id'])
        
        elif http_method == 'POST' and path == '/users':
            body = json.loads(event['body'])
            return create_user(body)
        
        else:
            return response(404, {'error': 'Not Found'})
            
    except Exception as e:
        print(f"Error: {e}")
        return response(500, {'error': str(e)})

def get_all_users():
    result = table.scan()
    return response(200, result.get('Items', []))

def get_user(user_id):
    result = table.get_item(Key={'id': user_id})
    if 'Item' in result:
        return response(200, result['Item'])
    return response(404, {'error': 'User not found'})

def create_user(data):
    table.put_item(Item=data)
    return response(201, {'message': 'User created', 'user': data})

def response(status_code, body):
    """
    Format response cho API Gateway Proxy Integration
    """
    return {
        'statusCode': status_code,
        'headers': {
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*',  # CORS
            'Access-Control-Allow-Headers': 'Content-Type',
            'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE'
        },
        'body': json.dumps(body, default=str)
    }
```

### Example 3: HTTP API with JWT Auth (CDK)

```typescript
// lib/api-stack.ts
import * as cdk from 'aws-cdk-lib';
import * as lambda from 'aws-cdk-lib/aws-lambda';
import * as apigwv2 from '@aws-cdk/aws-apigatewayv2-alpha';
import * as integrations from '@aws-cdk/aws-apigatewayv2-integrations-alpha';
import * as authorizers from '@aws-cdk/aws-apigatewayv2-authorizers-alpha';

export class ApiStack extends cdk.Stack {
  constructor(scope: cdk.App, id: string) {
    super(scope, id);

    // Lambda function
    const handler = new lambda.Function(this, 'Handler', {
      runtime: lambda.Runtime.NODEJS_18_X,
      handler: 'index.handler',
      code: lambda.Code.fromAsset('lambda'),
    });

    // HTTP API with JWT authorizer
    const httpApi = new apigwv2.HttpApi(this, 'HttpApi', {
      corsPreflight: {
        allowOrigins: ['*'],
        allowMethods: [apigwv2.CorsHttpMethod.ANY],
        allowHeaders: ['Authorization', 'Content-Type'],
      },
    });

    // JWT Authorizer (Cognito or any OIDC provider)
    const authorizer = new authorizers.HttpJwtAuthorizer(
      'JwtAuthorizer',
      'https://cognito-idp.{region}.amazonaws.com/{userPoolId}',
      {
        jwtAudience: ['your-app-client-id'],
      }
    );

    // Routes
    httpApi.addRoutes({
      path: '/users',
      methods: [apigwv2.HttpMethod.GET, apigwv2.HttpMethod.POST],
      integration: new integrations.HttpLambdaIntegration('UsersIntegration', handler),
      authorizer: authorizer,
    });

    new cdk.CfnOutput(this, 'ApiUrl', {
      value: httpApi.url!,
    });
  }
}
```

### Example 4: Direct Integration vá»›i DynamoDB (khÃ´ng cáº§n Lambda)

```yaml
# API Gateway â†’ DynamoDB (no Lambda!)
# CloudFormation snippet

Resources:
  ApiGatewayDynamoDBRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Effect: Allow
            Principal:
              Service: apigateway.amazonaws.com
            Action: sts:AssumeRole
      Policies:
        - PolicyName: DynamoDBAccess
          PolicyDocument:
            Statement:
              - Effect: Allow
                Action:
                  - dynamodb:PutItem
                  - dynamodb:GetItem
                Resource: !GetAtt UsersTable.Arn

  # PUT /items â†’ DynamoDB PutItem
  PutItemMethod:
    Type: AWS::ApiGateway::Method
    Properties:
      RestApiId: !Ref Api
      ResourceId: !Ref ItemsResource
      HttpMethod: PUT
      AuthorizationType: NONE
      Integration:
        Type: AWS
        IntegrationHttpMethod: POST
        Uri: !Sub arn:aws:apigateway:${AWS::Region}:dynamodb:action/PutItem
        Credentials: !GetAtt ApiGatewayDynamoDBRole.Arn
        RequestTemplates:
          application/json: |
            {
              "TableName": "Items",
              "Item": {
                "id": {"S": "$input.path('$.id')"},
                "name": {"S": "$input.path('$.name')"}
              }
            }
        IntegrationResponses:
          - StatusCode: 200
            ResponseTemplates:
              application/json: '{"message": "Item saved"}'
      MethodResponses:
        - StatusCode: 200
```

---

## ğŸ”— LiÃªn káº¿t

- [Lambda](./lambda.md) - Serverless compute
- [DynamoDB](./dynamodb.md) - NoSQL database
- [Cognito](./cognito.md) - User authentication
- [Step Functions](./step-functions.md) - Workflow orchestration

---

## ğŸ¯ Key Takeaways

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  API GATEWAY KEY POINTS                              â”‚
â”‚                                                                       â”‚
â”‚  1. 3 TYPES OF APIs                                                   â”‚
â”‚     â€¢ HTTP API: Simple, cheap ($1/million), recommended             â”‚
â”‚     â€¢ REST API: Full-featured ($3.50/million)                       â”‚
â”‚     â€¢ WebSocket: Real-time bidirectional                             â”‚
â”‚                                                                       â”‚
â”‚  2. INTEGRATION TYPES                                                 â”‚
â”‚     â€¢ Lambda Proxy (most common)                                     â”‚
â”‚     â€¢ HTTP Proxy                                                      â”‚
â”‚     â€¢ AWS Service (direct DynamoDB, S3, etc.)                        â”‚
â”‚     â€¢ VPC Link (private resources)                                   â”‚
â”‚                                                                       â”‚
â”‚  3. AUTHENTICATION                                                    â”‚
â”‚     â€¢ IAM: AWS services, internal                                    â”‚
â”‚     â€¢ Cognito: Web/mobile apps                                       â”‚
â”‚     â€¢ Lambda Authorizer: Custom logic                                â”‚
â”‚     â€¢ API Keys: NOT for auth, only identity/throttling              â”‚
â”‚                                                                       â”‚
â”‚  4. KEY FEATURES                                                      â”‚
â”‚     â€¢ Caching (REST API only)                                        â”‚
â”‚     â€¢ Throttling (protect backend)                                   â”‚
â”‚     â€¢ Stages (dev/staging/prod)                                      â”‚
â”‚     â€¢ CORS support                                                    â”‚
â”‚                                                                       â”‚
â”‚  5. BEST PRACTICES                                                    â”‚
â”‚     â€¢ Start with HTTP API                                            â”‚
â”‚     â€¢ Use Lambda Proxy integration                                   â”‚
â”‚     â€¢ Enable caching for reads                                       â”‚
â”‚     â€¢ Monitor with CloudWatch                                        â”‚
â”‚     â€¢ Set proper throttling limits                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
