# Amazon Redshift

## Má»¥c lá»¥c

- [Redshift lÃ  gÃ¬?](#redshift-lÃ -gÃ¬)
- [Kiáº¿n trÃºc Redshift](#kiáº¿n-trÃºc-redshift)
- [Provisioned vs Serverless](#provisioned-vs-serverless)
- [Node Types](#node-types)
- [Data Distribution vÃ  Sort Keys](#data-distribution-vÃ -sort-keys)
- [Redshift Spectrum](#redshift-spectrum)
- [Zero-ETL Integration](#zero-etl-integration)
- [Concurrency Scaling](#concurrency-scaling)
- [Data Sharing](#data-sharing)
- [Redshift ML](#redshift-ml)
- [Báº£o máº­t](#báº£o-máº­t)
- [Chi phÃ­](#chi-phÃ­)
- [So sÃ¡nh vá»›i cÃ¡c dá»‹ch vá»¥ khÃ¡c](#so-sÃ¡nh-vá»›i-cÃ¡c-dá»‹ch-vá»¥-khÃ¡c)
- [Best Practices](#best-practices)
- [Exam Tips](#exam-tips)

---

## Redshift lÃ  gÃ¬?

**Amazon Redshift** lÃ  dá»‹ch vá»¥ **Data Warehouse** Ä‘Æ°á»£c quáº£n lÃ½ hoÃ n toÃ n bá»Ÿi AWS, Ä‘Æ°á»£c thiáº¿t káº¿ cho **OLAP (Online Analytical Processing)** - phÃ¢n tÃ­ch dá»¯ liá»‡u lá»›n vá»›i quy mÃ´ petabyte.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Data Warehouse Concept                            â”‚
â”‚                                                                      â”‚
â”‚   OLTP (Transactional)              OLAP (Analytical)               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚   - INSERT, UPDATE, DELETE           - SELECT, aggregate            â”‚
â”‚   - Nhiá»u transaction nhá»            - Ãt query nhÆ°ng phá»©c táº¡p      â”‚
â”‚   - RDS, Aurora, DynamoDB            - Redshift, Athena             â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚  App Database    â”‚   â”€â”€ETLâ”€â”€â–º   â”‚  Data Warehouse  â”‚            â”‚
â”‚   â”‚  (OLTP)          â”‚              â”‚  (OLAP)          â”‚            â”‚
â”‚   â”‚                  â”‚              â”‚                  â”‚            â”‚
â”‚   â”‚  Orders          â”‚              â”‚  Analytics       â”‚            â”‚
â”‚   â”‚  Customers       â”‚              â”‚  Reports         â”‚            â”‚
â”‚   â”‚  Products        â”‚              â”‚  BI Dashboard    â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Äáº·c Ä‘iá»ƒm chÃ­nh

| Äáº·c Ä‘iá»ƒm | MÃ´ táº£ |
|----------|-------|
| **Columnar Storage** | LÆ°u trá»¯ theo cá»™t, tá»‘i Æ°u cho query analytical |
| **MPP (Massively Parallel Processing)** | Xá»­ lÃ½ song song trÃªn nhiá»u node |
| **Petabyte Scale** | Xá»­ lÃ½ dá»¯ liá»‡u tá»« GB Ä‘áº¿n PB |
| **SQL Compatible** | DÃ¹ng PostgreSQL-compatible SQL |
| **BI Integration** | TÃ­ch há»£p vá»›i QuickSight, Tableau, Power BI... |
| **Data Lakehouse** | Káº¿t há»£p data lake (S3) + data warehouse |

### Columnar vs Row Storage

```
ROW-BASED STORAGE (OLTP - RDS, Aurora):
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID   â”‚ Name   â”‚ Amount  â”‚ Date   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1    â”‚ Alice  â”‚ 100     â”‚ Jan    â”‚ â† Row 1
â”‚ 2    â”‚ Bob    â”‚ 200     â”‚ Feb    â”‚ â† Row 2
â”‚ 3    â”‚ Carol  â”‚ 150     â”‚ Mar    â”‚ â† Row 3
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†’ Tá»‘t cho: SELECT * FROM orders WHERE id = 1

COLUMNAR STORAGE (OLAP - Redshift):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID Column:     [1, 2, 3, ...]        â”‚ â† Äá»c riÃªng
â”‚ Name Column:   [Alice, Bob, Carol]   â”‚
â”‚ Amount Column: [100, 200, 150, ...]  â”‚ â† Chá»‰ Ä‘á»c cá»™t nÃ y
â”‚ Date Column:   [Jan, Feb, Mar, ...]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†’ Tá»‘t cho: SELECT SUM(amount) FROM orders
â†’ Chá»‰ Ä‘á»c 1 cá»™t thay vÃ¬ toÃ n bá»™ row
â†’ Compression tá»‘t hÆ¡n (dá»¯ liá»‡u cÃ¹ng type)
```

---

## Kiáº¿n trÃºc Redshift

### Cluster Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Redshift Cluster                              â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                      LEADER NODE                             â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  - Nháº­n query tá»« client                                      â”‚   â”‚
â”‚   â”‚  - Parse vÃ  optimize query                                   â”‚   â”‚
â”‚   â”‚  - Táº¡o execution plan                                        â”‚   â”‚
â”‚   â”‚  - PhÃ¢n phá»‘i task Ä‘áº¿n compute nodes                          â”‚   â”‚
â”‚   â”‚  - Aggregate káº¿t quáº£                                         â”‚   â”‚
â”‚   â”‚  - Tráº£ vá» káº¿t quáº£ cho client                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                       â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚              â”‚               â”‚               â”‚                      â”‚
â”‚              â–¼               â–¼               â–¼                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚ COMPUTE NODE 1â”‚ â”‚ COMPUTE NODE 2â”‚ â”‚ COMPUTE NODE 3â”‚            â”‚
â”‚   â”‚               â”‚ â”‚               â”‚ â”‚               â”‚            â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚            â”‚
â”‚   â”‚ â”‚  Slice 1  â”‚ â”‚ â”‚ â”‚  Slice 1  â”‚ â”‚ â”‚ â”‚  Slice 1  â”‚ â”‚            â”‚
â”‚   â”‚ â”‚  Slice 2  â”‚ â”‚ â”‚ â”‚  Slice 2  â”‚ â”‚ â”‚ â”‚  Slice 2  â”‚ â”‚            â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚            â”‚
â”‚   â”‚               â”‚ â”‚               â”‚ â”‚               â”‚            â”‚
â”‚   â”‚  Store data   â”‚ â”‚  Store data   â”‚ â”‚  Store data   â”‚            â”‚
â”‚   â”‚  Execute      â”‚ â”‚  Execute      â”‚ â”‚  Execute      â”‚            â”‚
â”‚   â”‚  queries      â”‚ â”‚  queries      â”‚ â”‚  queries      â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                      â”‚
â”‚                    Redshift Managed Storage (RMS)                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         Amazon S3                            â”‚   â”‚
â”‚   â”‚              (Durable storage cho RA3 nodes)                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ThÃ nh pháº§n chÃ­nh

| Component | MÃ´ táº£ |
|-----------|-------|
| **Leader Node** | Nháº­n query, optimize, phÃ¢n phá»‘i task, aggregate káº¿t quáº£ |
| **Compute Nodes** | LÆ°u trá»¯ data, thá»±c thi query song song |
| **Slices** | PhÃ¢n vÃ¹ng nhá» trong má»—i compute node, xá»­ lÃ½ Ä‘á»™c láº­p |
| **Redshift Managed Storage (RMS)** | S3-backed storage cho RA3 nodes |

---

## Provisioned vs Serverless

### So sÃ¡nh

| TiÃªu chÃ­ | Provisioned | Serverless |
|----------|-------------|------------|
| **Quáº£n lÃ½** | Báº¡n chá»n sá»‘ lÆ°á»£ng, type node | AWS tá»± Ä‘á»™ng quáº£n lÃ½ |
| **Scaling** | Manual hoáº·c Elastic Resize | Tá»± Ä‘á»™ng scale |
| **Billing** | Per node-hour | Per RPU-second |
| **Use case** | Workload á»•n Ä‘á»‹nh, predictable | Variable, unpredictable workload |
| **Setup** | Phá»©c táº¡p hÆ¡n | ÄÆ¡n giáº£n, nhanh |
| **Reserved pricing** | âœ… CÃ³ (lÃªn Ä‘áº¿n 75% discount) | âœ… CÃ³ (lÃªn Ä‘áº¿n 24% discount) |

### Provisioned Cluster

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PROVISIONED CLUSTER                          â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ ra3.xlplus  â”‚  â”‚ ra3.xlplus  â”‚  â”‚ ra3.xlplus  â”‚             â”‚
â”‚   â”‚    Node 1   â”‚  â”‚    Node 2   â”‚  â”‚    Node 3   â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                  â”‚
â”‚   Chi phÃ­: $1.086/hour Ã— 3 nodes = $3.258/hour                  â”‚
â”‚   LuÃ´n cháº¡y 24/7 dÃ¹ khÃ´ng query                                 â”‚
â”‚                                                                  â”‚
â”‚   âœ… Predictable cost                                            â”‚
â”‚   âœ… Reserved Instances discount (up to 75%)                     â”‚
â”‚   âŒ Tráº£ tiá»n khi idle                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Serverless

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     REDSHIFT SERVERLESS                          â”‚
â”‚                                                                  â”‚
â”‚   Workload â”€â”€â”€â”€â”€â–º â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚                   â”‚  AWS tá»± Ä‘á»™ng provision        â”‚             â”‚
â”‚                   â”‚  8 RPU â”€â”€â–º 128 RPU â”€â”€â–º 8 RPU  â”‚             â”‚
â”‚                   â”‚           (scale)              â”‚             â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                  â”‚
â”‚   RPU = Redshift Processing Unit                                â”‚
â”‚   Chi phÃ­: $0.375/RPU-hour (us-east-1)                          â”‚
â”‚   Base 8 RPU = $3.00/hour khi active                            â”‚
â”‚                                                                  â”‚
â”‚   âœ… Chá»‰ tráº£ khi query                                           â”‚
â”‚   âœ… Auto scaling                                                 â”‚
â”‚   âœ… KhÃ´ng cáº§n quáº£n lÃ½ infrastructure                            â”‚
â”‚   âŒ CÃ³ thá»ƒ Ä‘áº¯t hÆ¡n vá»›i workload á»•n Ä‘á»‹nh 24/7                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Khi nÃ o chá»n cÃ¡i nÃ o?

| TÃ¬nh huá»‘ng | Recommendation |
|------------|----------------|
| Workload 24/7, á»•n Ä‘á»‹nh | ğŸ† **Provisioned + Reserved** |
| Workload peak hours (8h/ngÃ y) | ğŸ† **Serverless** |
| POC, development, testing | ğŸ† **Serverless** |
| Unpredictable workload | ğŸ† **Serverless** |
| Budget háº¡n cháº¿, cáº§n optimize | TÃ­nh toÃ¡n so sÃ¡nh |

---

## Node Types

### RA3 Nodes (Recommended)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          RA3 NODES                               â”‚
â”‚                    (Managed Storage - RMS)                       â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ RA3 Node    â”‚â—„â”€â”€ Hot data â”€â”€â”€â”€â”€â”€â–ºâ”‚ Local SSD Cache     â”‚   â”‚
â”‚   â”‚             â”‚                     â”‚ (Fast access)       â”‚   â”‚
â”‚   â”‚             â”‚â—„â”€â”€ Warm/Cold â”€â”€â”€â”€â”€â–ºâ”‚ Amazon S3 (RMS)     â”‚   â”‚
â”‚   â”‚             â”‚     data            â”‚ (Unlimited storage) â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚   âœ… Compute vÃ  Storage scale Ä‘á»™c láº­p                            â”‚
â”‚   âœ… Chá»‰ tráº£ storage theo GB thá»±c táº¿ dÃ¹ng                        â”‚
â”‚   âœ… Automatic data tiering                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Node Type | vCPU | Memory | Storage | Price/hour |
|-----------|------|--------|---------|------------|
| ra3.xlplus | 4 | 32 GB | RMS | ~$1.086 |
| ra3.4xlarge | 12 | 96 GB | RMS | ~$3.26 |
| ra3.16xlarge | 48 | 384 GB | RMS | ~$13.04 |

### DC2 Nodes (Dense Compute)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DC2 NODES                               â”‚
â”‚                     (Local SSD Storage)                          â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚ DC2 Node                                     â”‚               â”‚
â”‚   â”‚                                              â”‚               â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚               â”‚
â”‚   â”‚  â”‚        Local NVMe SSD                â”‚    â”‚               â”‚
â”‚   â”‚  â”‚        (Fixed storage per node)      â”‚    â”‚               â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                  â”‚
â”‚   âœ… Fastest performance (all data local)                        â”‚
â”‚   âœ… Tá»‘t cho datasets < 1TB uncompressed                         â”‚
â”‚   âŒ Storage fixed, scale báº±ng cÃ¡ch thÃªm nodes                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Node Type | vCPU | Memory | Storage | Price/hour |
|-----------|------|--------|---------|------------|
| dc2.large | 2 | 15 GB | 160 GB SSD | ~$0.25 |
| dc2.8xlarge | 32 | 244 GB | 2.56 TB SSD | ~$4.80 |

### Chá»n node nÃ o?

| TiÃªu chÃ­ | Recommendation |
|----------|----------------|
| Data < 1TB, performance critical | DC2 |
| Data growing, cáº§n flexibility | **RA3** (recommended) |
| Muá»‘n scale compute riÃªng storage | **RA3** |
| Budget limited, small dataset | DC2.large |

---

## Data Distribution vÃ  Sort Keys

### Distribution Styles

CÃ¡ch Redshift phÃ¢n phá»‘i data giá»¯a cÃ¡c nodes quyáº¿t Ä‘á»‹nh performance cá»§a JOIN vÃ  aggregation.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DISTRIBUTION STYLES                           â”‚
â”‚                                                                  â”‚
â”‚  1. KEY Distribution                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚     Rows vá»›i cÃ¹ng key value â†’ cÃ¹ng node                         â”‚
â”‚     Tá»‘t cho: JOIN trÃªn cÃ¹ng key                                 â”‚
â”‚                                                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚ Node 1  â”‚    â”‚ Node 2  â”‚    â”‚ Node 3  â”‚                   â”‚
â”‚     â”‚ key=A   â”‚    â”‚ key=B   â”‚    â”‚ key=C   â”‚                   â”‚
â”‚     â”‚ key=A   â”‚    â”‚ key=B   â”‚    â”‚ key=C   â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â”‚  2. ALL Distribution                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚     Copy toÃ n bá»™ table Ä‘áº¿n má»i node                             â”‚
â”‚     Tá»‘t cho: Dimension tables nhá»                               â”‚
â”‚                                                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚ Full    â”‚    â”‚ Full    â”‚    â”‚ Full    â”‚                   â”‚
â”‚     â”‚ table   â”‚    â”‚ table   â”‚    â”‚ table   â”‚                   â”‚
â”‚     â”‚ copy    â”‚    â”‚ copy    â”‚    â”‚ copy    â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â”‚  3. EVEN Distribution (default)                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚     Round-robin phÃ¢n Ä‘á»u rows                                   â”‚
â”‚     Tá»‘t cho: Tables khÃ´ng JOIN thÆ°á»ng xuyÃªn                     â”‚
â”‚                                                                  â”‚
â”‚  4. AUTO Distribution                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚     Redshift tá»± chá»n EVEN hoáº·c ALL                              â”‚
â”‚     Recommended: Äá»ƒ Redshift quyáº¿t Ä‘á»‹nh                         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sort Keys

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SORT KEYS                                 â”‚
â”‚                                                                  â”‚
â”‚  Compound Sort Key:                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚  SORTKEY (date, region, product_id)                             â”‚
â”‚                                                                  â”‚
â”‚  Data sorted: date â†’ region â†’ product_id                        â”‚
â”‚  âœ… Tá»‘t khi filter theo thá»© tá»±: date, hoáº·c date+region          â”‚
â”‚  âŒ KhÃ´ng hiá»‡u quáº£ náº¿u chá»‰ filter region                         â”‚
â”‚                                                                  â”‚
â”‚  Interleaved Sort Key:                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚  INTERLEAVED SORTKEY (date, region, product_id)                 â”‚
â”‚                                                                  â”‚
â”‚  âœ… Filter theo báº¥t ká»³ column nÃ o Ä‘á»u hiá»‡u quáº£                  â”‚
â”‚  âŒ Cháº­m hÆ¡n khi load data                                       â”‚
â”‚  âŒ Cáº§n VACUUM thÆ°á»ng xuyÃªn                                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Best Practices

| Scenario | Recommendation |
|----------|----------------|
| Time-series data | **Compound** sort key (date first) |
| Multi-dimension filtering | **Interleaved** sort key |
| Large fact table JOIN | **KEY** distribution (join column) |
| Small dimension table | **ALL** distribution |
| Don't know | **AUTO** (let Redshift decide) |

---

## Redshift Spectrum

**Redshift Spectrum** cho phÃ©p query data trá»±c tiáº¿p trÃªn **S3** mÃ  khÃ´ng cáº§n load vÃ o Redshift.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      REDSHIFT SPECTRUM                           â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚   â”‚ Redshift      â”‚                                             â”‚
â”‚   â”‚ Cluster       â”‚                                             â”‚
â”‚   â”‚               â”‚   SELECT * FROM                              â”‚
â”‚   â”‚               â”‚   spectrum_schema.s3_table                   â”‚
â”‚   â”‚               â”‚   WHERE date > '2024-01-01'                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚           â”‚                                                      â”‚
â”‚           â–¼                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚            Spectrum Layer                      â”‚             â”‚
â”‚   â”‚  (Thousands of nodes for parallel processing) â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚           â”‚                                                      â”‚
â”‚           â–¼                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                      Amazon S3                           â”‚   â”‚
â”‚   â”‚                                                          â”‚   â”‚
â”‚   â”‚  s3://my-bucket/data/                                    â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ sales/                                              â”‚   â”‚
â”‚   â”‚  â”‚   â”œâ”€â”€ year=2024/month=01/ (Parquet, ORC, JSON, CSV)  â”‚   â”‚
â”‚   â”‚  â”‚   â”œâ”€â”€ year=2024/month=02/                            â”‚   â”‚
â”‚   â”‚  â”‚   â””â”€â”€ ...                                             â”‚   â”‚
â”‚   â”‚  â””â”€â”€ customers/                                          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚   Chi phÃ­: $5.00 / TB data scanned                              â”‚
â”‚                                                                  â”‚
â”‚   âœ… Query data trá»±c tiáº¿p trÃªn S3                                â”‚
â”‚   âœ… KhÃ´ng cáº§n load data vÃ o Redshift                            â”‚
â”‚   âœ… Tiáº¿t kiá»‡m storage cost                                      â”‚
â”‚   âœ… Partition pruning (chá»‰ scan partitions cáº§n thiáº¿t)          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Khi nÃ o dÃ¹ng Spectrum?

| Scenario | Recommendation |
|----------|----------------|
| Historical data, Ã­t query | ğŸ† Spectrum (S3) |
| Hot data, query thÆ°á»ng xuyÃªn | Redshift tables |
| Data lake integration | ğŸ† Spectrum |
| Ad-hoc exploration | ğŸ† Spectrum |

---

## Zero-ETL Integration

**Zero-ETL** lÃ  tÃ­nh nÄƒng má»›i cho phÃ©p replicate data tá»« operational databases vÃ o Redshift **tá»± Ä‘á»™ng**, khÃ´ng cáº§n xÃ¢y dá»±ng ETL pipeline.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ZERO-ETL INTEGRATION                       â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         Automatic         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚               â”‚         Replication        â”‚               â”‚ â”‚
â”‚   â”‚    Aurora     â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–ºâ”‚   Redshift    â”‚ â”‚
â”‚   â”‚   MySQL       â”‚                            â”‚               â”‚ â”‚
â”‚   â”‚   PostgreSQL  â”‚   - No ETL code needed     â”‚   Analytics   â”‚ â”‚
â”‚   â”‚               â”‚   - Near real-time         â”‚   & BI        â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   - Incremental sync       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         Automatic         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚    RDS for    â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–ºâ”‚   Redshift    â”‚ â”‚
â”‚   â”‚    MySQL      â”‚                            â”‚               â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         Automatic         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚   DynamoDB    â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–ºâ”‚   Redshift    â”‚ â”‚
â”‚   â”‚               â”‚                            â”‚               â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚   âœ… KhÃ´ng cáº§n viáº¿t ETL code                                     â”‚
â”‚   âœ… Near real-time analytics                                    â”‚
â”‚   âœ… Automatic schema sync                                       â”‚
â”‚   âœ… KhÃ´ng cÃ³ phÃ­ riÃªng (chá»‰ tráº£ Redshift + source DB)          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Supported Sources

| Source | Status |
|--------|--------|
| Amazon Aurora MySQL | âœ… GA |
| Amazon Aurora PostgreSQL | âœ… GA |
| Amazon RDS for MySQL | âœ… GA |
| Amazon DynamoDB | âœ… GA |

---

## Concurrency Scaling

**Concurrency Scaling** tá»± Ä‘á»™ng thÃªm capacity khi cÃ³ quÃ¡ nhiá»u concurrent queries.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONCURRENCY SCALING                           â”‚
â”‚                                                                  â”‚
â”‚   Normal Load:                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚ Main Clusterâ”‚â—„â”€â”€ 10 queries â”€â”€â–º OK                          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                  â”‚
â”‚   Peak Load (queue building up):                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Main Clusterâ”‚         â”‚ Concurrency Scaling Cluster â”‚       â”‚
â”‚   â”‚             â”‚â—„â”€â”€ 50 queries â”€â”€â”€â–º                    â”‚       â”‚
â”‚   â”‚             â”‚    Auto offload   â”‚ Temporary cluster â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ (scale out)       â”‚       â”‚
â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                  â”‚
â”‚   âœ… Tá»± Ä‘á»™ng, khÃ´ng cáº§n cáº¥u hÃ¬nh                                 â”‚
â”‚   âœ… 1 giá» miá»…n phÃ­/ngÃ y cho háº§u háº¿t clusters                    â”‚
â”‚   ğŸ’° Sau Ä‘Ã³ tÃ­nh theo on-demand rate                             â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Sharing

**Data Sharing** cho phÃ©p chia sáº» data giá»¯a cÃ¡c Redshift clusters/serverless mÃ  **khÃ´ng cáº§n copy data**.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATA SHARING                              â”‚
â”‚                                                                  â”‚
â”‚   Producer Cluster                    Consumer Clusters          â”‚
â”‚   (Account A)                         (Account A, B, C)          â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚                 â”‚   Datashare    â”‚  BI Cluster     â”‚        â”‚
â”‚   â”‚   Production    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  (Read-only)    â”‚        â”‚
â”‚   â”‚   Warehouse     â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   â”‚                 â”‚                                            â”‚
â”‚   â”‚   "Main data"   â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚                 â”‚   Datashare    â”‚  Data Science   â”‚        â”‚
â”‚   â”‚                 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Cluster        â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â”‚   âœ… Live data (khÃ´ng copy)                                      â”‚
â”‚   âœ… Cross-account, cross-region                                 â”‚
â”‚   âœ… Consumer tráº£ compute, Producer giá»¯ data                     â”‚
â”‚   âœ… Granular access control                                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Use Cases

| Scenario | Giáº£i thÃ­ch |
|----------|------------|
| **Multi-tenant SaaS** | Má»—i tenant cÃ³ cluster riÃªng, Ä‘á»c tá»« shared data |
| **BI vs ETL separation** | BI team Ä‘á»c tá»« shared data, khÃ´ng áº£nh hÆ°á»Ÿng ETL |
| **Cross-account analytics** | Share data vá»›i partners, subsidiaries |

---

## Redshift ML

**Redshift ML** cho phÃ©p train vÃ  deploy ML models trá»±c tiáº¿p trong Redshift báº±ng SQL.

```sql
-- 1. Create model
CREATE MODEL customer_churn_model
FROM training_data
TARGET churn
FUNCTION predict_churn
IAM_ROLE 'arn:aws:iam::123456789:role/RedshiftML';

-- 2. Use model in queries
SELECT customer_id, 
       predict_churn(customer_id, tenure, monthly_charges)
FROM customers
WHERE predict_churn(...) = 1;
```

| Feature | MÃ´ táº£ |
|---------|-------|
| **AutoML** | Tá»± Ä‘á»™ng chá»n algorithm, tune hyperparameters |
| **Bring Your Own Model** | Import models tá»« SageMaker |
| **SQL Interface** | KhÃ´ng cáº§n biáº¿t Python/ML frameworks |
| **Pricing** | $20/million cells (first 10M) |

---

## Báº£o máº­t

### Security Features

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      REDSHIFT SECURITY                           â”‚
â”‚                                                                  â”‚
â”‚   Network Security:                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚                    VPC                       â”‚               â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚               â”‚
â”‚   â”‚  â”‚          Private Subnet              â”‚    â”‚               â”‚
â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚               â”‚
â”‚   â”‚  â”‚  â”‚    Redshift Cluster          â”‚    â”‚    â”‚               â”‚
â”‚   â”‚  â”‚  â”‚    (No public access)        â”‚    â”‚    â”‚               â”‚
â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚               â”‚
â”‚   â”‚  â”‚              â”‚                       â”‚    â”‚               â”‚
â”‚   â”‚  â”‚              â–¼                       â”‚    â”‚               â”‚
â”‚   â”‚  â”‚       Security Group                 â”‚    â”‚               â”‚
â”‚   â”‚  â”‚    (Port 5439 from app)              â”‚    â”‚               â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                  â”‚
â”‚   Encryption:                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚   - At rest: AES-256 (KMS or HSM)                               â”‚
â”‚   - In transit: SSL/TLS                                         â”‚
â”‚                                                                  â”‚
â”‚   Access Control:                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚   - IAM for cluster management                                  â”‚
â”‚   - Database users/groups for data access                       â”‚
â”‚   - Row-level security (RLS)                                    â”‚
â”‚   - Column-level security (Dynamic Data Masking)                â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Access Control Options

| Feature | MÃ´ táº£ |
|---------|-------|
| **IAM Integration** | authenticate vá»›i IAM users/roles |
| **AWS IAM Identity Center** | SSO cho federated users |
| **Row-Level Security** | Filter rows based on user |
| **Column-Level Security** | Grant access Ä‘áº¿n specific columns |
| **Dynamic Data Masking** | Mask sensitive data (PII, etc.) |

---

## Chi phÃ­

### Provisioned Pricing (us-east-1)

| Node Type | On-Demand/hour | 1-yr Reserved | 3-yr Reserved |
|-----------|----------------|---------------|---------------|
| dc2.large | $0.25 | $0.145 (-42%) | $0.063 (-75%) |
| ra3.xlplus | $1.086 | $0.63 (-42%) | $0.27 (-75%) |
| ra3.4xlarge | $3.26 | $1.89 (-42%) | $0.82 (-75%) |

**Managed Storage (RMS):** $0.024/GB-month

### Serverless Pricing

| Component | Price |
|-----------|-------|
| **RPU-hour** | ~$0.375 (base 8 RPU = $3/hour) |
| **Managed Storage** | $0.024/GB-month |
| **Spectrum** | Included in RPU |
| **Concurrency Scaling** | Included in RPU |

### VÃ­ dá»¥ tÃ­nh chi phÃ­

**Provisioned (2 x ra3.xlplus, 24/7):**
```
On-Demand:
  $1.086 Ã— 2 nodes Ã— 24h Ã— 30 days = $1,563/month
  + Storage 1TB: $0.024 Ã— 1000 = $24/month
  Total: ~$1,587/month

3-year Reserved:
  $0.27 Ã— 2 Ã— 24 Ã— 30 = $389/month
  + Storage: $24/month
  Total: ~$413/month (74% savings!)
```

**Serverless (8 hours/day, 8 RPU base):**
```
  $0.375 Ã— 8 RPU Ã— 8 hours Ã— 22 workdays = $528/month
  + Storage 1TB: $24/month
  Total: ~$552/month
```

---

## So sÃ¡nh vá»›i cÃ¡c dá»‹ch vá»¥ khÃ¡c

### Redshift vs Athena vs RDS

| TiÃªu chÃ­ | Redshift | Athena | RDS |
|----------|----------|--------|-----|
| **Type** | Data Warehouse | Serverless Query | OLTP Database |
| **Use case** | BI, Analytics | Ad-hoc queries on S3 | Transactions |
| **Data size** | GB - PB | GB - PB (S3) | GB - TB |
| **Latency** | Seconds | Seconds - Minutes | Milliseconds |
| **Pricing** | Node-hours / RPU | Per query ($5/TB) | Instance hours |
| **ETL needed** | âœ… Yes (load data) | âŒ No (query S3 directly) | N/A |
| **Concurrency** | High | Moderate | Very High |

### Khi nÃ o dÃ¹ng gÃ¬?

| Scenario | Recommendation |
|----------|----------------|
| Complex BI dashboards, reporting | ğŸ† **Redshift** |
| Ad-hoc queries on S3 data lake | ğŸ† **Athena** |
| Application database | ğŸ† **RDS / Aurora** |
| Real-time analytics | Kinesis + Redshift |
| Data exploration, occasional queries | ğŸ† **Athena** |
| Predictable, heavy analytics workload | ğŸ† **Redshift Provisioned** |

---

## Best Practices

### Design

| Practice | Giáº£i thÃ­ch |
|----------|------------|
| **Chá»n Sort Key Ä‘Ãºng** | Dá»±a trÃªn WHERE clause phá»• biáº¿n nháº¥t |
| **Chá»n Distribution Key Ä‘Ãºng** | Dá»±a trÃªn JOIN conditions |
| **DÃ¹ng RA3 nodes** | TÃ¡ch compute & storage, flexibility |
| **Compress data** | Automatic, nhÆ°ng analyze compression |

### Performance

| Practice | Giáº£i thÃ­ch |
|----------|------------|
| **VACUUM regularly** | Sau DELETE/UPDATE Ä‘á»ƒ reclaim space |
| **ANALYZE tables** | Update statistics cho query optimizer |
| **Use Workload Management (WLM)** | Prioritize queries, set timeouts |
| **Monitor with CloudWatch** | Query performance, disk space, CPU |

### Cost Optimization

| Practice | Giáº£i thÃ­ch |
|----------|------------|
| **Reserved Instances** | LÃªn Ä‘áº¿n 75% savings cho steady workload |
| **Pause cluster** | Khi khÃ´ng dÃ¹ng (dev/test) |
| **Use Spectrum** | Cho cold data thay vÃ¬ load vÃ o Redshift |
| **Right-size nodes** | Monitor vÃ  resize náº¿u underutilized |

---

## Exam Tips

### Key Points

> ğŸ’¡ **Redshift = Data Warehouse = OLAP = Analytics**

| Keyword trong Ä‘á» | NghÄ© Ä‘áº¿n |
|------------------|----------|
| Data warehouse, analytics, BI | **Redshift** |
| Petabyte scale analytics | **Redshift** |
| OLAP, complex queries | **Redshift** |
| Columnar storage | **Redshift** |
| MPP (Massively Parallel Processing) | **Redshift** |
| Query S3 data lake | **Redshift Spectrum** hoáº·c **Athena** |
| Real-time dashboard | **Redshift** (vá»›i materialized views) |
| ETL from Aurora/RDS | **Zero-ETL** hoáº·c **Glue** |

### So sÃ¡nh nhanh

| Scenario | Service |
|----------|---------|
| "Data warehouse for BI" | Redshift |
| "Ad-hoc queries on S3" | Athena |
| "Transactional database" | RDS/Aurora |
| "Real-time streaming analytics" | Kinesis Data Analytics |
| "ETL jobs" | Glue |
| "Serverless data warehouse" | Redshift Serverless |

### Gotchas

| Trap | Sá»± tháº­t |
|------|---------|
| "Redshift lÃ  database?" | âŒ LÃ  Data Warehouse (OLAP), khÃ´ng pháº£i OLTP |
| "Redshift auto-scales?" | Provisioned: âŒ Manual, Serverless: âœ… Auto |
| "Spectrum cáº§n load data?" | âŒ Query trá»±c tiáº¿p trÃªn S3 |
| "Redshift cháº¡y trong VPC?" | âœ… LuÃ´n trong VPC |

---

## TÃ i liá»‡u tham kháº£o

- [Amazon Redshift Documentation](https://docs.aws.amazon.com/redshift/)
- [Redshift Best Practices](https://docs.aws.amazon.com/redshift/latest/dg/best-practices.html)
- [Redshift Pricing](https://aws.amazon.com/redshift/pricing/)
- [Redshift Serverless](https://aws.amazon.com/redshift/redshift-serverless/)
