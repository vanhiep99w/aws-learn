# Amazon Elastic File System (EFS)


## M·ª•c l·ª•c

- [EFS l√† g√¨?](#efs-l√†-g√¨)
- [T·∫°i sao c·∫ßn EFS?](#t·∫°i-sao-c·∫ßn-efs)
- [EFS x·ª≠ l√Ω Concurrent Access nh∆∞ th·∫ø n√†o?](#efs-x·ª≠-l√Ω-concurrent-access-nh∆∞-th·∫ø-n√†o)
- [EBS Multi-Attach th√¨ sao?](#ebs-multi-attach-th√¨-sao)
- [EFS vs S3 - Kh√°c nhau ho√†n to√†n!](#efs-vs-s3-kh√°c-nhau-ho√†n-to√†n)
- [T√≥m l·∫°i c√°c lo·∫°i Storage](#t√≥m-l·∫°i-c√°c-lo·∫°i-storage)
- [So s√°nh EFS vs EBS vs Instance Store](#so-s√°nh-efs-vs-ebs-vs-instance-store)
- [EFS ho·∫°t ƒë·ªông nh∆∞ th·∫ø n√†o?](#efs-ho·∫°t-ƒë·ªông-nh∆∞-th·∫ø-n√†o)
- [File System Types](#file-system-types)
- [Storage Classes](#storage-classes)
- [Performance Modes](#performance-modes)
- [Throughput Modes](#throughput-modes)
- [Mount EFS tr√™n EC2](#mount-efs-tr√™n-ec2)
- [Security](#security)
- [Use Cases](#use-cases)
- [EFS v·ªõi c√°c AWS Services kh√°c](#efs-v·ªõi-c√°c-aws-services-kh√°c)
- [Pricing](#pricing)
- [H·∫°n ch·∫ø](#h·∫°n-ch·∫ø)
- [T·∫°o EFS qua CLI](#t·∫°o-efs-qua-cli)
- [Li√™n k·∫øt v·ªõi c√°c d·ªãch v·ª• kh√°c](#li√™n-k·∫øt-v·ªõi-c√°c-d·ªãch-v·ª•-kh√°c)

---

## EFS l√† g√¨?

**Amazon EFS** l√† d·ªãch v·ª• **file storage** ƒë∆∞·ª£c qu·∫£n l√Ω ho√†n to√†n (fully managed), cho ph√©p chia s·∫ª file gi·ªØa nhi·ªÅu EC2 instances c√πng l√∫c.

## T·∫°i sao c·∫ßn EFS?

**V·∫•n ƒë·ªÅ**: Nhi·ªÅu EC2 instances c·∫ßn **ƒë·ªçc/ghi c√πng 1 file**.

```
KH√îNG C√ì EFS (EBS ch·ªâ g·∫Øn ƒë∆∞·ª£c 1 instance):

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   EC2    ‚îÇ     ‚îÇ   EC2    ‚îÇ     ‚îÇ   EC2    ‚îÇ
‚îÇ  Server1 ‚îÇ     ‚îÇ  Server2 ‚îÇ     ‚îÇ  Server3 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ                ‚îÇ                ‚îÇ
     ‚ñº                ‚ñº                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   EBS    ‚îÇ     ‚îÇ   EBS    ‚îÇ     ‚îÇ   EBS    ‚îÇ
‚îÇ /images  ‚îÇ     ‚îÇ /images  ‚îÇ     ‚îÇ /images  ‚îÇ
‚îÇ (copy 1) ‚îÇ     ‚îÇ (copy 2) ‚îÇ     ‚îÇ (copy 3) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚ùå 3 b·∫£n copy kh√°c nhau ‚Üí KH√îNG ƒê·ªíNG B·ªò!


C√ì EFS:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   EC2    ‚îÇ     ‚îÇ   EC2    ‚îÇ     ‚îÇ   EC2    ‚îÇ
‚îÇ  Server1 ‚îÇ     ‚îÇ  Server2 ‚îÇ     ‚îÇ  Server3 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ                ‚îÇ                ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               ‚îÇ     EFS      ‚îÇ
               ‚îÇ   /images    ‚îÇ
               ‚îÇ (1 b·∫£n duy   ‚îÇ
               ‚îÇ   nh·∫•t)      ‚îÇ
               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚úÖ T·∫•t c·∫£ ƒë·ªçc/ghi c√πng 1 file ‚Üí ƒê·ªíNG B·ªò!
```

### V√≠ d·ª• th·ª±c t·∫ø

**Website WordPress v·ªõi nhi·ªÅu servers:**
```
User upload ·∫£nh l√™n Server1
        ‚îÇ
        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      EFS                            ‚îÇ
‚îÇ              /var/www/html/uploads/                 ‚îÇ
‚îÇ                   image.jpg                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚îú‚îÄ‚îÄ‚ñ∫ Server1: th·∫•y image.jpg ‚úÖ
        ‚îú‚îÄ‚îÄ‚ñ∫ Server2: th·∫•y image.jpg ‚úÖ
        ‚îî‚îÄ‚îÄ‚ñ∫ Server3: th·∫•y image.jpg ‚úÖ

N·∫øu d√πng EBS: User upload l√™n Server1, Server2 v√† Server3 KH√îNG th·∫•y file!
```

## EFS x·ª≠ l√Ω Concurrent Access nh∆∞ th·∫ø n√†o?

EFS d√πng **NFS protocol** v·ªõi file locking, tr√°nh data corruption:

```
Instance 1: Mu·ªën ghi file A
Instance 2: Mu·ªën ghi file A (c√πng l√∫c)

        ‚îÇ               ‚îÇ
        ‚ñº               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              EFS                    ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ  NFS Lock Manager:                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ file A: LOCKED by Instance 1  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ Instance 2: CH·ªú...            ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ  1. Instance 1 ghi xong ‚Üí unlock    ‚îÇ
‚îÇ  2. Instance 2 ƒë∆∞·ª£c lock ‚Üí ghi      ‚îÇ
‚îÇ                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚Üí Kh√¥ng corrupt v√¨ ghi TU·∫¶N T·ª∞
```

## EBS Multi-Attach th√¨ sao?

EBS c√≥ Multi-Attach nh∆∞ng **r·∫•t h·∫°n ch·∫ø**:

```
EBS Multi-Attach:                    EFS:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    CH·ªà TRONG 1 AZ      ‚îÇ          ‚îÇ      ACROSS NHI·ªÄU AZs          ‚îÇ
‚îÇ                        ‚îÇ          ‚îÇ                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ          ‚îÇ  AZ-a    AZ-b    AZ-c          ‚îÇ
‚îÇ  ‚îÇEC2 ‚îÇ ‚îÇEC2 ‚îÇ ‚îÇEC2 ‚îÇ  ‚îÇ          ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò  ‚îÇ          ‚îÇ  ‚îÇEC2 ‚îÇ  ‚îÇEC2 ‚îÇ  ‚îÇEC2 ‚îÇ        ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ          ‚îÇ  ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò        ‚îÇ
‚îÇ            ‚ñº           ‚îÇ          ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ          ‚îÇ            ‚ñº                  ‚îÇ
‚îÇ     ‚îÇEBS io1/io2‚îÇ      ‚îÇ          ‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ          ‚îÇ     ‚îÇ    EFS    ‚îÇ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

| | EBS Multi-Attach | EFS |
|---|------------------|-----|
| Across AZs | ‚ùå Ch·ªâ 1 AZ | ‚úÖ Nhi·ªÅu AZs |
| Volume type | Ch·ªâ io1/io2 (ƒë·∫Øt) | T·∫•t c·∫£ |
| Max instances | 16 | H√†ng ngh√¨n |
| File locking | ‚ùå C·∫ßn cluster filesystem | ‚úÖ T·ª± ƒë·ªông (NFS) |
| D·ªÖ d√πng | ‚ùå Ph·ª©c t·∫°p | ‚úÖ Mount nh∆∞ folder |

> üìå **Th·ª±c t·∫ø**: 99% c·∫ßn shared storage ‚Üí d√πng EFS. EBS Multi-Attach ch·ªâ cho clustered databases ƒë·∫∑c bi·ªát.

## EFS vs S3 - Kh√°c nhau ho√†n to√†n!

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           S3                                    ‚îÇ
‚îÇ                     (Object Storage)                            ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   Truy c·∫≠p qua: HTTP API (GET, PUT, DELETE)                     ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   aws s3 cp s3://bucket/image.jpg ./image.jpg                   ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   ‚ùå KH√îNG mount nh∆∞ folder ƒë∆∞·ª£c                                ‚îÇ
‚îÇ   ‚ùå S·ª≠a file = download ‚Üí s·ª≠a ‚Üí upload l·∫°i                     ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           EFS                                   ‚îÇ
‚îÇ                      (File Storage)                             ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   Truy c·∫≠p qua: Mount nh∆∞ folder b√¨nh th∆∞·ªùng                    ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   mount -t efs fs-xxx:/ /mnt/efs                                ‚îÇ
‚îÇ   ls /mnt/efs/                                                  ‚îÇ
‚îÇ   vim /mnt/efs/config.txt                                       ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   ‚úÖ D√πng nh∆∞ ·ªï c·ª©ng b√¨nh th∆∞·ªùng                                ‚îÇ
‚îÇ   ‚úÖ S·ª≠a file tr·ª±c ti·∫øp                                         ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

| | S3 | EFS |
|---|-----|-----|
| Truy c·∫≠p | HTTP API | Mount nh∆∞ folder |
| S·ª≠a 1 ph·∫ßn file | ‚ùå Download ‚Üí s·ª≠a ‚Üí upload | ‚úÖ S·ª≠a tr·ª±c ti·∫øp |
| App c·∫ßn file path | ‚ùå Ph·∫£i ƒë·ªïi code | ‚úÖ D√πng lu√¥n /mnt/efs/... |
| Random access | ‚ùå Kh√¥ng | ‚úÖ C√≥ |
| Cost | R·∫ª h∆°n | ƒê·∫Øt h∆°n |

### V√≠ d·ª• ch·ªçn S3 hay EFS

| T√¨nh hu·ªëng | D√πng |
|------------|------|
| WordPress uploads | **EFS** - mount v√†o /uploads, kh√¥ng ƒë·ªïi code |
| App ƒë·ªçc config /etc/myapp/config.yaml | **EFS** - app ƒë·ªçc file b√¨nh th∆∞·ªùng |
| Video editing (ƒë·ªçc/ghi random trong file) | **EFS** - c·∫ßn random access |
| Backup 10TB ·∫£nh (√≠t truy c·∫≠p) | **S3** - r·∫ª h∆°n nhi·ªÅu |
| Static website hosting | **S3** - c√≥ t√≠nh nƒÉng hosting |

## T√≥m l·∫°i c√°c lo·∫°i Storage

| Storage | Gi·ªëng nh∆∞ | Use case |
|---------|-----------|----------|
| **S3** | Google Drive (upload/download) | Backup, static files, data lake |
| **EFS** | ·ªî c·ª©ng m·∫°ng (NAS) | App c·∫ßn file path, shared config |
| **EBS** | ·ªî c·ª©ng USB | Database, OS, 1 instance |

## So s√°nh EFS vs EBS vs Instance Store

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                ‚îÇ     EBS        ‚îÇ     EFS        ‚îÇ Instance Store ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Lo·∫°i storage   ‚îÇ Block storage  ‚îÇ File storage   ‚îÇ Block storage  ‚îÇ
‚îÇ Mount t·ª´       ‚îÇ 1 instance*    ‚îÇ Nhi·ªÅu instances‚îÇ 1 instance     ‚îÇ
‚îÇ Across AZs     ‚îÇ ‚ùå Kh√¥ng       ‚îÇ ‚úÖ C√≥          ‚îÇ ‚ùå Kh√¥ng       ‚îÇ
‚îÇ Auto scaling   ‚îÇ ‚ùå Ph·∫£i resize ‚îÇ ‚úÖ T·ª± ƒë·ªông     ‚îÇ ‚ùå C·ªë ƒë·ªãnh     ‚îÇ
‚îÇ Data persist   ‚îÇ ‚úÖ C√≥          ‚îÇ ‚úÖ C√≥          ‚îÇ ‚ùå M·∫•t khi stop‚îÇ
‚îÇ Protocol       ‚îÇ Block (attach) ‚îÇ NFS v4.1       ‚îÇ Block (local)  ‚îÇ
‚îÇ Use case       ‚îÇ Database, OS   ‚îÇ Shared files   ‚îÇ Cache, temp    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

* EBS io1/io2 h·ªó tr·ª£ Multi-Attach nh∆∞ng gi·ªõi h·∫°n trong c√πng 1 AZ
```

## EFS ho·∫°t ƒë·ªông nh∆∞ th·∫ø n√†o?

### Mount Target l√† g√¨?

**Mount Target** = ƒêi·ªÉm k·∫øt n·ªëi ƒë·ªÉ EC2 truy c·∫≠p v√†o EFS. N√≥ c√≥ **IP address** trong subnet c·ªßa b·∫°n.

```
Gi·ªëng nh∆∞ ·ªï c·ª©ng m·∫°ng ·ªü nh√†:

·ªû nh√†:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Laptop  ‚îÇ‚îÄ‚îÄWiFi‚îÄ‚îÄ‚ñ∫‚îÇ   NAS    ‚îÇ  ‚Üê NAS c√≥ IP 192.168.1.100
‚îÇ          ‚îÇ         ‚îÇ (·ªï m·∫°ng) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Tr√™n AWS:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   EC2    ‚îÇ‚îÄ‚îÄVPC‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ Mount Target ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   EFS    ‚îÇ
‚îÇ          ‚îÇ         ‚îÇ(IP: 10.0.1.50)‚îÇ         ‚îÇ          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### T·∫°i sao c·∫ßn Mount Target?

```
EC2 mu·ªën ƒë·ªçc file t·ª´ EFS
        ‚îÇ
        ‚ñº
Ph·∫£i k·∫øt n·ªëi qua NETWORK (NFS protocol)
        ‚îÇ
        ‚ñº
C·∫ßn 1 IP address ƒë·ªÉ k·∫øt n·ªëi ƒë·∫øn
        ‚îÇ
        ‚ñº
Mount Target cung c·∫•p IP ƒë√≥ (10.0.1.50)
        ‚îÇ
        ‚ñº
EC2 mount: mount -t nfs 10.0.1.50:/ /mnt/efs
```

### Mount Target trong m·ªói AZ

ƒê·ªÉ EC2 ·ªü c√°c AZ kh√°c nhau ƒë·ªÅu truy c·∫≠p ƒë∆∞·ª£c EFS, t·∫°o **Mount Target trong m·ªói AZ**:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           VPC                                   ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ                        EFS File System                      ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ         ‚îÇ                    ‚îÇ                    ‚îÇ             ‚îÇ
‚îÇ         ‚ñº                    ‚ñº                    ‚ñº             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇMount Target ‚îÇ      ‚îÇMount Target ‚îÇ      ‚îÇMount Target ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ 10.0.1.50   ‚îÇ      ‚îÇ 10.0.2.50   ‚îÇ      ‚îÇ 10.0.3.50   ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ   (AZ-a)    ‚îÇ      ‚îÇ   (AZ-b)    ‚îÇ      ‚îÇ   (AZ-c)    ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ         ‚îÇ                    ‚îÇ                    ‚îÇ             ‚îÇ
‚îÇ         ‚ñº                    ‚ñº                    ‚ñº             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ    EC2      ‚îÇ      ‚îÇ    EC2      ‚îÇ      ‚îÇ    EC2      ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  (AZ-a)     ‚îÇ      ‚îÇ  (AZ-b)     ‚îÇ      ‚îÇ  (AZ-c)     ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Best Practice

| Rule | L√Ω do |
|------|-------|
| T·∫°o Mount Target trong **m·ªói AZ** | High availability |
| EC2 mount t·ª´ Mount Target **c√πng AZ** | Nhanh h∆°n + kh√¥ng t·ªën data transfer |
| EC2 c√≥ th·ªÉ mount t·ª´ **AZ kh√°c** | Nh∆∞ng ch·∫≠m h∆°n + t·ªën ph√≠ |

```
EC2 ·ªü AZ-a ‚Üí Mount t·ª´ Mount Target ·ªü AZ-a ‚úÖ (nhanh, mi·ªÖn ph√≠)
EC2 ·ªü AZ-a ‚Üí Mount t·ª´ Mount Target ·ªü AZ-b ‚ö†Ô∏è (ch·∫≠m h∆°n, t·ªën ph√≠ cross-AZ)
```

### Mount Target c√≥ m·∫•t ph√≠ kh√¥ng?

**Kh√¥ng!** Mount Target **mi·ªÖn ph√≠**. C·ª© t·∫°o ·ªü m·ªói AZ.

| Th√†nh ph·∫ßn | C√≥ ph√≠? |
|------------|---------|
| Mount Target | ‚ùå Mi·ªÖn ph√≠ |
| Storage (GB/th√°ng) | ‚úÖ C√≥ |
| Data transfer cross-AZ | ‚úÖ C√≥ |

## File System Types

### Regional (Khuy·∫øn ngh·ªã)

AWS **t·ª± ƒë·ªông replicate** data qua nhi·ªÅu AZs (b·∫°n kh√¥ng th·∫•y, kh√¥ng qu·∫£n l√Ω):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         AWS (behind the scenes)                 ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   AZ-a              AZ-b              AZ-c                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
‚îÇ   ‚îÇ Data ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ Data ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ Data ‚îÇ                  ‚îÇ
‚îÇ   ‚îÇ(copy)‚îÇ   sync   ‚îÇ(copy)‚îÇ   sync   ‚îÇ(copy)‚îÇ                  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   AWS T·ª∞ ƒê·ªòNG sync - B·∫°n KH√îNG th·∫•y, KH√îNG qu·∫£n l√Ω              ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    B·∫°n th·∫•y (t·ª´ g√≥c nh√¨n user)                  ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                         ‚îÇ
‚îÇ                 ‚îÇ    1 EFS duy nh·∫•t   ‚îÇ                         ‚îÇ
‚îÇ                 ‚îÇ    /my-files/       ‚îÇ                         ‚îÇ
‚îÇ                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   Ghi file ‚Üí AWS lo replicate qua c√°c AZs                       ‚îÇ
‚îÇ   1 AZ down ‚Üí V·∫´n ho·∫°t ƒë·ªông ‚úÖ                                  ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### One Zone

Data **ch·ªâ l∆∞u trong 1 AZ**, nh∆∞ng **v·∫´n share ƒë∆∞·ª£c** t·ª´ EC2 ·ªü AZ kh√°c:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       One Zone EFS (·ªü AZ-a)                     ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   AZ-a                    AZ-b                    AZ-c          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ   ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ        ‚îÇ              ‚îÇ        ‚îÇ            ‚îÇ‚îÇ
‚îÇ   ‚îÇ ‚îÇEFS Data  ‚îÇ ‚îÇ        ‚îÇ  (kh√¥ng c√≥   ‚îÇ        ‚îÇ (kh√¥ng c√≥  ‚îÇ‚îÇ
‚îÇ   ‚îÇ ‚îÇ(ch·ªâ ƒë√¢y) ‚îÇ ‚îÇ        ‚îÇ   data)      ‚îÇ        ‚îÇ  data)     ‚îÇ‚îÇ
‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ        ‚îÇ              ‚îÇ        ‚îÇ            ‚îÇ‚îÇ
‚îÇ   ‚îÇ      ‚îÇ       ‚îÇ        ‚îÇ              ‚îÇ        ‚îÇ            ‚îÇ‚îÇ
‚îÇ   ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ        ‚îÇ              ‚îÇ        ‚îÇ            ‚îÇ‚îÇ
‚îÇ   ‚îÇ ‚îÇ  Mount   ‚îÇ‚óÑ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÇ
‚îÇ   ‚îÇ ‚îÇ  Target  ‚îÇ ‚îÇ        ‚îÇ  cross-AZ    ‚îÇ        ‚îÇ  cross-AZ  ‚îÇ‚îÇ
‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ        ‚îÇ  traffic     ‚îÇ        ‚îÇ  traffic   ‚îÇ‚îÇ
‚îÇ   ‚îÇ      ‚îÇ       ‚îÇ        ‚îÇ      ‚îÇ       ‚îÇ        ‚îÇ     ‚îÇ      ‚îÇ‚îÇ
‚îÇ   ‚îÇ      ‚ñº       ‚îÇ        ‚îÇ      ‚ñº       ‚îÇ        ‚îÇ     ‚ñº      ‚îÇ‚îÇ
‚îÇ   ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ        ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ        ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ‚îÇ
‚îÇ   ‚îÇ ‚îÇ  EC2   ‚îÇ   ‚îÇ        ‚îÇ ‚îÇ  EC2   ‚îÇ   ‚îÇ        ‚îÇ ‚îÇ  EC2   ‚îÇ ‚îÇ‚îÇ
‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ        ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ        ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   EC2 ·ªü AZ-b, AZ-c V·∫™N TRUY C·∫¨P ƒê∆Ø·ª¢C (qua network cross-AZ)     ‚îÇ
‚îÇ   ‚ö†Ô∏è AZ-a down = KH√îNG truy c·∫≠p ƒë∆∞·ª£c data                       ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### So s√°nh Regional vs One Zone

| | Regional | One Zone |
|---|----------|----------|
| Data l∆∞u ·ªü ƒë√¢u | Replicate qua nhi·ªÅu AZs | Ch·ªâ 1 AZ |
| EC2 ·ªü AZ kh√°c truy c·∫≠p ƒë∆∞·ª£c? | ‚úÖ ƒê∆∞·ª£c | ‚úÖ ƒê∆∞·ª£c (qua network) |
| 1 AZ down | V·∫´n OK | ‚ùå Kh√¥ng truy c·∫≠p ƒë∆∞·ª£c |
| Mount Target | M·ªói AZ c√≥ 1 | Ch·ªâ 1 ·ªü AZ ch·ª©a data |
| Cost | ƒê·∫Øt h∆°n | R·∫ª h∆°n ~47% |
| Use case | Production, critical | Dev/test, c√≥ th·ªÉ recreate |

## Storage Classes

**Storage Classes** = C√°c **lo·∫°i l∆∞u tr·ªØ** v·ªõi gi√° v√† t·ªëc ƒë·ªô kh√°c nhau, ƒë·ªÉ ti·∫øt ki·ªám ti·ªÅn.

```
√ù t∆∞·ªüng ƒë∆°n gi·∫£n:

File truy c·∫≠p th∆∞·ªùng xuy√™n ‚Üí L∆∞u ·ªü ch·ªó NHANH ‚Üí ƒê·∫ÆT
File √≠t truy c·∫≠p          ‚Üí L∆∞u ·ªü ch·ªó CH·∫¨M  ‚Üí R·∫∫
```

### V√≠ d·ª• th·ª±c t·∫ø

```
C√¥ng ty b·∫°n c√≥ 1TB files trong EFS:

‚îú‚îÄ‚îÄ 200GB: Code, config (d√πng h√†ng ng√†y)     ‚Üí C·∫ßn NHANH
‚îú‚îÄ‚îÄ 500GB: Logs th√°ng tr∆∞·ªõc (xem ƒë√¥i khi)    ‚Üí Ch·∫≠m ch√∫t OK
‚îî‚îÄ‚îÄ 300GB: Logs nƒÉm ngo√°i (g·∫ßn nh∆∞ ko xem)   ‚Üí Ch·∫≠m c≈©ng ƒë∆∞·ª£c
```

### 3 Storage Classes

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Standard     ‚îÇ  ‚Üê Files d√πng h√†ng ng√†y
‚îÇ   (nhanh, ƒë·∫Øt)  ‚îÇ     $0.30/GB/th√°ng
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ  30 ng√†y kh√¥ng ai m·ªü
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Infrequent      ‚îÇ  ‚Üê Files √≠t d√πng
‚îÇ Access (IA)     ‚îÇ     $0.016/GB/th√°ng (r·∫ª h∆°n 92%)
‚îÇ (ch·∫≠m h∆°n, r·∫ª)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ  90 ng√†y kh√¥ng ai m·ªü
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Archive      ‚îÇ  ‚Üê Files g·∫ßn nh∆∞ kh√¥ng d√πng
‚îÇ(ch·∫≠m nh·∫•t, r·∫ª   ‚îÇ     $0.008/GB/th√°ng (r·∫ª nh·∫•t)
‚îÇ     nh·∫•t)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### So s√°nh chi ph√≠

| | Standard | IA | Archive |
|---|----------|-----|---------|
| Gi√° storage | $0.30/GB | $0.016/GB | $0.008/GB |
| Gi√° access | Mi·ªÖn ph√≠ | $0.01/GB | $0.03-0.06/GB |
| T·ªëc ƒë·ªô | Nhanh nh·∫•t | Ch·∫≠m h∆°n | Ch·∫≠m nh·∫•t |
| D√πng cho | Files d√πng th∆∞·ªùng xuy√™n | Files √≠t d√πng | Files g·∫ßn nh∆∞ kh√¥ng d√πng |

### Lifecycle Management

EFS **t·ª± ƒë·ªông chuy·ªÉn** files gi·ªØa storage classes d·ª±a tr√™n access pattern. B·∫°n kh√¥ng c·∫ßn t·ª± move files:

```
File "report.pdf" t·∫°o ng√†y 1/1

Ng√†y 1-30:   Standard  ($0.30)   ‚Üê m·ªõi t·∫°o
Ng√†y 31-90:  IA        ($0.016)  ‚Üê 30 ng√†y kh√¥ng ai m·ªü ‚Üí t·ª± ƒë·ªông chuy·ªÉn
Ng√†y 91+:    Archive   ($0.008)  ‚Üê 90 ng√†y kh√¥ng ai m·ªü ‚Üí t·ª± ƒë·ªông chuy·ªÉn

Ng√†y 100: C√≥ ng∆∞·ªùi m·ªü ‚Üí T·ª± ƒë·ªông chuy·ªÉn v·ªÅ Standard (n·∫øu c·∫•u h√¨nh)
```

### V√≠ d·ª• ti·∫øt ki·ªám cost

```
C√≥ 1TB data trong EFS:
‚îú‚îÄ‚îÄ 200GB: Truy c·∫≠p h√†ng ng√†y
‚îú‚îÄ‚îÄ 500GB: Truy c·∫≠p v√†i l·∫ßn/th√°ng  
‚îî‚îÄ‚îÄ 300GB: Kh√¥ng truy c·∫≠p c·∫£ nƒÉm

KH√îNG c√≥ Lifecycle (t·∫•t c·∫£ ·ªü Standard):
‚îî‚îÄ‚îÄ 1TB √ó $0.30 = $300/th√°ng

C√ì Lifecycle (t·ª± ƒë·ªông chuy·ªÉn):
‚îú‚îÄ‚îÄ 200GB Standard √ó $0.30 = $60
‚îú‚îÄ‚îÄ 500GB IA √ó $0.016 = $8
‚îî‚îÄ‚îÄ 300GB Archive √ó $0.008 = $2.4
‚îî‚îÄ‚îÄ Total = $70.4/th√°ng

Ti·∫øt ki·ªám: $230/th√°ng (~77%)
```

### C·∫•u h√¨nh Lifecycle Policy

```bash
aws efs put-lifecycle-configuration \
    --file-system-id fs-12345678 \
    --lifecycle-policies \
        TransitionToIA=AFTER_30_DAYS \
        TransitionToArchive=AFTER_90_DAYS \
        TransitionToPrimaryStorageClass=AFTER_1_ACCESS
```

| Policy | √ù nghƒ©a |
|--------|---------|
| `TransitionToIA=AFTER_30_DAYS` | Sau 30 ng√†y kh√¥ng access ‚Üí chuy·ªÉn sang IA |
| `TransitionToArchive=AFTER_90_DAYS` | Sau 90 ng√†y kh√¥ng access ‚Üí chuy·ªÉn sang Archive |
| `TransitionToPrimaryStorageClass=AFTER_1_ACCESS` | Khi access l·∫°i ‚Üí chuy·ªÉn v·ªÅ Standard |

### L∆∞u √Ω

| L∆∞u √Ω | Chi ti·∫øt |
|-------|----------|
| Minimum storage duration | Archive: 90 ng√†y (t√≠nh ph√≠ d√π x√≥a s·ªõm) |
| Minimum file size | IA/Archive: 128KB (file nh·ªè h∆°n v·∫´n t√≠nh 128KB) |
| Access cost | IA/Archive c√≥ ph√≠ khi ƒë·ªçc/ghi - ƒë·ª´ng d√πng cho files truy c·∫≠p th∆∞·ªùng xuy√™n |

> üìå **Best Practice**: B·∫≠t Lifecycle Management ƒë·ªÉ t·ª± ƒë·ªông ti·∫øt ki·ªám cost. Kh√¥ng c·∫ßn qu·∫£n l√Ω th·ªß c√¥ng.

## Performance Modes

**Performance Mode** quy·∫øt ƒë·ªãnh **latency** v√† **s·ªë connections** - ch·ªçn khi t·∫°o EFS, **kh√¥ng ƒë·ªïi ƒë∆∞·ª£c**.

```
Gi·ªëng nh∆∞ lo·∫°i ƒë∆∞·ªùng:

General Purpose: ƒê∆∞·ªùng 4 l√†n, √≠t xe ‚Üí nhanh, m∆∞·ª£t
Max I/O: ƒê∆∞·ªùng 20 l√†n, nhi·ªÅu xe ‚Üí ch·∫≠m h∆°n nh∆∞ng ch·ª©a ƒë∆∞·ª£c nhi·ªÅu
```

| | General Purpose | Max I/O |
|---|-----------------|---------|
| Latency | Th·∫•p (sub-millisecond) | Cao h∆°n |
| Max connections | H√†ng ngh√¨n | H√†ng ch·ª•c ngh√¨n |
| Use case | Web, CMS, home dirs | Big data, media processing |
| Khuy·∫øn ngh·ªã | ‚úÖ 99% tr∆∞·ªùng h·ª£p | Ch·ªâ khi c·∫ßn r·∫•t nhi·ªÅu connections |

> ‚ö†Ô∏è **L∆∞u √Ω**: Sau khi t·∫°o EFS, **kh√¥ng th·ªÉ ƒë·ªïi** Performance Mode. Ph·∫£i t·∫°o EFS m·ªõi.

## Throughput Modes

**Throughput Mode** quy·∫øt ƒë·ªãnh **t·ªëc ƒë·ªô ƒë·ªçc/ghi (MB/s)** - c√≥ th·ªÉ ƒë·ªïi sau khi t·∫°o.

```
Throughput = T·ªëc ƒë·ªô truy·ªÅn data

Throughput 100 MB/s ‚Üí ƒê·ªçc file 1GB m·∫•t 10 gi√¢y
Throughput 1 GB/s   ‚Üí ƒê·ªçc file 1GB m·∫•t 1 gi√¢y
```

### So s√°nh Performance Mode vs Throughput Mode

| | Performance Mode | Throughput Mode |
|---|------------------|-----------------|
| Quy·∫øt ƒë·ªãnh g√¨? | Latency + s·ªë connections | T·ªëc ƒë·ªô ƒë·ªçc/ghi (MB/s) |
| ƒê·ªïi ƒë∆∞·ª£c kh√¥ng? | ‚ùå Kh√¥ng | ‚úÖ C√≥ |
| Options | General Purpose, Max I/O | Elastic, Bursting, Provisioned |

### 3 Throughput Modes

```
Elastic (khuy·∫øn ngh·ªã):
       ‚ñ≤
   10GB‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îê
    1GB‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Time
       T·ª± ƒë·ªông tƒÉng/gi·∫£m theo nhu c·∫ßu
       Tr·∫£ ti·ªÅn theo th·ª±c t·∫ø


Bursting:
       ‚ñ≤
       ‚îÇ   ‚îå‚îÄ‚îê        ‚îå‚îÄ‚îê
       ‚îÇ   ‚îÇ ‚îÇ        ‚îÇ ‚îÇ   Burst khi c·∫ßn
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       ‚îÇ   Baseline (d·ª±a tr√™n storage size)
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Time
       Mi·ªÖn ph√≠ (g·ªìm trong storage cost)


Provisioned:
       ‚ñ≤
  500MB‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       ‚îÇ   C·ªë ƒë·ªãnh, lu√¥n c√≥ s·∫µn
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Time
       Tr·∫£ ph√≠ c·ªë ƒë·ªãnh h√†ng th√°ng
```

| Mode | Throughput | Tr·∫£ ti·ªÅn | D√πng khi |
|------|------------|----------|----------|
| **Elastic** | T·ª± ƒë·ªông scale | Theo th·ª±c t·∫ø | Kh√¥ng bi·∫øt c·∫ßn bao nhi√™u |
| **Bursting** | D·ª±a tr√™n size | G·ªìm trong storage | EFS nh·ªè, ti·∫øt ki·ªám |
| **Provisioned** | C·ªë ƒë·ªãnh | C·ªë ƒë·ªãnh/th√°ng | C·∫ßn throughput ·ªïn ƒë·ªãnh |

> üìå **99% tr∆∞·ªùng h·ª£p**: Ch·ªçn **General Purpose** + **Elastic** l√† xong.

## Mount EFS tr√™n EC2

### C√†i ƒë·∫∑t EFS Utils

```bash
# Amazon Linux 2023
sudo dnf install -y amazon-efs-utils

# Amazon Linux 2
sudo yum install -y amazon-efs-utils

# Ubuntu
sudo apt-get install -y amazon-efs-utils
```

### Mount EFS

```bash
# Mount b·∫±ng EFS mount helper (khuy·∫øn ngh·ªã)
sudo mount -t efs fs-12345678:/ /mnt/efs

# Mount v·ªõi encryption in transit (TLS)
sudo mount -t efs -o tls fs-12345678:/ /mnt/efs

# Mount b·∫±ng NFS (n·∫øu kh√¥ng c√≥ efs-utils)
sudo mount -t nfs4 -o nfsvers=4.1 \
    fs-12345678.efs.us-east-1.amazonaws.com:/ /mnt/efs
```

### Auto mount khi boot (/etc/fstab)

```bash
# Th√™m v√†o /etc/fstab
fs-12345678:/ /mnt/efs efs defaults,_netdev 0 0

# V·ªõi encryption
fs-12345678:/ /mnt/efs efs tls,_netdev 0 0
```

## Security

### Security Groups

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                                 ‚îÇ
‚îÇ  EC2 Instance                    Mount Target                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ SG: sg-ec2    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ NFS ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ SG: sg-efs    ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ               ‚îÇ   Port 2049  ‚îÇ               ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  sg-efs Inbound Rule:                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ Type: NFS                                               ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ Port: 2049                                              ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ Source: sg-ec2  (Security Group c·ªßa EC2)                ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Encryption

| Lo·∫°i | M√¥ t·∫£ |
|------|-------|
| **At rest** | Data ƒë∆∞·ª£c encrypt khi l∆∞u tr√™n disk (d√πng KMS) |
| **In transit** | Data ƒë∆∞·ª£c encrypt khi truy·ªÅn qua network (TLS) |

```bash
# Mount v·ªõi encryption in transit
sudo mount -t efs -o tls fs-12345678:/ /mnt/efs
```

### Access Points

**Access Points** = C·ªïng v√†o EFS v·ªõi **permissions v√† root directory ri√™ng** cho m·ªói application.

```
KH√îNG c√≥ Access Points:

EFS /
‚îú‚îÄ‚îÄ /app1/
‚îú‚îÄ‚îÄ /app2/
‚îî‚îÄ‚îÄ /shared/

T·∫•t c·∫£ apps ƒë·ªÅu th·∫•y to√†n b·ªô EFS ‚Üí R·ªßi ro!
App1 c√≥ th·ªÉ x√≥a data c·ªßa App2 üí•


C√ì Access Points:

EFS /
‚îú‚îÄ‚îÄ /app1/  ‚óÑ‚îÄ‚îÄ Access Point 1 (ch·ªâ App1 th·∫•y)
‚îú‚îÄ‚îÄ /app2/  ‚óÑ‚îÄ‚îÄ Access Point 2 (ch·ªâ App2 th·∫•y)
‚îî‚îÄ‚îÄ /shared/ ‚óÑ‚îÄ‚îÄ Access Point 3 (c·∫£ 2 apps th·∫•y)

M·ªói app ch·ªâ th·∫•y folder c·ªßa m√¨nh ‚Üí An to√†n!
```

**V√≠ d·ª• v·ªõi Containers:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           EFS                                   ‚îÇ
‚îÇ                            /                                    ‚îÇ
‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ       ‚îÇ                    ‚îÇ                    ‚îÇ               ‚îÇ
‚îÇ    /wordpress/          /api/              /logs/               ‚îÇ
‚îÇ       ‚îÇ                    ‚îÇ                    ‚îÇ               ‚îÇ
‚îÇ       ‚ñ≤                    ‚ñ≤                    ‚ñ≤               ‚îÇ
‚îÇ       ‚îÇ                    ‚îÇ                    ‚îÇ               ‚îÇ
‚îÇ  Access Point 1       Access Point 2       Access Point 3       ‚îÇ
‚îÇ  (uid=1001)           (uid=1002)           (uid=1003)           ‚îÇ
‚îÇ       ‚îÇ                    ‚îÇ                    ‚îÇ               ‚îÇ
‚îÇ       ‚ñº                    ‚ñº                    ‚ñº               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇWordPress‚îÇ          ‚îÇ API     ‚îÇ          ‚îÇ Logging ‚îÇ          ‚îÇ
‚îÇ  ‚îÇContainer‚îÇ          ‚îÇContainer‚îÇ          ‚îÇContainer‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  WordPress th·∫•y /wordpress/ nh∆∞ l√† root (/)                     ‚îÇ
‚îÇ  Kh√¥ng th·∫•y /api/ hay /logs/                                    ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Access Point config:**

| Config | √ù nghƒ©a |
|--------|---------|
| Root directory | Folder n√†o app ƒë∆∞·ª£c th·∫•y (v√≠ d·ª•: /app1/) |
| POSIX user (uid/gid) | App ch·∫°y v·ªõi user n√†o (v√≠ d·ª•: uid=1001) |
| Permissions | Quy·ªÅn ƒë·ªçc/ghi |

**T·∫°o Access Point:**

```bash
aws efs create-access-point \
    --file-system-id fs-12345678 \
    --posix-user Uid=1001,Gid=1001 \
    --root-directory "Path=/wordpress,CreationInfo={OwnerUid=1001,OwnerGid=1001,Permissions=755}"
```

> üìå **D√πng khi**: Nhi·ªÅu apps/containers share 1 EFS, c·∫ßn isolation gi·ªØa ch√∫ng.

## Use Cases

| Use Case | T·∫°i sao d√πng EFS? |
|----------|-------------------|
| **Web serving** | Nhi·ªÅu web servers share c√πng content |
| **CMS (WordPress, Drupal)** | Shared uploads, themes, plugins |
| **Home directories** | User files accessible t·ª´ nhi·ªÅu instances |
| **Container storage** | ECS/EKS tasks share data |
| **Lambda** | Serverless functions c·∫ßn file system |
| **Machine Learning** | Training data shared gi·ªØa nhi·ªÅu instances |
| **Big Data** | Analytics tr√™n shared dataset |

## EFS v·ªõi c√°c AWS Services kh√°c

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         Amazon EFS                              ‚îÇ
‚îÇ                              ‚îÇ                                  ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ         ‚îÇ                    ‚îÇ                    ‚îÇ             ‚îÇ
‚îÇ         ‚ñº                    ‚ñº                    ‚ñº             ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ   EC2    ‚îÇ        ‚îÇ   ECS    ‚îÇ        ‚îÇ  Lambda  ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ          ‚îÇ        ‚îÇ   EKS    ‚îÇ        ‚îÇ          ‚îÇ          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ On-prem  ‚îÇ        ‚îÇ   AWS    ‚îÇ        ‚îÇ DataSync ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ (Direct  ‚îÇ        ‚îÇ  Backup  ‚îÇ        ‚îÇ          ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ Connect) ‚îÇ        ‚îÇ          ‚îÇ        ‚îÇ          ‚îÇ          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Pricing

| Th√†nh ph·∫ßn | Chi ph√≠ (us-east-1) |
|------------|---------------------|
| **Standard storage** | $0.30/GB/th√°ng |
| **IA storage** | $0.016/GB/th√°ng |
| **Archive storage** | $0.008/GB/th√°ng |
| **IA access** | $0.01/GB ƒë·ªçc/ghi |
| **Archive access** | $0.03/GB ƒë·ªçc, $0.06/GB ghi |
| **Elastic Throughput** | $0.04/GB transferred |

> üìå One Zone storage classes r·∫ª h∆°n ~47% so v·ªõi Regional

## H·∫°n ch·∫ø

| H·∫°n ch·∫ø | Chi ti·∫øt |
|---------|----------|
| **Kh√¥ng h·ªó tr·ª£ Windows** | Ch·ªâ Linux-based instances |
| **Chi ph√≠ cao h∆°n EBS** | ƒê·ªïi l·∫°i ƒë∆∞·ª£c shared access |
| **Latency cao h∆°n EBS** | V√¨ qua network (NFS) |
| **Ch·ªâ trong 1 VPC** | M·ªôt file system ch·ªâ c√≥ mount targets trong 1 VPC |

## T·∫°o EFS qua CLI

```bash
# T·∫°o file system
aws efs create-file-system \
    --performance-mode generalPurpose \
    --throughput-mode elastic \
    --encrypted \
    --tags Key=Name,Value=my-efs

# T·∫°o mount target trong m·ªói subnet
aws efs create-mount-target \
    --file-system-id fs-12345678 \
    --subnet-id subnet-aaaaaaaa \
    --security-groups sg-xxxxxxxx
```

## Li√™n k·∫øt v·ªõi c√°c d·ªãch v·ª• kh√°c

- [EC2](ec2.md) - Mount EFS tr√™n EC2 instances
- [EBS](ebs.md) - So s√°nh block storage vs file storage
- [VPC](vpc.md) - EFS mount targets n·∫±m trong VPC subnets
- [Security Groups](security-groups.md) - B·∫£o v·ªá access ƒë·∫øn EFS

---

**Ngu·ªìn tham kh·∫£o:**
- [What is Amazon EFS? - AWS Documentation](https://docs.aws.amazon.com/efs/latest/ug/whatisefs.html)
- [How Amazon EFS works - AWS Documentation](https://docs.aws.amazon.com/efs/latest/ug/how-it-works.html)
- [EFS Storage Classes - AWS](https://aws.amazon.com/efs/storage-classes/)
